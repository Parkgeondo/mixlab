/*! For license information please see main.76aae385.js.LICENSE.txt */
!function(){var e={890:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,i){"use strict";var a=[],o=Object.getPrototypeOf,s=a.slice,u=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},c=a.push,l=a.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,v=p.call(Object),m={},g=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},_=r.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var r,i,a=(n=n||_).createElement("script");if(a.text=e,t)for(r in b)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function w(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?h[f.call(e)]||"object":typeof e}var k="3.7.1",S=/HTML$/i,E=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}E.fn=E.prototype={jquery:k,constructor:E,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"===typeof o&&(c=o,o=arguments[s]||{},s++),"object"===typeof o||g(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],a=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,o[t]=E.extend(c,a,r)):void 0!==r&&(o[t]=r));return o},E.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=o(e))||"function"===typeof(n=d.call(t,"constructor")&&t.constructor)&&p.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=E.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?E.merge(n,"string"===typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!S.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(T(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return u(o)},guid:1,support:m}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var M=a.pop,C=a.sort,I=a.splice,R="[\\x20\\t\\r\\n\\f]",N=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g");E.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var P=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}E.escapeSelector=function(e){return(e+"").replace(P,D)};var L=_,O=c;!function(){var e,t,n,i,o,u,c,h,f,p,v=O,g=E.expando,y=0,_=0,b=ee(),x=ee(),w=ee(),k=ee(),S=function(e,t){return e===t&&(o=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+R+"*("+P+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+R+"*\\]",U=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",F=new RegExp(R+"+","g"),B=new RegExp("^"+R+"*,"+R+"*"),V=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),z=new RegExp(R+"|>"),j=new RegExp(U),H=new RegExp("^"+P+"$"),G={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),Q=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){ue()},Z=fe((function(e){return!0===e.disabled&&A(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{v.apply(a=s.call(L.childNodes),L.childNodes),a[L.childNodes.length].nodeType}catch(_e){v={apply:function(e,t){O.apply(e,s.call(t))},call:function(e){O.apply(e,s.call(arguments,1))}}}function $(e,t,n,r){var i,a,o,s,c,l,d,p=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!==typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(ue(t),t=t||u,h)){if(11!==y&&(c=X.exec(e)))if(i=c[1]){if(9===y){if(!(o=t.getElementById(i)))return n;if(o.id===i)return v.call(n,o),n}else if(p&&(o=p.getElementById(i))&&$.contains(t,o)&&o.id===i)return v.call(n,o),n}else{if(c[2])return v.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&t.getElementsByClassName)return v.apply(n,t.getElementsByClassName(i)),n}if(!k[e+" "]&&(!f||!f.test(e))){if(d=e,p=t,1===y&&(z.test(e)||V.test(e))){for((p=K.test(e)&&se(t.parentNode)||t)==t&&m.scope||((s=t.getAttribute("id"))?s=E.escapeSelector(s):t.setAttribute("id",s=g)),a=(l=le(e)).length;a--;)l[a]=(s?"#"+s:":scope")+" "+he(l[a]);d=l.join(",")}try{return v.apply(n,p.querySelectorAll(d)),n}catch(_){k(e,!0)}finally{s===g&&t.removeAttribute("id")}}}return ye(e.replace(N,"$1"),t,n,r)}function ee(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function te(e){return e[g]=!0,e}function ne(e){var t=u.createElement("fieldset");try{return!!e(t)}catch(_e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return A(t,"input")&&t.type===e}}function ie(e){return function(t){return(A(t,"input")||A(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Z(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te((function(t){return t=+t,te((function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function se(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function ue(e){var n,r=e?e.ownerDocument||e:L;return r!=u&&9===r.nodeType&&r.documentElement?(c=(u=r).documentElement,h=!E.isXMLDoc(u),p=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&L!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",J),m.getById=ne((function(e){return c.appendChild(e).id=E.expando,!u.getElementsByName||!u.getElementsByName(E.expando).length})),m.disconnectedMatch=ne((function(e){return p.call(e,"*")})),m.scope=ne((function(){return u.querySelectorAll(":scope")})),m.cssHas=ne((function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(_e){return!0}})),m.getById?(t.filter.ID=function(e){var t=e.replace(Y,Q);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,Q);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&h){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&h)return t.getElementsByClassName(e)},f=[],ne((function(e){var t;c.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||f.push("\\["+R+"*(?:value|"+T+")"),e.querySelectorAll("[id~="+g+"-]").length||f.push("~="),e.querySelectorAll("a#"+g+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll(":checked").length||f.push(":checked"),(t=u.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(t=u.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")")})),m.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),S=function(e,t){if(e===t)return o=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!m.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument==L&&$.contains(L,e)?-1:t===u||t.ownerDocument==L&&$.contains(L,t)?1:i?l.call(i,e)-l.call(i,t):0:4&n?-1:1)},u):u}for(e in $.matches=function(e,t){return $(e,null,null,t)},$.matchesSelector=function(e,t){if(ue(e),h&&!k[t+" "]&&(!f||!f.test(t)))try{var n=p.call(e,t);if(n||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(_e){k(t,!0)}return $(t,u,null,[e]).length>0},$.contains=function(e,t){return(e.ownerDocument||e)!=u&&ue(e),E.contains(e,t)},$.attr=function(e,n){(e.ownerDocument||e)!=u&&ue(e);var r=t.attrHandle[n.toLowerCase()],i=r&&d.call(t.attrHandle,n.toLowerCase())?r(e,n,!h):void 0;return void 0!==i?i:e.getAttribute(n)},$.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},E.uniqueSort=function(e){var t,n=[],r=0,a=0;if(o=!m.sortStable,i=!m.sortStable&&s.call(e,0),C.call(e,S),o){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)I.call(e,n[r],1)}return i=null,e},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(s.apply(this)))},t=E.expr={cacheLength:50,createPseudo:te,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,Q),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,Q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||$.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&$.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=le(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,Q).toLowerCase();return"*"===e?function(){return!0}:function(e){return A(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&b(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=$.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,h,f,d,p=a!==o?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),_=!u&&!s,b=!1;if(v){if(a){for(;p;){for(h=t;h=h[p];)if(s?A(h,m):1===h.nodeType)return!1;d=p="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?v.firstChild:v.lastChild],o&&_){for(b=(f=(c=(l=v[g]||(v[g]={}))[e]||[])[0]===y&&c[1])&&c[2],h=f&&v.childNodes[f];h=++f&&h&&h[p]||(b=f=0)||d.pop();)if(1===h.nodeType&&++b&&h===t){l[e]=[y,f,b];break}}else if(_&&(b=f=(c=(l=t[g]||(t[g]={}))[e]||[])[0]===y&&c[1]),!1===b)for(;(h=++f&&h&&h[p]||(b=f=0)||d.pop())&&(!(s?A(h,m):1===h.nodeType)||!++b||(_&&((l=h[g]||(h[g]={}))[e]=[y,b]),h!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||$.error("unsupported pseudo: "+e);return i[g]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,a=i(e,n),o=a.length;o--;)e[r=l.call(e,a[o])]=!(t[r]=a[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:te((function(e){var t=[],n=[],r=ge(e.replace(N,"$1"));return r[g]?te((function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return $(e,t).length>0}})),contains:te((function(e){return e=e.replace(Y,Q),function(t){return(t.textContent||E.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||$.error("unsupported lang: "+e),e=e.replace(Y,Q).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===function(){try{return u.activeElement}catch(e){}}()&&u.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return A(e,"input")&&!!e.checked||A(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return W.test(e.nodeName)},button:function(e){return A(e,"input")&&"button"===e.type||A(e,"button")},text:function(e){var t;return A(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe((function(){return[0]})),last:oe((function(e,t){return[t-1]})),eq:oe((function(e,t,n){return[n<0?n+t:n]})),even:oe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:oe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:oe((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:oe((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function ce(){}function le(e,n){var r,i,a,o,s,u,c,l=x[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=t.preFilter;s;){for(o in r&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(a=[])),r=!1,(i=V.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(N," ")}),s=s.slice(r.length)),t.filter)!(i=G[o].exec(s))||c[o]&&!(i=c[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?$.error(e):x(e,u).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function fe(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,u){var c,l,h=[y,s];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=t[g]||(t[g]={}),i&&A(t,i))t=t[r]||t;else{if((c=l[a])&&c[0]===y&&c[1]===s)return h[2]=c[2];if(l[a]=h,h[2]=e(t,n,u))return!0}return!1}}function de(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var a,o=[],s=0,u=e.length,c=null!=t;s<u;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),c&&t.push(s)));return o}function ve(e,t,n,r,i,a){return r&&!r[g]&&(r=ve(r)),i&&!i[g]&&(i=ve(i,a)),te((function(a,o,s,u){var c,h,f,d,p=[],m=[],g=o.length,y=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)$(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),_=!e||!a&&t?y:pe(y,p,e,s,u);if(n?n(_,d=i||(a?e:g||r)?[]:o,s,u):d=_,r)for(c=pe(d,m),r(c,[],s,u),h=c.length;h--;)(f=c[h])&&(d[m[h]]=!(_[m[h]]=f));if(a){if(i||e){if(i){for(c=[],h=d.length;h--;)(f=d[h])&&c.push(_[h]=f);i(null,d=[],c,u)}for(h=d.length;h--;)(f=d[h])&&(c=i?l.call(a,f):p[h])>-1&&(a[c]=!(o[c]=f))}}else d=pe(d===o?d.splice(g,d.length):d),i?i(null,o,d,u):v.apply(o,d)}))}function me(e){for(var r,i,a,o=e.length,s=t.relative[e[0].type],u=s||t.relative[" "],c=s?1:0,h=fe((function(e){return e===r}),u,!0),f=fe((function(e){return l.call(r,e)>-1}),u,!0),d=[function(e,t,i){var a=!s&&(i||t!=n)||((r=t).nodeType?h(e,t,i):f(e,t,i));return r=null,a}];c<o;c++)if(i=t.relative[e[c].type])d=[fe(de(d),i)];else{if((i=t.filter[e[c].type].apply(null,e[c].matches))[g]){for(a=++c;a<o&&!t.relative[e[a].type];a++);return ve(c>1&&de(d),c>1&&he(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(N,"$1"),i,c<a&&me(e.slice(c,a)),a<o&&me(e=e.slice(a)),a<o&&he(e))}d.push(i)}return de(d)}function ge(e,r){var i,a=[],o=[],s=w[e+" "];if(!s){for(r||(r=le(e)),i=r.length;i--;)(s=me(r[i]))[g]?a.push(s):o.push(s);s=w(e,function(e,r){var i=r.length>0,a=e.length>0,o=function(o,s,c,l,f){var d,p,m,g=0,_="0",b=o&&[],x=[],w=n,k=o||a&&t.find.TAG("*",f),S=y+=null==w?1:Math.random()||.1,T=k.length;for(f&&(n=s==u||s||f);_!==T&&null!=(d=k[_]);_++){if(a&&d){for(p=0,s||d.ownerDocument==u||(ue(d),c=!h);m=e[p++];)if(m(d,s||u,c)){v.call(l,d);break}f&&(y=S)}i&&((d=!m&&d)&&g--,o&&b.push(d))}if(g+=_,i&&_!==g){for(p=0;m=r[p++];)m(b,x,s,c);if(o){if(g>0)for(;_--;)b[_]||x[_]||(x[_]=M.call(l));x=pe(x)}v.apply(l,x),f&&!o&&x.length>0&&g+r.length>1&&E.uniqueSort(l)}return f&&(y=S,n=w),b};return i?te(o):o}(o,a)),s.selector=e}return s}function ye(e,n,r,i){var a,o,s,u,c,l="function"===typeof e&&e,f=!i&&le(e=l.selector||e);if(r=r||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===n.nodeType&&h&&t.relative[o[1].type]){if(!(n=(t.find.ID(s.matches[0].replace(Y,Q),n)||[])[0]))return r;l&&(n=n.parentNode),e=e.slice(o.shift().value.length)}for(a=G.needsContext.test(e)?0:o.length;a--&&(s=o[a],!t.relative[u=s.type]);)if((c=t.find[u])&&(i=c(s.matches[0].replace(Y,Q),K.test(o[0].type)&&se(n.parentNode)||n))){if(o.splice(a,1),!(e=i.length&&he(o)))return v.apply(r,i),r;break}}return(l||ge(e,f))(i,n,!h,r,!n||K.test(e)&&se(n.parentNode)||n),r}ce.prototype=t.filters=t.pseudos,t.setFilters=new ce,m.sortStable=g.split("").sort(S).join("")===g,ue(),m.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(u.createElement("fieldset"))})),E.find=$,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,$.compile=ge,$.select=ye,$.setDocument=ue,$.tokenize=le,$.escape=E.escapeSelector,$.getText=E.text,$.isXML=E.isXMLDoc,$.selectors=E.expr,$.support=E.support,$.uniqueSort=E.uniqueSort}();var U=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},B=E.expr.match.needsContext,V=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(e,t,n){return g(t)?E.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?E.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?E.grep(e,(function(e){return l.call(t,e)>-1!==n})):E.filter(t,e,n)}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<r;t++)if(E.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)E.find(e,i[t],n);return r>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(z(this,e||[],!1))},not:function(e){return this.pushStack(z(this,e||[],!0))},is:function(e){return!!z(this,"string"===typeof e&&B.test(e)?E(e):e||[],!1).length}});var j,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),V.test(r[1])&&E.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=_.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,j=E(_);var G=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function q(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!==typeof e&&E(e);if(!B.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(e){return e?"string"===typeof e?l.call(E(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return U(e,"parentNode")},parentsUntil:function(e,t,n){return U(e,"parentNode",n)},next:function(e){return q(e,"nextSibling")},prev:function(e){return q(e,"previousSibling")},nextAll:function(e){return U(e,"nextSibling")},prevAll:function(e){return U(e,"previousSibling")},nextUntil:function(e,t,n){return U(e,"nextSibling",n)},prevUntil:function(e,t,n){return U(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(n,r){var i=E.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=E.filter(r,i)),this.length>1&&(W[e]||E.uniqueSort(i),G.test(e)&&i.reverse()),this.pushStack(i)}}));var X=/[^\x20\t\r\n\f]+/g;function K(e){return e}function Y(e){throw e}function Q(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return E.each(e.match(X)||[],(function(e,n){t[n]=!0})),t}(e):E.extend({},e);var t,n,r,i,a=[],o=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){E.each(n,(function(n,r){g(r)?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==w(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return E.each(arguments,(function(e,t){for(var n;(n=E.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(e){return e?E.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(n){E.each(t,(function(t,r){var i=g(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var a=0;function o(e,t,n,i){return function(){var s=this,u=arguments,c=function(){var r,c;if(!(e<a)){if((r=n.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"===typeof r||"function"===typeof r)&&r.then,g(c)?i?c.call(r,o(a,t,K,i),o(a,t,Y,i)):(a++,c.call(r,o(a,t,K,i),o(a,t,Y,i),o(a,t,K,t.notifyWith))):(n!==K&&(s=void 0,u=[r]),(i||t.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,l.error),e+1>=a&&(n!==Y&&(s=void 0,u=[r]),t.rejectWith(s,u))}};e?l():(E.Deferred.getErrorHook?l.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(l.error=E.Deferred.getStackHook()),r.setTimeout(l))}}return E.Deferred((function(r){t[0][3].add(o(0,r,g(i)?i:K,r.notifyWith)),t[1][3].add(o(0,r,g(e)?e:K)),t[2][3].add(o(0,r,g(n)?n:Y))})).promise()},promise:function(e){return null!=e?E.extend(e,i):i}},a={};return E.each(t,(function(e,r){var o=r[2],s=r[5];i[r[1]]=o.add,s&&o.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),a[r[0]]=function(){return a[r[0]+"With"](this===a?void 0:this,arguments),this},a[r[0]+"With"]=o.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),a=E.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(Q(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)Q(i[n],o(n),a.reject);return a.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&J.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){r.setTimeout((function(){throw e}))};var Z=E.Deferred();function $(){_.removeEventListener("DOMContentLoaded",$),r.removeEventListener("load",$),E.ready()}E.fn.ready=function(e){return Z.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||Z.resolveWith(_,[E]))}}),E.ready.then=Z.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?r.setTimeout(E.ready):(_.addEventListener("DOMContentLoaded",$),r.addEventListener("load",$));var ee=function e(t,n,r,i,a,o,s){var u=0,c=t.length,l=null==r;if("object"===w(r))for(u in a=!0,r)e(t,n,u,r[u],!0,o,s);else if(void 0!==i&&(a=!0,g(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(E(e),n)})),n))for(;u<c;u++)n(t[u],r,s?i:i.call(t[u],u,n(t[u],r)));return a?t:l?n.call(t):c?n(t[0],r):o},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(ne,re)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=E.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[ie(t)]=n;else for(r in t)i[ie(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in r?[t]:t.match(X)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||E.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var se=new oe,ue=new oe,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,le=/[A-Z]/g;function he(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(le,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ce.test(e)?JSON.parse(e):e)}(n)}catch(i){}ue.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return ue.hasData(e)||se.hasData(e)},data:function(e,t,n){return ue.access(e,t,n)},removeData:function(e,t){ue.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=ue.get(a),1===a.nodeType&&!se.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=ie(r.slice(5)),he(a,r,i[r]));se.set(a,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){ue.set(this,e)})):ee(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=ue.get(a,e))||void 0!==(n=he(a,e))?n:void 0;this.each((function(){ue.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ue.remove(this,e)}))}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),n&&(!r||Array.isArray(n)?r=se.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),a=E._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,(function(){E.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:E.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",n])}))})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each((function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=E.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=se.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=new RegExp("^(?:([+-])=|)("+fe+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],ve=_.documentElement,me=function(e){return E.contains(e.ownerDocument,e)},ge={composed:!0};ve.getRootNode&&(me=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===E.css(e,"display")};function _e(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return E.css(e,t,"")},u=s(),c=n&&n[3]||(E.cssNumber[t]?"":"px"),l=e.nodeType&&(E.cssNumber[t]||"px"!==c&&+u)&&de.exec(E.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;o--;)E.style(e,t,l+c),(1-a)*(1-(a=s()/u||.5))<=0&&(o=0),l/=a;l*=2,E.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var be={};function xe(e){var t,n=e.ownerDocument,r=e.nodeName,i=be[r];return i||(t=n.body.appendChild(n.createElement(r)),i=E.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),be[r]=i,i)}function we(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=se.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&ye(r)&&(i[a]=xe(r))):"none"!==n&&(i[a]="none",se.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}E.fn.extend({show:function(){return we(this,!0)},hide:function(){return we(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ye(this)?E(this).show():E(this).hide()}))}});var ke=/^(?:checkbox|radio)$/i,Se=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=_.createDocumentFragment().appendChild(_.createElement("div")),t=_.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),m.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",m.option=!!e.lastChild}();var Te={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ae(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?E.merge([e],n):n}function Me(e,t){for(var n=0,r=e.length;n<r;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}Te.tbody=Te.tfoot=Te.colgroup=Te.caption=Te.thead,Te.th=Te.td,m.option||(Te.optgroup=Te.option=[1,"<select multiple='multiple'>","</select>"]);var Ce=/<|&#?\w+;/;function Ie(e,t,n,r,i){for(var a,o,s,u,c,l,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if((a=e[d])||0===a)if("object"===w(a))E.merge(f,a.nodeType?[a]:a);else if(Ce.test(a)){for(o=o||h.appendChild(t.createElement("div")),s=(Se.exec(a)||["",""])[1].toLowerCase(),u=Te[s]||Te._default,o.innerHTML=u[1]+E.htmlPrefilter(a)+u[2],l=u[0];l--;)o=o.lastChild;E.merge(f,o.childNodes),(o=h.firstChild).textContent=""}else f.push(t.createTextNode(a));for(h.textContent="",d=0;a=f[d++];)if(r&&E.inArray(a,r)>-1)i&&i.push(a);else if(c=me(a),o=Ae(h.appendChild(a),"script"),c&&Me(o),n)for(l=0;a=o[l++];)Ee.test(a.type||"")&&n.push(a);return h}var Re=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function Pe(){return!1}function De(e,t,n,r,i,a){var o,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)De(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Pe;else if(!i)return e;return 1===a&&(o=i,i=function(e){return E().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=E.guid++)),e.each((function(){E.event.add(this,t,i,r,n)}))}function Le(e,t,n){n?(se.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var n,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),se.set(this,t,r),this[t](),n=se.get(this,t),se.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(se.set(this,t,E.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===se.get(e,t)&&E.event.add(e,t,Ne)}E.event={global:{},add:function(e,t,n,r,i){var a,o,s,u,c,l,h,f,d,p,v,m=se.get(e);if(ae(e))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&E.find.matchesSelector(ve,i),n.guid||(n.guid=E.guid++),(u=m.events)||(u=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return"undefined"!==typeof E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(X)||[""]).length;c--;)d=v=(s=Re.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(h=E.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=E.event.special[d]||{},l=E.extend({type:d,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:p.join(".")},a),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(d,o)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),E.event.global[d]=!0)},remove:function(e,t,n,r,i){var a,o,s,u,c,l,h,f,d,p,v,m=se.hasData(e)&&se.get(e);if(m&&(u=m.events)){for(c=(t=(t||"").match(X)||[""]).length;c--;)if(d=v=(s=Re.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=E.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)l=f[a],!i&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(a,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));o&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||E.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)E.event.remove(e,d+t[c],n,r,!0);E.isEmptyObject(u)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=new Array(arguments.length),u=E.event.fix(e),c=(se.get(this,"events")||Object.create(null))[u.type]||[],l=E.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(o=E.event.handlers.call(this,u,c),t=0;(i=o[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==a.namespace&&!u.rnamespace.test(a.namespace)||(u.handleObj=a,u.data=a.data,void 0!==(r=((E.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,a,o,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],o={},n=0;n<u;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?E(i,this).index(c)>-1:E.find(i,this,null,[c]).length),o[i]&&a.push(r);a.length&&s.push({elem:c,handlers:a})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ke.test(t.type)&&t.click&&A(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return ke.test(t.type)&&t.click&&A(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return ke.test(t.type)&&t.click&&A(t,"input")&&se.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:Pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(_.documentMode){var n=se.get(this,"handle"),r=E.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else E.event.simulate(t,e.target,E.event.fix(e))}E.event.special[e]={setup:function(){var r;if(Le(this,e,!0),!_.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(r||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!_.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},E.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,a=se.get(i,t);a||(_.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),se.set(i,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,a=se.get(i,t)-1;a?se.set(i,t,a):(_.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),se.remove(i,t))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||E.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),E.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Pe),this.each((function(){E.event.remove(this,e,n,t)}))}});var Oe=/<script|<style|<link/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Be(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Ve(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ze(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,r,i,a,o,s;if(1===t.nodeType){if(se.hasData(e)&&(s=se.get(e).events))for(i in se.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)E.event.add(t,i,s[i][n]);ue.hasData(e)&&(a=ue.access(e),o=E.extend({},a),ue.set(t,o))}}function He(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ke.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ge(e,t,n,r){t=u(t);var i,a,o,s,c,l,h=0,f=e.length,d=f-1,p=t[0],v=g(p);if(v||f>1&&"string"===typeof p&&!m.checkClone&&Ue.test(p))return e.each((function(i){var a=e.eq(i);v&&(t[0]=p.call(this,i,a.html())),Ge(a,t,n,r)}));if(f&&(a=(i=Ie(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=E.map(Ae(i,"script"),Ve)).length;h<f;h++)c=i,h!==d&&(c=E.clone(c,!0,!0),s&&E.merge(o,Ae(c,"script"))),n.call(e[h],c,h);if(s)for(l=o[o.length-1].ownerDocument,E.map(o,ze),h=0;h<s;h++)c=o[h],Ee.test(c.type||"")&&!se.access(c,"globalEval")&&E.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):x(c.textContent.replace(Fe,""),c,l))}return e}function We(e,t,n){for(var r,i=t?E.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||E.cleanData(Ae(r)),r.parentNode&&(n&&me(r)&&Me(Ae(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(!0),u=me(e);if(!m.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!E.isXMLDoc(e))for(o=Ae(s),r=0,i=(a=Ae(e)).length;r<i;r++)He(a[r],o[r]);if(t)if(n)for(a=a||Ae(e),o=o||Ae(s),r=0,i=a.length;r<i;r++)je(a[r],o[r]);else je(e,s);return(o=Ae(s,"script")).length>0&&Me(o,!u&&Ae(e,"script")),s},cleanData:function(e){for(var t,n,r,i=E.event.special,a=0;void 0!==(n=e[a]);a++)if(ae(n)){if(t=n[se.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[se.expando]=void 0}n[ue.expando]&&(n[ue.expando]=void 0)}}}),E.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(Ae(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Oe.test(e)&&!Te[(Se.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(Ae(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(Ae(this)),n&&n.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var n,r=[],i=E(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),E(i[o])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var qe=new RegExp("^("+fe+")(?!px)[a-z%]+$","i"),Xe=/^--/,Ke=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ye=function(e,t,n){var r,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=a[i];return r},Qe=new RegExp(pe.join("|"),"i");function Je(e,t,n){var r,i,a,o,s=Xe.test(t),u=e.style;return(n=n||Ke(e))&&(o=n.getPropertyValue(t)||n[t],s&&o&&(o=o.replace(N,"$1")||void 0),""!==o||me(e)||(o=E.style(e,t)),!m.pixelBoxStyles()&&qe.test(o)&&Qe.test(t)&&(r=u.width,i=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=a)),void 0!==o?o+"":o}function Ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ve.appendChild(c).appendChild(l);var e=r.getComputedStyle(l);n="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),i=36===t(e.width),l.style.position="absolute",a=12===t(l.offsetWidth/3),ve.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var n,i,a,o,s,u,c=_.createElement("div"),l=_.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,n,i;return null==s&&(e=_.createElement("table"),t=_.createElement("tr"),n=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ve.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,ve.removeChild(e)),s}}))}();var $e=["Webkit","Moz","ms"],et=_.createElement("div").style,tt={};function nt(e){var t=E.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in et)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,it={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ot(e,t,n){var r=de.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function st(e,t,n,r,i,a){var o="width"===t?1:0,s=0,u=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=E.css(e,n+pe[o],!0,i)),r?("content"===n&&(u-=E.css(e,"padding"+pe[o],!0,i)),"margin"!==n&&(u-=E.css(e,"border"+pe[o]+"Width",!0,i))):(u+=E.css(e,"padding"+pe[o],!0,i),"padding"!==n?u+=E.css(e,"border"+pe[o]+"Width",!0,i):s+=E.css(e,"border"+pe[o]+"Width",!0,i));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))||0),u+c}function ut(e,t,n){var r=Ke(e),i=(!m.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,r),a=i,o=Je(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&A(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===E.css(e,"boxSizing",!1,r),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+st(e,t,n||(i?"border":"content"),a,r,o)+"px"}function ct(e,t,n,r,i){return new ct.prototype.init(e,t,n,r,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Je(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=ie(t),u=Xe.test(t),c=e.style;if(u||(t=nt(s)),o=E.cssHooks[t]||E.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:c[t];"string"===(a=typeof n)&&(i=de.exec(n))&&i[1]&&(n=_e(e,t,i),a="number"),null!=n&&n===n&&("number"!==a||u||(n+=i&&i[3]||(E.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,a,o,s=ie(t);return Xe.test(t)||(t=nt(s)),(o=E.cssHooks[t]||E.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Je(e,t,r)),"normal"===i&&t in at&&(i=at[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return!rt.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Ye(e,it,(function(){return ut(e,t,r)}))},set:function(e,n,r){var i,a=Ke(e),o=!m.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===E.css(e,"boxSizing",!1,a),u=r?st(e,t,r,s,a):0;return s&&o&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-st(e,t,"border",!1,a)-.5)),u&&(i=de.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),ot(0,n,u)}}})),E.cssHooks.marginLeft=Ze(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Je(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+pe[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(E.cssHooks[e+t].set=ot)})),E.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=Ke(e),i=t.length;o<i;o++)a[t[o]]=E.css(e,t[o],!1,r);return a}return void 0!==n?E.style(e,t,n):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=ct,ct.prototype={constructor:ct,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var e=ct.propHooks[this.prop];return e&&e.get?e.get(this):ct.propHooks._default.get(this)},run:function(e){var t,n=ct.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ct.propHooks._default.set(this),this}},ct.prototype.init.prototype=ct.prototype,ct.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},ct.propHooks.scrollTop=ct.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=ct.prototype.init,E.fx.step={};var lt,ht,ft=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function pt(){ht&&(!1===_.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(pt):r.setTimeout(pt,E.fx.interval),E.fx.tick())}function vt(){return r.setTimeout((function(){lt=void 0})),lt=Date.now()}function mt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=pe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function gt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function yt(e,t,n){var r,i,a=0,o=yt.prefilters.length,s=E.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var t=lt||vt(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),a=0,o=c.tweens.length;a<o;a++)c.tweens[a].run(r);return s.notifyWith(e,[c,r,n]),r<1&&o?n:(o||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:lt||vt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=ie(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=E.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(l,c.opts.specialEasing);a<o;a++)if(r=yt.prefilters[a].call(c,e,l,c.opts))return g(r.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return E.map(l,gt,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return _e(n.elem,e,de.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(X);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,u,c,l,h="width"in t||"height"in t,f=this,d={},p=e.style,v=e.nodeType&&ye(e),m=se.get(e,"fxshow");for(r in n.queue||(null==(o=E._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always((function(){f.always((function(){o.unqueued--,E.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],ft.test(i)){if(delete t[r],a=a||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;v=!0}d[r]=m&&m[r]||E.style(e,r)}if((u=!E.isEmptyObject(t))||!E.isEmptyObject(d))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=se.get(e,"display")),"none"===(l=E.css(e,"display"))&&(c?l=c:(we([e],!0),c=e.style.display||c,l=E.css(e,"display"),we([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===E.css(e,"float")&&(u||(f.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(m?"hidden"in m&&(v=m.hidden):m=se.access(e,"fxshow",{display:c}),a&&(m.hidden=!v),v&&we([e],!0),f.done((function(){for(r in v||we([e]),se.remove(e,"fxshow"),d)E.style(e,r,d[r])}))),u=gt(v?m[r]:0,r,f),r in m||(m[r]=u.start,v&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"===typeof e?E.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return E.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=E.isEmptyObject(e),a=E.speed(t,n,r),o=function(){var t=yt(this,E.extend({},e),a);(i||se.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",a=E.timers,o=se.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&dt.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=se.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=E.timers,o=r?r.length:0;for(n.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(mt(t,!0),e,r,i)}})),E.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(lt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),lt=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){ht||(ht=!0,pt())},E.fx.stop=function(){ht=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=_.createElement("input"),t=_.createElement("select").appendChild(_.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=_.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var _t,bt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return ee(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"===typeof e.getAttribute?E.prop(e,t,n):(1===a&&E.isXMLDoc(e)||(i=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?_t:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(X);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),_t={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||E.find.attr;bt[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=bt[o],bt[o]=i,i=null!=n(e,t,r)?o:null,bt[o]=a),i}}));var xt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function kt(e){return(e.match(X)||[]).join(" ")}function St(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(X)||[]}E.fn.extend({prop:function(e,t){return ee(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,n,r,i,a,o;return g(e)?this.each((function(t){E(this).addClass(e.call(this,t,St(this)))})):(t=Et(e)).length?this.each((function(){if(r=St(this),n=1===this.nodeType&&" "+kt(r)+" "){for(a=0;a<t.length;a++)i=t[a],n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=kt(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,r,i,a,o;return g(e)?this.each((function(t){E(this).removeClass(e.call(this,t,St(this)))})):arguments.length?(t=Et(e)).length?this.each((function(){if(r=St(this),n=1===this.nodeType&&" "+kt(r)+" "){for(a=0;a<t.length;a++)for(i=t[a];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=kt(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,a,o=typeof e,s="string"===o||Array.isArray(e);return g(e)?this.each((function(n){E(this).toggleClass(e.call(this,n,St(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Et(e),this.each((function(){if(s)for(a=E(this),i=0;i<n.length;i++)r=n[i],a.hasClass(r)?a.removeClass(r):a.addClass(r);else void 0!==e&&"boolean"!==o||((r=St(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+kt(St(n))+" ").indexOf(t)>-1)return!0;return!1}});var Tt=/\r/g;E.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,E(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(Tt,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:kt(E.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],u=o?a+1:i.length;for(r=a<0?u:o?a:0;r<u;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=E(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=E.makeArray(t),o=i.length;o--;)((r=i[o]).selected=E.inArray(E.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},m.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var At=r.location,Mt={guid:Date.now()},Ct=/\?/;E.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var It=/^(?:focusinfocus|focusoutblur)$/,Rt=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,n,i){var a,o,s,u,c,l,h,f,p=[n||_],v=d.call(e,"type")?e.type:e,m=d.call(e,"namespace")?e.namespace.split("."):[];if(o=f=s=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!It.test(v+E.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,(e=e[E.expando]?e:new E.Event(v,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),h=E.event.special[v]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!y(n)){for(u=h.delegateType||v,It.test(u+v)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(n.ownerDocument||_)&&p.push(s.defaultView||s.parentWindow||r)}for(a=0;(o=p[a++])&&!e.isPropagationStopped();)f=o,e.type=a>1?u:h.bindType||v,(l=(se.get(o,"events")||Object.create(null))[e.type]&&se.get(o,"handle"))&&l.apply(o,t),(l=c&&o[c])&&l.apply&&ae(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!ae(n)||c&&g(n[v])&&!y(n)&&((s=n[c])&&(n[c]=null),E.event.triggered=v,e.isPropagationStopped()&&f.addEventListener(v,Rt),n[v](),e.isPropagationStopped()&&f.removeEventListener(v,Rt),E.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}});var Nt=/\[\]$/,Pt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,n,r){var i;if(Array.isArray(t))E.each(t,(function(t,i){n||Nt.test(e)?r(e,i):Ot(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==w(t))r(e,t);else for(i in t)Ot(e+"["+i+"]",t[i],n,r)}E.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){i(this.name,this.value)}));else for(n in e)Ot(n,e[n],t,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Lt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!ke.test(e))})).map((function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}})):{name:t.name,value:n.replace(Pt,"\r\n")}})).get()}});var Ut=/%20/g,Ft=/#.*$/,Bt=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ht={},Gt={},Wt="*/".concat("*"),qt=_.createElement("a");function Xt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(X)||[];if(g(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Kt(e,t,n,r){var i={},a=e===Gt;function o(s){var u;return i[s]=!0,E.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!==typeof c||a||i[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),u}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Yt(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}qt.href=At.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,E.ajaxSettings),t):Yt(E.ajaxSettings,e)},ajaxPrefilter:Xt(Ht),ajaxTransport:Xt(Gt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,i,a,o,s,u,c,l,h,f,d=E.ajaxSetup({},t),p=d.context||d,v=d.context&&(p.nodeType||p.jquery)?E(p):E.event,m=E.Deferred(),g=E.Callbacks("once memory"),y=d.statusCode||{},b={},x={},w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=Vt.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),S(0,t),this}};if(m.promise(k),d.url=((e||d.url||At.href)+"").replace(jt,At.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(X)||[""],null==d.crossDomain){u=_.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=qt.protocol+"//"+qt.host!==u.protocol+"//"+u.host}catch(T){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!==typeof d.data&&(d.data=E.param(d.data,d.traditional)),Kt(Ht,d,t,k),c)return k;for(h in(l=E.event&&d.global)&&0===E.active++&&E.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!zt.test(d.type),i=d.url.replace(Ft,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ut,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"===typeof d.data)&&(i+=(Ct.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Bt,"$1"),f=(Ct.test(i)?"&":"?")+"_="+Mt.guid+++f),d.url=i+f),d.ifModified&&(E.lastModified[i]&&k.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&k.setRequestHeader("If-None-Match",E.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,k,d)||c))return k.abort();if(w="abort",g.add(d.complete),k.done(d.success),k.fail(d.error),n=Kt(Gt,d,t,k)){if(k.readyState=1,l&&v.trigger("ajaxSend",[k,d]),c)return k;d.async&&d.timeout>0&&(s=r.setTimeout((function(){k.abort("timeout")}),d.timeout));try{c=!1,n.send(b,S)}catch(T){if(c)throw T;S(-1,T)}}else S(-1,"No Transport");function S(e,t,o,u){var h,f,_,b,x,w=t;c||(c=!0,s&&r.clearTimeout(s),n=void 0,a=u||"",k.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(b=function(e,t,n){for(var r,i,a,o,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)a=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==u[0]&&u.unshift(a),n[a]}(d,k,o)),!h&&E.inArray("script",d.dataTypes)>-1&&E.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),b=function(e,t,n,r){var i,a,o,s,u,c={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=l.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=l.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(o=c[u+" "+a]||c["* "+a]))for(i in c)if((s=i.split(" "))[1]===a&&(o=c[u+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[i]:!0!==c[i]&&(a=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(T){return{state:"parsererror",error:o?T:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}(d,b,k,h),h?(d.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=x),(x=k.getResponseHeader("etag"))&&(E.etag[i]=x)),204===e||"HEAD"===d.type?w="nocontent":304===e?w="notmodified":(w=b.state,f=b.data,h=!(_=b.error))):(_=w,!e&&w||(w="error",e<0&&(e=0))),k.status=e,k.statusText=(t||w)+"",h?m.resolveWith(p,[f,w,k]):m.rejectWith(p,[k,w,_]),k.statusCode(y),y=void 0,l&&v.trigger(h?"ajaxSuccess":"ajaxError",[k,d,h?f:_]),g.fireWith(p,[k,w]),l&&(v.trigger("ajaxComplete",[k,d]),--E.active||E.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:i,data:n,success:r},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){E(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},Jt=E.ajaxSettings.xhr();m.cors=!!Jt&&"withCredentials"in Jt,m.ajax=Jt=!!Jt,E.ajaxTransport((function(e){var t,n;if(m.cors||Jt&&!e.crossDomain)return{send:function(i,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Zt=[],$t=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||E.expando+"_"+Mt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,n){var i,a,o,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+i):!1!==e.jsonp&&(e.url+=(Ct.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||E.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===a?E(r).removeProp(i):r[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(i)),o&&g(a)&&a(o[0]),o=a=void 0})),"script"})),m.createHTMLDocument=function(){var e=_.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(r)):t=_),a=!n&&[],(i=V.exec(e))?[t.createElement(i[1])]:(i=Ie([e],t,a),a&&a.length&&E(a).remove(),E.merge([],i.childNodes)));var r,i,a},E.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return s>-1&&(r=kt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),o.length>0&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){a=arguments,o.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,n){var r,i,a,o,s,u,c=E.css(e,"position"),l=E(e),h={};"static"===c&&(e.style.position="relative"),s=l.offset(),a=E.css(e,"top"),u=E.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1?(o=(r=l.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(h.top=t.top-s.top+o),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):l.css(h)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),i.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-E.css(r,"marginTop",!0),left:t.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||ve}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;E.fn[e]=function(r){return ee(this,(function(e,r,i){var a;if(y(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i}),e,r,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=Ze(m.pixelPosition,(function(e,n){if(n)return n=Je(e,t),qe.test(n)?E(e).position()[t]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){E.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===a?"margin":"border");return ee(this,(function(t,n,i){var a;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?E.css(t,n,s):E.style(t,n,i,s)}),t,o?i:void 0,o)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),i=function(){return e.apply(t||this,r.concat(s.call(arguments)))},i.guid=e.guid=e.guid||E.guid++,i},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=A,E.isFunction=g,E.isWindow=y,E.camelCase=ie,E.type=w,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},void 0===(n=function(){return E}.apply(t,[]))||(e.exports=n);var tn=r.jQuery,nn=r.$;return E.noConflict=function(e){return r.$===E&&(r.$=nn),e&&r.jQuery===E&&(r.jQuery=tn),E},"undefined"===typeof i&&(r.jQuery=r.$=E),E}))},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var O,U=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function V(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case E:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Ee(e){if(e=_i(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Te(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ae(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Me(e,t){return e(t)}function Ce(){}var Ie=!1;function Re(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Me(e,t,n)}finally{Ie=!1,(null!==ke||null!==Se)&&(Ce(),Ae())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Oe=!1,Ue=null,Fe=!1,Be=null,Ve={onError:function(e){Oe=!0,Ue=e}};function ze(e,t,n,r,i,a,o,s,u){Oe=!1,Ue=null,Le.apply(Ve,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(je(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,kt,St,Et,Tt=!1,At=[],Mt=null,Ct=null,It=null,Rt=new Map,Nt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Tt=!1,null!==Mt&&Ft(Mt)&&(Mt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),Rt.forEach(Bt),Nt.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function jt(e){function t(t){return zt(t,e)}if(0<At.length){zt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&zt(Mt,e),null!==Ct&&zt(Ct,e),null!==It&&zt(It,e),Rt.forEach(t),Nt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Pt.shift()}var Ht=b.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=_t,a=Ht.transition;Ht.transition=null;try{_t=1,Xt(e,t,n,r)}finally{_t=i,Ht.transition=a}}function qt(e,t,n,r){var i=_t,a=Ht.transition;Ht.transition=null;try{_t=4,Xt(e,t,n,r)}finally{_t=i,Ht.transition=a}}function Xt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Ot(Mt,e,t,n,r,i),!0;case"dragenter":return Ct=Ot(Ct,e,t,n,r,i),!0;case"mouseover":return It=Ot(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Ot(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Nt.set(a,Ot(Nt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&xt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=U({},cn,{view:0,detail:0}),fn=an(hn),dn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),mn=an(U({},hn,{relatedTarget:0})),gn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(yn),bn=an(U({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Tn=U({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Tn),Mn=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=an(Rn),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var On=l&&"TextEvent"in window&&!Ln,Un=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Bn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Kn(e){Fr(e,0)}function Yn(e){if(X(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Wn(t,Xn,e,xe(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Er("animationend"),Ar=Er("animationiteration"),Mr=Er("animationstart"),Cr=Er("transitionend"),Ir=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Ir.set(e,t),u(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Dr=Rr[Pr];Nr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Nr(Tr,"onAnimationEnd"),Nr(Ar,"onAnimationIteration"),Nr(Mr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var l=Ue;Oe=!1,Ue=null,Fe||(Fe=!0,Be=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,c),a=u}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=xe(n),o=[];e:{var s=Ir.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case Tr:case Ar:case Mr:u=gn;break;case Cr:u=In;break;case"scroll":u=fn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Mn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ne(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Mn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Xr(d))p++;for(d=0,v=f;v;v=Xr(v))d++;for(;0<p-d;)l=Xr(l),p--;for(;0<d-p;)f=Xr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Xr(l),f=Xr(f)}l=null}else l=null;null!==u&&Kr(o,s,u,l,!1),null!==c&&null!==h&&Kr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Qn;else if(Gn(s))if(Jn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else jn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Un&&"ko"!==n.locale&&(jn||"onCompositionStart"!==_?"onCompositionEnd"===_&&jn&&(y=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(g=qr(r,_)).length&&(_=new bn(_,e,null,n,i),o.push({event:_,listeners:g}),y?_.data=y:null!==(y=zn(n))&&(_.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),$t=Zt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ne(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ne(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ne(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Ne(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[di]||null}var wi=[],ki=-1;function Si(e){return{current:e}}function Ei(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function Ti(e,t){ki++,wi[ki]=e.current,e.current=t}var Ai={},Mi=Si(Ai),Ci=Si(!1),Ii=Ai;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ci),Ei(Mi)}function Di(e,t,n){if(Mi.current!==Ai)throw Error(a(168));Ti(Mi,t),Ti(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return U({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ii=Mi.current,Ti(Mi,e),Ti(Ci,Ci.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Mi),Ti(Mi,e)):Ei(Ci),Ti(Ci,n)}var Fi=null,Bi=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function ji(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Xe($e,ji),i}finally{_t=t,Vi=!1}}return null}var Hi=[],Gi=0,Wi=null,qi=0,Xi=[],Ki=0,Yi=null,Qi=1,Ji="";function Zi(e,t){Hi[Gi++]=qi,Hi[Gi++]=Wi,Wi=e,qi=t}function $i(e,t,n){Xi[Ki++]=Qi,Xi[Ki++]=Ji,Xi[Ki++]=Yi,Yi=e;var r=Qi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Qi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=Hi[--Gi],Hi[Gi]=null,qi=Hi[--Gi],Hi[Gi]=null;for(;e===Yi;)Yi=Xi[--Ki],Xi[Ki]=null,Ji=Xi[--Ki],Xi[Ki]=null,Qi=Xi[--Ki],Xi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Si(null),ya=null,_a=null,ba=null;function xa(){ba=_a=ya=null}function wa(e){var t=ga.current;Ei(ga),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,ba=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ya)throw Error(a(308));_a=e,ya.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ta=null;function Aa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ma(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Aa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ia=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Na(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Aa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Ia=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=U({},h,f);break e;case 2:Ia=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Uu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ba=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ha(e,t,n){var r=!1,i=Ai,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ni(t)?Ii:Mi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ai),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ba,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ni(t)?Ii:Mi.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ba&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===N&&Ka(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case N:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case N:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Xa(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,h=m}if(v===s.length)return n(i,h),ia&&Zi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Zi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var _=d(i,v,y.value,c);if(null===_){null===v&&(v=g);break}e&&v&&null===_.alternate&&t(i,v),s=o(_,s,m),null===h?l=_:h.sibling=_,h=_,v=g}if(y.done)return n(i,v),ia&&Zi(i,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,m),null===h?l=y:h.sibling=y,h=y);return ia&&Zi(i,m),l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===k){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===k?((a=Oc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=qa(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bc(o,r.mode,u)).return=r,r=a}return s(r);case N:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Xa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Qa=Ya(!0),Ja=Ya(!1),Za={},$a=Si(Za),eo=Si(Za),to=Si(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Ti($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,_o=!1,bo=0,xo=0;function wo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),_o){o=0;do{if(_o=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(_o)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Ao(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Mo(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=Ao(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Uu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Uu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=Ao(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function No(e,t){var n=vo,r=Ao(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Bo(9,Do.bind(null,n,r,i,t),void 0,null),null===Iu)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Oo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Oo(t)&&Uo(e)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Uo(e){var t=Ca(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Ao().memoizedState}function zo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=Ao();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Bo(t,n,a,r))}vo.flags|=e,i.memoizedState=Bo(1|t,n,a,r)}function Ho(e,t){return zo(8390656,8,e,t)}function Go(e,t){return jo(2048,8,e,t)}function Wo(e,t){return jo(4,2,e,t)}function qo(e,t){return jo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Xo.bind(null,t,e),n)}function Yo(){}function Qo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Uu|=n,e.baseState=!0),t)}function $o(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function es(){return Ao().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ma(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Aa(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ma(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){_o=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ea,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=$o.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Iu)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ho(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Iu.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Qo,useContext:Ea,useEffect:Go,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Jo,useReducer:Co,useRef:Vo,useState:function(){return Co(Mo)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(Ao(),mo.memoizedState,e)},useTransition:function(){return[Co(Mo)[0],Ao().memoizedState]},useMutableSource:Ro,useSyncExternalStore:No,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Qo,useContext:Ea,useEffect:Go,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Jo,useReducer:Io,useRef:Vo,useState:function(){return Io(Mo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Ao();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[Io(Mo)[0],Ao().memoizedState]},useMutableSource:Ro,useSyncExternalStore:No,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,qu=r),fs(0,t)},n}function vs(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=b.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Qa(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function ks(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return As(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Du,Pu),Pu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Du,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Du,Pu),Pu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Du,Pu),Pu|=r;return xs(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,n,r,i){var a=Ni(n)?Ii:Mi.current;return a=Ri(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ms(e,t,n,r,i){if(Ni(n)){var a=!0;Oi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Gs(e,t),Ha(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Ni(n)?Ii:Mi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ga(t,o,r,c),Ia=!1;var f=t.memoizedState;o.state=f,Ua(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ci.current||Ia?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Ia||ja(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Na(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Ri(t,u=Ni(n)?Ii:Mi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ga(t,o,r,u),Ia=!1,f=t.memoizedState,o.state=f,Ua(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ci.current||Ia?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Ia||ja(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Ws(e,t,a);r=t.stateNode,_s.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Qa(t,e.child,null,a),t.child=Qa(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),pa(i),t.flags|=256,xs(e,t,n,r),t.child}var Ns,Ps,Ds,Ls,Os={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Uc(u,i,0,null),e=Oc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Os,e):Bs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Oc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Qa(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Os,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Iu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),rc(r,e,i,-1))}return mc(),Vs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Ki++]=Qi,Xi[Ki++]=Ji,Xi[Ki++]=Yi,Qi=e.id,Ji=e.overflow,Yi=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Oc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Us(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Qa(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ka(e.return,t,n)}function js(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Ni(t.type)&&Pi(),Xs(t),null;case 3:return r=t.stateNode,io(),Ei(Ci),Ei(Mi),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Ps(e,t),Xs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xs(t),null}if(e=no($a.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Q(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(u=_e(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Br("scroll",e):null!=l&&_(e,o,l,u))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Xs(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return io(),Ps(e,t),null===e&&jr(t.stateNode.containerInfo),Xs(t),null;case 10:return wa(t.type._context),Xs(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)qs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,qs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Hu&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Xs(t),null}else 2*Je()-o.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ti(so,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ni(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ci),Ei(Mi),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ns=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Js=!1,Zs="function"===typeof WeakSet?WeakSet:Set,$s=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var hu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||eu(n,t);case 6:var r=hu,i=fu;hu=null,du(e,t,n),fu=i,null!==(hu=r)&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),jt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=fu,hu=n.stateNode.containerInfo,fu=!0,du(e,t,n),hu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Js&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,du(e,t,n),Js=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,fu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===hu)throw Error(a(160));pu(o,s,i),hu=null,fu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),_e(u,s);var l=_e(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):_(i,h,f,l)}switch(u){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Je())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||h,mu(t,e),Js=l):mu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for($s=e,h=e.child;null!==h;){for(f=$s=h;null!==$s;){switch(p=(d=$s).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,$s=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _u(e,t,n){$s=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var i=$s,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=o,(Js=u)&&!c)for($s=i;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?ku(i):null!==u?(u.return=o,$s=u):ku(i);for(;null!==a;)$s=a,bu(a,t,n),a=a.sibling;$s=i,Qs=s,Js=c}xu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$s=a):xu(e)}}function xu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&jt(f)}}}break;default:throw Error(a(163))}Js||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function ku(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Su,Eu=Math.ceil,Tu=b.ReactCurrentDispatcher,Au=b.ReactCurrentOwner,Mu=b.ReactCurrentBatchConfig,Cu=0,Iu=null,Ru=null,Nu=0,Pu=0,Du=Si(0),Lu=0,Ou=null,Uu=0,Fu=0,Bu=0,Vu=null,zu=null,ju=0,Hu=1/0,Gu=null,Wu=!1,qu=null,Xu=null,Ku=!1,Yu=null,Qu=0,Ju=0,Zu=null,$u=-1,ec=0;function tc(){return 0!==(6&Cu)?Je():-1!==$u?$u:$u=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Nu?Nu&-Nu:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,n,r){if(50<Ju)throw Ju=0,Zu=null,Error(a(185));gt(e,n,r),0!==(2&Cu)&&e===Iu||(e===Iu&&(0===(2&Cu)&&(Fu|=n),4===Lu&&uc(e,Nu)),ic(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(Hu=Je()+500,Bi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Iu?Nu:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Cu)&&ji()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($u=-1,ec=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===Iu?Nu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cu;Cu|=2;var o=vc();for(Iu===e&&Nu===t||(Gu=null,Hu=Je()+500,dc(e,t));;)try{_c();break}catch(u){pc(e,u)}xa(),Tu.current=o,Cu=i,null!==Ru?t=0:(Iu=null,Nu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ou,dc(e,0),uc(e,r),ic(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ou,dc(e,0),uc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,zu,Gu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=ju+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,zu,Gu),t);break}wc(e,zu,Gu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,zu,Gu),r);break}wc(e,zu,Gu);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Bu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cu))throw Error(a(327));kc();var t=ft(e,0);if(0===(1&t))return ic(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ou,dc(e,0),uc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zu,Gu),ic(e,Je()),null}function lc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Hu=Je()+500,Bi&&ji())}}function hc(e){null!==Yu&&0===Yu.tag&&0===(6&Cu)&&kc();var t=Cu;Cu|=1;var n=Mu.transition,r=_t;try{if(Mu.transition=null,_t=1,e)return e()}finally{_t=r,Mu.transition=n,0===(6&(Cu=t))&&ji()}}function fc(){Pu=Du.current,Ei(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ci),Ei(Mi),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:wa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Iu=e,Ru=e=Dc(e.current,null),Nu=Pu=t,Lu=0,Ou=null,Bu=Fu=Uu=0,zu=Vu=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Ru;try{if(xa(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,_o=!1,bo=0,Au.current=null,null===n||null===n.return){Lu=1,Ou=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Nu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Xu||!Xu.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(b){t=b,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function vc(){var e=Tu.current;return Tu.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Iu||0===(268435455&Uu)&&0===(268435455&Fu)||uc(Iu,Nu)}function gc(e,t){var n=Cu;Cu|=2;var r=vc();for(Iu===e&&Nu===t||(Gu=null,dc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(xa(),Cu=n,Tu.current=r,null!==Ru)throw Error(a(261));return Iu=null,Nu=0,Lu}function yc(){for(;null!==Ru;)bc(Ru)}function _c(){for(;null!==Ru&&!Ye();)bc(Ru)}function bc(e){var t=Su(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?xc(e):Ru=t,Au.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Pu)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function wc(e,t,n){var r=_t,i=Mu.transition;try{Mu.transition=null,_t=1,function(e,t,n,r){do{kc()}while(null!==Yu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Iu&&(Ru=Iu=null,Nu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ku||(Ku=!0,Ic(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Mu.transition,Mu.transition=null;var s=_t;_t=1;var u=Cu;Cu|=4,Au.current=null,function(e,t){if(ei=Gt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}v=nu,nu=!1}(e,n),gu(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,_u(n,e,i),Qe(),Cu=u,_t=s,Mu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Yu=e,Qu=i),o=e.pendingLanes,0===o&&(Xu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=qu,qu=null,e;0!==(1&Qu)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Zu?Ju++:(Ju=0,Zu=e):Ju=0,ji()}(e,t,n,r)}finally{Mu.transition=i,_t=r}return null}function kc(){if(null!==Yu){var e=bt(Qu),t=Mu.transition,n=_t;try{if(Mu.transition=null,_t=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var f=h.child;if(null!==f)f.return=h,$s=f;else for(;null!==$s;){var d=(h=$s).sibling,p=h.return;if(ou(h),h===l){$s=null;break}if(null!==d){d.return=p,$s=d;break}$s=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var _=e.current;for($s=_;null!==$s;){var b=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,$s=b;else e:for(s=_;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(w){Ec(u,u.return,w)}if(u===s){$s=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,$s=x;break e}$s=u.return}}if(Cu=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{_t=n,Mu.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(Nu&n)===n&&(4===Lu||3===Lu&&(130023424&Nu)===Nu&&500>Je()-ju?dc(e,0):Bu|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ca(e,t))&&(gt(e,t,n),ic(e,n))}function Mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ac(e,n)}function Ic(e,t){return Xe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Oc(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Nc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=Nc(13,n,t,i)).elementType=C,e.lanes=o,e;case I:return(e=Nc(19,n,t,i)).elementType=I,e.lanes=o,e;case P:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case A:s=9;break e;case M:s=11;break e;case R:s=14;break e;case N:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Nc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function jc(e){if(!e)return Ai;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Li(e,n,t)}return t}function Hc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=jc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,gt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),da();break;case 5:ao(t);break;case 1:Ni(t.type)&&Oi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ti(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ti(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Ri(t,Mi.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=As(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Na(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qa(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ci.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ka(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),ka(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),ks(e,t,r,i=ma(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gs(e,t),t.tag=1,Ni(r)?(e=!0,Oi(t)):e=!1,Sa(t,n),Ha(t,r,i),Wa(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Hc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=u,e[pi]=u.current,jr(8===e.nodeType?e.parentNode:e),hc((function(){Gc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Gc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Cu)&&(Hu=Je()+500,ji()))}break;case 13:hc((function(){var t=Ca(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Xc(e,1)}},wt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rc(t,e,134217728,tc());Xc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Ca(e,t);if(null!==n)rc(n,e,t,tc());Xc(e,t)}},St=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));X(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=lc,Ce=hc;var tl={usingClientEntryPoint:!1,Events:[_i,bi,xi,Te,Ae,lc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=_.prototype=new y;b.constructor=_,v(b,g.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+M(u,0):a,x(o)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var l=a+M(s=e[c],c);u+=C(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,i,l=a+M(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},P={transition:null},D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function x(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(w);else{var t=r(l);null!==t&&D(x,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(T),T=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!C());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(x,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,T=-1,A=5,M=-1;function C(){return!(t.unstable_now()-M<A)}function I(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof _)k=function(){_(I)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,N=R.port2;R.port1.onmessage=I,k=function(){N.postMessage(null)}}else k=function(){g(I,0)};function P(e){E=e,S||(S=!0,k())}function D(e,n){T=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(y(T),T=-1):m=!0,D(x,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,P(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".a0a085bb.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="mixlab:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/mixlab/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmixlab=self.webpackChunkmixlab||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return st},SDK_VERSION:function(){return xn},_DEFAULT_ENTRY_NAME:function(){return un},_addComponent:function(){return fn},_addOrOverwriteComponent:function(){return dn},_apps:function(){return ln},_clearComponents:function(){return gn},_components:function(){return hn},_getProvider:function(){return vn},_registerComponent:function(){return pn},_removeServiceInstance:function(){return mn},deleteApp:function(){return En},getApp:function(){return kn},getApps:function(){return Sn},initializeApp:function(){return wn},onLog:function(){return Mn},registerVersion:function(){return An},setLogLevel:function(){return Cn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||c()}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||h(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){var t=x();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function S(e,t,n){return S=x()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},S.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return S(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)},E(e)}function T(e){return o(e)||h(e)||u(e)||c()}function A(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var C,I="popstate";function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function N(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function P(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),M({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?O(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function O(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function U(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,h=t.Pop,f=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){h=t.Pop;var e=p(),n=null==e?null:e-d;d=e,f&&f({action:h,location:g.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:L(e);return R(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(M({},l.state,{idx:d}),""));var g={get action(){return h},get location(){return e(s,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(I,v),f=e,function(){s.removeEventListener(I,v),f=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;var i=D(g.location,e,n);r&&r(i,e);var a=P(i,d=p()+1),o=g.createHref(i);try{l.pushState(a,"",o)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(o)}c&&f&&f({action:h,location:g.location,delta:1})},replace:function(e,n){h=t.Replace;var i=D(g.location,e,n);r&&r(i,e);var a=P(i,d=p()),o=g.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:g.location,delta:0})},go:function(e){return l.go(e)}};return g}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=Z(("string"===typeof t?O(t):t).pathname||"/",n);if(null==r)return null;var i=B(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],J(r));return a}function B(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(R(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=re([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),B(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:K(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=A(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=T(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=V(i.join("/")),u=[];return u.push.apply(u,f(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,f(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var z=/^:\w+$/,j=3,H=2,G=1,W=10,q=-2,X=function(e){return"*"===e};function K(e,t){var n=e.split("/"),r=n.length;return n.some(X)&&(r+=q),t&&(r+=H),n.filter((function(e){return!X(e)})).reduce((function(e,t){return e+(z.test(t)?j:""===t?G:W)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:re([i,l.pathname]),pathnameBase:ie(re([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=re([i,l.pathnameBase]))}return a}function Q(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);N("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){var r=t.paramName,i=t.isOptional;if("*"===r){var a=c[n]||"";u=s.slice(0,s.length-a.length).replace(/(.)\/+$/,"$1")}var o=c[n];return e[r]=i&&!o?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return N(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(o||"",r),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function J(e){try{return decodeURI(e)}catch(t){return N(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e){return ee(e).map((function(t,n){return n===e.length-1?t.pathname:t.pathnameBase}))}function ne(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=O(e):(R(!(i=M({},e)).pathname||!i.pathname.includes("?"),$("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),$("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),$("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else if(r){var u=t[t.length-1].replace(/^\//,"").split("/");if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u.pop();i.pathname=c.join("/")}a="/"+u.join("/")}else{var l=t.length-1;if(s.startsWith("..")){for(var h=s.split("/");".."===h[0];)h.shift(),l-=1;i.pathname=h.join("/")}a=l>=0?t[l]:"/"}var f=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?O(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ae(a),hash:oe(s)}}(i,a),d=s&&"/"!==s&&s.endsWith("/"),p=(o||"."===s)&&n.endsWith("/");return f.pathname.endsWith("/")||!d&&!p||(f.pathname+="/"),f}var re=function(e){return e.join("/").replace(/\/\/+/g,"/")},ie=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ae=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},oe=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},se=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(E(Error));function ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ce=["post","put","patch","delete"],le=(new Set(ce),["get"].concat(ce));new Set(le),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}var fe=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext(null);var ge=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=r.createContext(null);function _e(){return null!=r.useContext(me)}function be(){return _e()||R(!1),r.useContext(me).location}function xe(e){r.useContext(ve).static||r.useLayoutEffect(e)}function we(){return r.useContext(ge).isDataRoute?function(){var e=Pe(Re.UseNavigateStable).router,t=Le(Ne.UseNavigateStable),n=r.useRef(!1);xe((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,he({fromRouteId:t},i)))}),[e,t]);return i}():function(){_e()||R(!1);var e=r.useContext(fe),t=r.useContext(ve),n=t.basename,i=t.navigator,a=r.useContext(ge).matches,o=be().pathname,s=JSON.stringify(te(a)),u=r.useRef(!1);return xe((function(){u.current=!0})),r.useCallback((function(t,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof t){var a=ne(t,JSON.parse(s),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:re([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,s,o,e])}()}var ke=r.createContext(null);function Se(){var e=r.useContext(ge).matches,t=e[e.length-1];return t?t.params:{}}function Ee(e,n,i){_e()||R(!1);var a,o=r.useContext(ve).navigator,s=r.useContext(ge).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),h=(u&&u.route,be());if(n){var f,d="string"===typeof n?O(n):n;"/"===l||(null==(f=d.pathname)?void 0:f.startsWith(l))||R(!1),a=d}else a=h;var p=a.pathname||"/",v=F(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Ie(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:re([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:re([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,i);return n&&m?r.createElement(me.Provider,{value:{location:he({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Te(){var e=function(){var e,t=r.useContext(ye),n=De(Ne.UseRouteError),i=Le(Ne.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ae=r.createElement(Te,null),Me=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return g(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(ge.Provider,{value:this.props.routeContext},r.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ce(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ge.Provider,{value:t},i)}function Ie(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,s=null==(i=n)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||R(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Ae);var l=t.concat(o.slice(0,a+1)),h=function(){var t;return t=u?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ce,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Me,{location:n.location,revalidation:n.revalidation,component:c,error:u,children:h(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):h()}),null)}var Re=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Re||{}),Ne=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ne||{});function Pe(e){var t=r.useContext(fe);return t||R(!1),t}function De(e){var t=r.useContext(de);return t||R(!1),t}function Le(e){var t=function(e){var t=r.useContext(ge);return t||R(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||R(!1),n.route.id}i.startTransition;function Oe(e){return function(e){var t=r.useContext(ge).outlet;return t?r.createElement(ke.Provider,{value:e},t):t}(e.context)}function Ue(e){R(!1)}function Fe(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;_e()&&R(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=O(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,_=void 0===y?"":y,b=v.hash,x=void 0===b?"":b,w=v.state,k=void 0===w?null:w,S=v.key,E=void 0===S?"default":S,T=r.useMemo((function(){var e=Z(g,d);return null==e?null:{location:{pathname:e,search:_,hash:x,state:k,key:E},navigationType:c}}),[d,g,_,x,k,E,c]);return null==T?null:r.createElement(ve.Provider,{value:p},r.createElement(me.Provider,{children:o,value:T}))}function Be(e){var t=e.children,n=e.location;return Ee(je(t),n)}var Ve=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Ve||{}),ze=new Promise((function(){}));r.Component;function je(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(f(t),[i]);if(e.type!==r.Fragment){e.type!==Ue&&R(!1),e.props.index&&e.props.children&&R(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=je(e.props.children,a)),n.push(o)}else n.push.apply(n,je(e.props.children,a))}})),n}function He(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},We={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ge(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new qe;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},qe=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return g(n)}(E(Error)),Xe=function(e){return function(e){var t=Ge(e);return We.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ke=function(e){try{return We.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ye(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ye(e[n],t[n]));return e}var Qe=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Je=function(){try{return Qe()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/mixlab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:673872028091:web:054417acb2bde460b8e49e",REACT_APP_FB_API_KEY:"AIzaSyC1TBhwQ0DNgQ55kLhuLQF9wZbzgeqB3vA",REACT_APP_FB_AUTH_DOMAIN:"mixlab-56f28.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"673872028091",REACT_APP_FB_PROJECT_ID:"mixlab-56f28",REACT_APP_FB_STORAGE_BUCKET:"mixlab-56f28.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Ke(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ze=function(){var e;return null===(e=Je())||void 0===e?void 0:e.config},$e=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return g(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function et(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xe(JSON.stringify({alg:"none",type:"JWT"})),Xe(JSON.stringify(a)),""].join(".")}function tt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function nt(){var e,t=null===(e=Je())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function rt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function it(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function at(){var e=tt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ot(){try{return"object"===typeof indexedDB}catch(e){return!1}}var st=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),ut.prototype.create),a}return g(n)}(E(Error)),ut=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return g(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ct,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new st(n,a,t)}}]),e}();var ct=/\{\$([^}]+)}/g;function lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ht(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ft(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(dt(s)&&dt(u)){if(!ft(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function dt(e){return null!==e&&"object"===typeof e}function pt(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function vt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function mt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function gt(e,t){var n=new yt(e,t);return n.subscribe.bind(n)}var yt=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return g(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=A(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=_t),void 0===r.error&&(r.error=_t),void 0===r.complete&&(r.complete=_t);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function _t(){}function bt(e){return e&&e._delegate?e._delegate:e}function xt(){xt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var h={};function f(){}function d(){}function v(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==t&&n.call(y,a)&&(m=y);var _=v.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==p(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e||""===e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(p(e)+" is not iterable")}return d.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function wt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){wt(a,r,i,o,s,"next",e)}function s(e){wt(a,r,i,o,s,"throw",e)}o(void 0)}))}}var St=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return g(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Et="[DEFAULT]",Tt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return g(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new $e;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Et})}catch(u){}var t,n=A(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=A(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Et?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et;return this.component?this.component.multipleInstances?e:Et:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var At,Mt,Ct=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return g(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Tt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),It=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Mt||(Mt={}));var Rt={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},Nt=Mt.INFO,Pt=(He(At={},Mt.DEBUG,"log"),He(At,Mt.VERBOSE,"log"),He(At,Mt.INFO,"info"),He(At,Mt.WARN,"warn"),He(At,Mt.ERROR,"error"),At),Dt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Pt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Lt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Nt,this._logHandler=Dt,this._userLogHandler=null,It.push(this)}return g(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Mt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Rt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Mt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Mt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.INFO].concat(t)),this._logHandler.apply(this,[this,Mt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.WARN].concat(t)),this._logHandler.apply(this,[this,Mt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Mt.ERROR].concat(t)),this._logHandler.apply(this,[this,Mt.ERROR].concat(t))}}]),e}();function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft,Bt,Vt=function(e,t){return t.some((function(t){return e instanceof t}))};var zt=new WeakMap,jt=new WeakMap,Ht=new WeakMap,Gt=new WeakMap,Wt=new WeakMap;var qt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return jt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ht.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Xt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Qt(this),n),Yt(zt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yt(e.apply(Qt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Qt(this),t].concat(r));return Ht.set(a,t.sort?t.sort():[t]),Yt(a)}}function Kt(e){return"function"===typeof e?Xt(e):(e instanceof IDBTransaction&&function(e){if(!jt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));jt.set(e,t)}}(e),Vt(e,Ft||(Ft=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,qt):e)}function Yt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Yt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&zt.set(t,e)})).catch((function(){})),Wt.set(t,e),t}(e);if(Gt.has(e))return Gt.get(e);var t=Kt(e);return t!==e&&(Gt.set(e,t),Wt.set(t,e)),t}var Qt=function(e){return Wt.get(e)};var Jt,Zt,$t=["get","getKey","getAll","getAllKeys","count"],en=["put","add","delete","clear"],tn=new Map;function nn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(tn.get(t))return tn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=en.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||$t.includes(n))){var a=function(){var e=kt(xt().mark((function e(t){var a,o,s,u,c,l,h=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return tn.set(t,a),a}}}qt=function(e){return Ut(Ut({},e),{},{get:function(t,n,r){return nn(t,n)||e.get(t,n,r)},has:function(t,n){return!!nn(t,n)||e.has(t,n)}})}(qt);var rn=function(){function e(t){d(this,e),this.container=t}return g(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var an="@firebase/app",on="0.9.25",sn=new Lt("@firebase/app"),un="[DEFAULT]",cn=(He(Jt={},an,"fire-core"),He(Jt,"@firebase/app-compat","fire-core-compat"),He(Jt,"@firebase/analytics","fire-analytics"),He(Jt,"@firebase/analytics-compat","fire-analytics-compat"),He(Jt,"@firebase/app-check","fire-app-check"),He(Jt,"@firebase/app-check-compat","fire-app-check-compat"),He(Jt,"@firebase/auth","fire-auth"),He(Jt,"@firebase/auth-compat","fire-auth-compat"),He(Jt,"@firebase/database","fire-rtdb"),He(Jt,"@firebase/database-compat","fire-rtdb-compat"),He(Jt,"@firebase/functions","fire-fn"),He(Jt,"@firebase/functions-compat","fire-fn-compat"),He(Jt,"@firebase/installations","fire-iid"),He(Jt,"@firebase/installations-compat","fire-iid-compat"),He(Jt,"@firebase/messaging","fire-fcm"),He(Jt,"@firebase/messaging-compat","fire-fcm-compat"),He(Jt,"@firebase/performance","fire-perf"),He(Jt,"@firebase/performance-compat","fire-perf-compat"),He(Jt,"@firebase/remote-config","fire-rc"),He(Jt,"@firebase/remote-config-compat","fire-rc-compat"),He(Jt,"@firebase/storage","fire-gcs"),He(Jt,"@firebase/storage-compat","fire-gcs-compat"),He(Jt,"@firebase/firestore","fire-fst"),He(Jt,"@firebase/firestore-compat","fire-fst-compat"),He(Jt,"fire-js","fire-js"),He(Jt,"firebase","fire-js-all"),Jt),ln=new Map,hn=new Map;function fn(e,t){try{e.container.addComponent(t)}catch(n){sn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function dn(e,t){e.container.addOrOverwriteComponent(t)}function pn(e){var t=e.name;if(hn.has(t))return sn.debug("There were multiple attempts to register component ".concat(t,".")),!1;hn.set(t,e);var n,r=A(ln.values());try{for(r.s();!(n=r.n()).done;){fn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function vn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;vn(e,t).clearInstance(n)}function gn(){hn.clear()}var yn=(He(Zt={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),He(Zt,"bad-app-name","Illegal App name: '{$appName}"),He(Zt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),He(Zt,"app-deleted","Firebase App named '{$appName}' already deleted"),He(Zt,"no-options","Need to provide options, when not being deployed to hosting via source."),He(Zt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),He(Zt,"invalid-log-argument","First argument to `onLog` must be null or a function."),He(Zt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),He(Zt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),He(Zt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),He(Zt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Zt),_n=new ut("app","Firebase",yn),bn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",(function(){return i}),"PUBLIC"))}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}]),e}(),xn="10.7.1";function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:un,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw _n.create("bad-app-name",{appName:String(i)});if(n||(n=Ze()),!n)throw _n.create("no-options");var a=ln.get(i);if(a){if(ft(n,a.options)&&ft(r,a.config))return a;throw _n.create("duplicate-app",{appName:i})}var o,s=new Ct(i),u=A(hn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new bn(n,r,s);return ln.set(i,l),l}function kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=ln.get(e);if(!t&&e===un&&Ze())return wn();if(!t)throw _n.create("no-app",{appName:e});return t}function Sn(){return Array.from(ln.values())}function En(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ln.has(n)){e.next=6;break}return ln.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e,t,n){var r,i=null!==(r=cn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void sn.warn(s.join(" "))}pn(new St("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Mn(e,t){if(null!==e&&"function"!==typeof e)throw _n.create("invalid-log-argument");!function(e,t){var n,r=A(It);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Rt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Mt[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Cn(e){var t;t=e,It.forEach((function(e){e.setLogLevel(t)}))}var In="firebase-heartbeat-database",Rn=1,Nn="firebase-heartbeat-store",Pn=null;function Dn(){return Pn||(Pn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Yt(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Yt(s.result),e.oldVersion,e.newVersion,Yt(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(In,Rn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Nn)}}).catch((function(e){throw _n.create("idb-open",{originalErrorMessage:e.message})}))),Pn}function Ln(e){return On.apply(this,arguments)}function On(){return On=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dn();case 3:return n=e.sent,e.next=6,n.transaction(Nn).objectStore(Nn).get(Bn(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof st?sn.warn(e.t0.message):(i=_n.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),sn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),On.apply(this,arguments)}function Un(e,t){return Fn.apply(this,arguments)}function Fn(){return Fn=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dn();case 3:return r=e.sent,i=r.transaction(Nn,"readwrite"),a=i.objectStore(Nn),e.next=8,a.put(n,Bn(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof st?sn.warn(e.t0.message):(o=_n.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),sn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Fn.apply(this,arguments)}function Bn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Vn=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Wn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return g(e,[{key:"triggerHeartbeat",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=zn(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=9;break}return e.next=6,this._heartbeatsCachePromise;case 6:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=9;break}return e.abrupt("return");case 9:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=13;break}return e.abrupt("return");case 13:this._heartbeatsCache.heartbeats.push({date:a,agent:i});case 14:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(n=zn(),r=jn(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=Xe(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function zn(){return(new Date).toISOString().substring(0,10)}function jn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=A(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),qn(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),qn(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Hn,Gn,Wn=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return g(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ln(this.app);case 9:if(!(null===(t=e.sent)||void 0===t?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Un(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Un(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function qn(e){return Xe(JSON.stringify({version:2,heartbeats:e})).length}Hn="",pn(new St("platform-logger",(function(e){return new rn(e)}),"PRIVATE")),pn(new St("heartbeat",(function(e){return new Vn(e)}),"PRIVATE")),An(an,on,Hn),An(an,on,"esm2017"),An("fire-js","");var Xn=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,fn(t,new St("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),En(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){fn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){dn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Kn=(He(Gn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),He(Gn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Gn),Yn=new ut("app-compat","Firebase",Kn);var Qn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=wn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(lt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:An,setLogLevel:Cn,onLog:Mn,apps:null,SDK_VERSION:xn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(pn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Yn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ye(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!lt(n,e=e||un))throw Yn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Xn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ye(n,e)},createSubscribe:gt,ErrorFactory:ut,deepExtend:Ye}),n}(),Jn=new Lt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Jn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Zn=self.firebase.SDK_VERSION;Zn&&Zn.indexOf("LITE")>=0&&Jn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var $n=Qn;!function(e){An("@firebase/app-compat","0.2.25",e)}();function er(){return er="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},er.apply(this,arguments)}$n.registerVersion("firebase","10.7.1","app-compat");function tr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var nr,rr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ir="EMAIL_SIGNIN",ar="PASSWORD_RESET",or="RECOVER_EMAIL",sr="REVERT_SECOND_FACTOR_ADDITION",ur="VERIFY_AND_CHANGE_EMAIL",cr="VERIFY_EMAIL";function lr(){return He({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var hr=function(){var e;return He(e={},"admin-restricted-operation","This operation is restricted to administrators only."),He(e,"argument-error",""),He(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),He(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),He(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),He(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),He(e,"cordova-not-ready","Cordova framework is not ready."),He(e,"cors-unsupported","This browser is not supported."),He(e,"credential-already-in-use","This credential is already associated with a different user account."),He(e,"custom-token-mismatch","The custom token corresponds to a different audience."),He(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),He(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),He(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),He(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),He(e,"email-already-in-use","The email address is already in use by another account."),He(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),He(e,"expired-action-code","The action code has expired."),He(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),He(e,"internal-error","An internal AuthError has occurred."),He(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),He(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),He(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),He(e,"invalid-auth-event","An internal AuthError has occurred."),He(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),He(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),He(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),He(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),He(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),He(e,"invalid-email","The email address is badly formatted."),He(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),He(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),He(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),He(e,"invalid-credential","The supplied auth credential is incorrect, malformed or has expired."),He(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),He(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),He(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),He(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),He(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),He(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),He(e,"wrong-password","The password is invalid or the user does not have a password."),He(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),He(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),He(e,"invalid-provider-id","The specified provider ID is invalid."),He(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),He(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),He(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),He(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),He(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),He(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),He(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),He(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),He(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),He(e,"missing-continue-uri","A continue URL must be provided in the request."),He(e,"missing-iframe-start","An internal AuthError has occurred."),He(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),He(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),He(e,"missing-password","A non-empty password must be provided"),He(e,"missing-multi-factor-info","No second factor identifier is provided."),He(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),He(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),He(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),He(e,"app-deleted","This instance of FirebaseApp has been deleted."),He(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),He(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),He(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),He(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),He(e,"no-auth-event","An internal AuthError has occurred."),He(e,"no-such-provider","User was not linked to an account with the given provider."),He(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),He(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),He(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),He(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),He(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),He(e,"provider-already-linked","User can only be linked to one identity for the given provider."),He(e,"quota-exceeded","The project's quota for this operation has been exceeded."),He(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),He(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),He(e,"rejected-credential","The request contains malformed or mismatching credentials."),He(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),He(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),He(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),He(e,"timeout","The operation has timed out."),He(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),He(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),He(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),He(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),He(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),He(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),He(e,"unverified-email","The operation requires a verified email."),He(e,"user-cancelled","The user did not grant your application the permissions it requested."),He(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),He(e,"user-disabled","The user account has been disabled by an administrator."),He(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),He(e,"user-signed-out",""),He(e,"weak-password","The password must be 6 characters long or more."),He(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),He(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),He(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),He(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),He(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),He(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),He(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),He(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),He(e,"invalid-req-type","Invalid request parameters."),He(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),He(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),He(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},fr=lr,dr=new ut("auth","Firebase",lr()),pr=new Lt("@firebase/auth");function vr(e){if(pr.logLevel<=Mt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pr.warn.apply(pr,["Auth (".concat(xn,"): ").concat(e)].concat(n))}}function mr(e){if(pr.logLevel<=Mt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pr.error.apply(pr,["Auth (".concat(xn,"): ").concat(e)].concat(n))}}function gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw xr.apply(void 0,[e].concat(n))}function yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xr.apply(void 0,[e].concat(n))}function _r(e,t,n){var r=Object.assign(Object.assign({},fr()),He({},t,n));return new ut("auth","Firebase",r).create(t,{appName:e.name})}function br(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&gr(e,"argument-error"),_r(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=f(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(f(o)))}return dr.create.apply(dr,[e].concat(n))}function wr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw xr.apply(void 0,[t].concat(r))}}function kr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw mr(t),new Error(t)}function Sr(e,t){e||kr(t)}function Er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tr(){return"http:"===Ar()||"https:"===Ar()}function Ar(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Mr=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,Sr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())||it()}return g(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Tr()||rt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Cr(e,t){Sr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ir=function(){function e(){d(this,e)}return g(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}))},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Rr=(He(nr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),He(nr,"MISSING_CUSTOM_TOKEN","internal-error"),He(nr,"INVALID_IDENTIFIER","invalid-email"),He(nr,"MISSING_CONTINUE_URI","internal-error"),He(nr,"INVALID_PASSWORD","wrong-password"),He(nr,"MISSING_PASSWORD","missing-password"),He(nr,"INVALID_LOGIN_CREDENTIALS","invalid-credential"),He(nr,"EMAIL_EXISTS","email-already-in-use"),He(nr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),He(nr,"INVALID_IDP_RESPONSE","invalid-credential"),He(nr,"INVALID_PENDING_TOKEN","invalid-credential"),He(nr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),He(nr,"MISSING_REQ_TYPE","internal-error"),He(nr,"EMAIL_NOT_FOUND","user-not-found"),He(nr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),He(nr,"EXPIRED_OOB_CODE","expired-action-code"),He(nr,"INVALID_OOB_CODE","invalid-action-code"),He(nr,"MISSING_OOB_CODE","internal-error"),He(nr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),He(nr,"INVALID_ID_TOKEN","invalid-user-token"),He(nr,"TOKEN_EXPIRED","user-token-expired"),He(nr,"USER_NOT_FOUND","user-token-expired"),He(nr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),He(nr,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),He(nr,"INVALID_CODE","invalid-verification-code"),He(nr,"INVALID_SESSION_INFO","invalid-verification-id"),He(nr,"INVALID_TEMPORARY_PROOF","invalid-credential"),He(nr,"MISSING_SESSION_INFO","missing-verification-id"),He(nr,"SESSION_EXPIRED","code-expired"),He(nr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),He(nr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),He(nr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),He(nr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),He(nr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),He(nr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),He(nr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),He(nr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),He(nr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),He(nr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),He(nr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),He(nr,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),He(nr,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),He(nr,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),He(nr,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),He(nr,"MISSING_CLIENT_TYPE","missing-client-type"),He(nr,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),He(nr,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),He(nr,"INVALID_REQ_TYPE","invalid-req-type"),nr),Nr=new Mr(3e4,6e4);function Pr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Dr(e,t,n,r){return Lr.apply(this,arguments)}function Lr(){return Lr=kt(xt().mark((function e(t,n,r,i){var a,o=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Or(t,a,kt(xt().mark((function e(){var a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=pt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ir.fetch()(Vr(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Or(e,t,n){return Ur.apply(this,arguments)}function Ur(){return Ur=kt(xt().mark((function e(t,n,r){var i,a,o,s,u,c,h,f,d,p;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Rr),n),e.prev=2,a=new jr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Hr(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Hr(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Hr(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Hr(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw _r(t,p,d);case 34:gr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof st)){e.next=41;break}throw e.t0;case 41:gr(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Ur.apply(this,arguments)}function Fr(e,t,n,r){return Br.apply(this,arguments)}function Br(){return Br=kt(xt().mark((function e(t,n,r,i){var a,o,s=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Dr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&gr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}function Vr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Cr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function zr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jr=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(yr(n.auth,"network-request-failed"))}),Nr.get())}))}return g(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Hr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=yr(e,t,r);return i.customData._tokenResponse=n,i}function Gr(e){return void 0!==e&&void 0!==e.getResponse}function Wr(e){return void 0!==e&&void 0!==e.enterprise}var qr=function(){function e(t){if(d(this,e),this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}return g(e,[{key:"getProviderEnforcementState",value:function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;var t,n=A(this.recaptchaEnforcementState);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.provider&&r.provider===e)return zr(r.enforcementState)}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"isProviderEnabled",value:function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}]),e}();function Xr(e){return Kr.apply(this,arguments)}function Kr(){return(Kr=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"GET","/v2/recaptchaConfig",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e,t){return ei.apply(this,arguments)}function ei(){return(ei=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ri(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ii(){return ii=kt(xt().mark((function e(t){var n,r,i,a,o,s,u=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=bt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,wr((a=oi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ri(ai(a.auth_time)),issuedAtTime:ri(ai(a.iat)),expirationTime:ri(ai(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function ai(e){return 1e3*Number(e)}function oi(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return mr("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ke(r);return a?JSON.parse(a):(mr("Failed to decode base64 JWT payload"),null)}catch(o){return mr("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function si(e,t){return ui.apply(this,arguments)}function ui(){return ui=kt(xt().mark((function e(t,n){var r=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof st&&ci(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ui.apply(this,arguments)}function ci(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var li=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return g(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),hi=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return g(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function fi(e){return di.apply(this,arguments)}function di(){return(di=kt(xt().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,si(t,ti(r,{idToken:i}));case 6:wr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=tr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=vi(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new hi(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pi(){return(pi=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bt(t),e.next=3,fi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(f(n),f(t))}function mi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t,{},kt(xt().mark((function e(){var r,i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Vr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ir.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yi(e,t){return _i.apply(this,arguments)}function _i(){return(_i=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v2/accounts:revokeToken",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bi=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return g(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){wr(e.idToken,"internal-error"),wr("undefined"!==typeof e.idToken,"internal-error"),wr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=oi(e);return wr(t,"internal-error"),wr("undefined"!==typeof t.exp,"internal-error"),wr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=kt(xt().mark((function e(t){var n,r=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],wr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return kr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(wr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(wr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(wr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function xi(e,t){wr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var wi=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=tr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?f(a.providerData):[],this.metadata=new hi(a.createdAt||void 0,a.lastLoginAt||void 0)}return g(e,[{key:"getIdToken",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(wr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ii.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return pi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(wr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){wr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=kt(xt().mark((function e(t){var n,r,i=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,fi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,si(this,Jr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,_=n.uid,b=n.emailVerified,x=n.isAnonymous,w=n.providerData,k=n.stsTokenManager;wr(_&&k,t,"internal-error");var S=bi.fromJSON(this.name,k);wr("string"===typeof _,t,"internal-error"),xi(h,t.name),xi(f,t.name),wr("boolean"===typeof b,t,"internal-error"),wr("boolean"===typeof x,t,"internal-error"),xi(d,t.name),xi(p,t.name),xi(v,t.name),xi(m,t.name),xi(g,t.name),xi(y,t.name);var E=new e({uid:_,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:x,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=kt(xt().mark((function t(n,r){var i,a,o,s=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new bi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,fi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ki=new Map;function Si(e){Sr(e instanceof Function,"Expected a class definition");var t=ki.get(e);return t?(Sr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ki.set(e,t),t)}var Ei=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return g(e,[{key:"_isAvailable",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ei.type="NONE";var Ti=Ei;function Ai(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Mi=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ai(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ai("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return g(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?wi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=kt(xt().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Si(Ti),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Si(Ti),s=Ai(i,n.config.apiKey,n.name),u=null,c=A(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=wi._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ci(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ii(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Li(t))return"Blackberry";if(Oi(t))return"Webos";if(Ri(t))return"Safari";if((t.includes("chrome/")||Ni(t))&&!t.includes("edge/"))return"Chrome";if(Di(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/firefox\//i.test(e)}function Ri(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/crios\//i.test(e)}function Pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/iemobile/i.test(e)}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/android/i.test(e)}function Li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/blackberry/i.test(e)}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/webos/i.test(e)}function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return Ui(e)||Di(e)||Oi(e)||Li(e)||/windows phone/i.test(e)||Pi(e)}function Bi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ci(tt());break;case"Worker":t="".concat(Ci(tt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xn,"/").concat(r)}var Vi=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return g(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=kt(xt().mark((function e(t){var n,r,i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=A(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=A(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function zi(e){return ji.apply(this,arguments)}function ji(){return ji=kt(xt().mark((function e(t){var n,r=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Dr(t,"GET","/v2/passwordPolicy",Pr(t,n)));case 2:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}var Hi=function(){function e(t){var n,r,i,a;d(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return g(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNumericCharacter)||void 0===a||a),s.isValid&&(s.isValid=null===(o=s.containsNonAlphanumericCharacter)||void 0===o||o),s}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),Gi=function(){function e(t,n,r,i){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new Vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return g(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(kt(xt().mark((function r(){var i,a;return xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Mi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=kt(xt().mark((function e(t){var n,r,i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return wr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?bt(t):null)&&wr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=kt(xt().mark((function e(t){var n,r=this,i=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&wr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(kt(xt().mark((function n(){return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Si(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(this);case 2:t=e.sent,n=new Hi(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ut("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"revokeAccessToken",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=8;break}return e.next=3,this.currentUser.getIdToken();case 3:return n=e.sent,r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n},null!=this.tenantId&&(r.tenantId=this.tenantId),e.next=8,yi(this,r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return wr(n=t&&Si(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Mi.create(this,[Si(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=kt(xt().mark((function e(t){var n=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,s=this._isInitialized?Promise.resolve():this._initializationPromise;if(wr(s,this,"internal-error"),s.then((function(){o||a(i.currentUser)})),"function"===typeof t){var u=e.addObserver(t,n,r);return function(){o=!0,u()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return wr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=He({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&vr("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wi(e){return bt(e)}var qi=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=gt((function(e){return n.observer=e}))}return g(e,[{key:"next",get:function(){return wr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Xi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=yr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ki(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Yi=function(){function e(t){d(this,e),this.type="recaptcha-enterprise",this.auth=Wi(t)}return g(e,[{key:"verify",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Wr(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=kt(xt().mark((function e(n,r){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new qr(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Wr(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Xi("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qi(e,t,n){return Ji.apply(this,arguments)}function Ji(){return Ji=kt(xt().mark((function e(t,n,r){var i,a,o,s,u=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Yi(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ji.apply(this,arguments)}function Zi(e,t,n,r){return $i.apply(this,arguments)}function $i(){return $i=kt(xt().mark((function e(t,n,r,i){var a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(a=t._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))){e.next=7;break}return e.next=3,Qi(t,n,r,"getOobCode"===r);case 3:return o=e.sent,e.abrupt("return",i(t,o));case 7:return e.abrupt("return",i(t,n).catch(function(){var e=kt(xt().mark((function e(a){var o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),e.next=4,Qi(t,n,r,"getOobCode"===r);case 4:return o=e.sent,e.abrupt("return",i(t,o));case 8:return e.abrupt("return",Promise.reject(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function ea(e,t,n){var r=Wi(e);wr(r._canInitEmulator,r,"emulator-config-failed"),wr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ta(t),o=function(e){var t=ta(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:na(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:na(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ta(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function na(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ra=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return g(e,[{key:"toJSON",value:function(){return kr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return kr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return kr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return kr("not implemented")}}]),e}();function ia(e,t){return aa.apply(this,arguments)}function aa(){return(aa=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:resetPassword",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(e,t){return sa.apply(this,arguments)}function sa(){return(sa=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t){return ca.apply(this,arguments)}function ca(){return(ca=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:signUp",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(e,t){return ha.apply(this,arguments)}function ha(){return(ha=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:update",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t){return da.apply(this,arguments)}function da(){return(da=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithPassword",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(e,t){return va.apply(this,arguments)}function va(){return(va=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:sendOobCode",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ma(e,t){return ga.apply(this,arguments)}function ga(){return(ga=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(e,t){return _a.apply(this,arguments)}function _a(){return(_a=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){return xa.apply(this,arguments)}function xa(){return(xa=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(e,t){return ka.apply(this,arguments)}function ka(){return(ka=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithEmailLink",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ma=function(e){_(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return g(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",Zi(t,n,"signInWithPassword",fa));case 5:return e.abrupt("return",Sa(t,{email:this._email,oobCode:this._password}));case 6:gr(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",Zi(t,r,"signUpPassword",ua));case 5:return e.abrupt("return",Ta(t,{idToken:n,email:this._email,oobCode:this._password}));case 6:gr(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ra);function Ca(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithIdp",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ra=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return g(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=tr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ra);function Na(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:sendVerificationCode",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(){return(Da=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(){return(La=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Hr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oa=He({},"USER_NOT_FOUND","user-not-found");function Ua(){return(Ua=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithPhoneNumber",Pr(t,r),Oa));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fa=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return La.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ua.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ra);var Ba=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=vt(mt(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);wr(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return g(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=vt(mt(e)).link,n=t?vt(mt(t)).deep_link_id:null,r=vt(mt(e)).deep_link_id;return(r?vt(mt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Va=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return g(e,null,[{key:"credential",value:function(e,t){return Ma._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ba.parseLink(t);return wr(n,"argument-error"),Ma._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Va.PROVIDER_ID="password",Va.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var za=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return g(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ja=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return g(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return f(this.scopes)}}]),n}(za),Ha=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return wr(e.idToken||e.accessToken,"argument-error"),Ra._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return wr("providerId"in t&&"signInMethod"in t,"argument-error"),Ra._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(ja),Ga=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.call(this,"facebook.com")}return g(n,null,[{key:"credential",value:function(e){return Ra._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(ja);Ga.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ga.PROVIDER_ID="facebook.com";var Wa=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return g(n,null,[{key:"credential",value:function(e,t){return Ra._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(ja);Wa.GOOGLE_SIGN_IN_METHOD="google.com",Wa.PROVIDER_ID="google.com";var qa=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.call(this,"github.com")}return g(n,null,[{key:"credential",value:function(e){return Ra._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(ja);qa.GITHUB_SIGN_IN_METHOD="github.com",qa.PROVIDER_ID="github.com";var Xa=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ra),Ka=function(e){_(n,e);var t=k(n);function n(e){return d(this,n),wr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return g(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Xa.fromJSON(e);return wr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Xa._create(r,n)}catch(i){return null}}}]),n}(za),Ya=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.call(this,"twitter.com")}return g(n,null,[{key:"credential",value:function(e,t){return Ra._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(ja);function Qa(e,t){return Ja.apply(this,arguments)}function Ja(){return(Ja=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signUp",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ya.TWITTER_SIGN_IN_METHOD="twitter.com",Ya.PROVIDER_ID="twitter.com";var Za=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return g(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=kt(xt().mark((function t(n,r,i){var a,o,s,u,c=arguments;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,wi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=$a(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=kt(xt().mark((function t(n,r,i){var a;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=$a(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function $a(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function eo(){return(eo=kt(xt().mark((function e(t){var n,r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Za({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Qa(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Za._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var to=function(e){_(n,e);var t=k(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(w(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return g(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(st);function no(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw to._fromErrorAndOperation(e,n,t,r);throw n}))}function ro(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function io(e,t){return ao.apply(this,arguments)}function ao(){return ao=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,uo(!0,r,n);case 3:return e.t0=$r,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ro(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}function oo(e,t){return so.apply(this,arguments)}function so(){return so=kt(xt().mark((function e(t,n){var r,i,a=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=si,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Za._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}function uo(e,t,n){return co.apply(this,arguments)}function co(){return(co=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(n);case 2:i=ro(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",wr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lo(e,t){return ho.apply(this,arguments)}function ho(){return ho=kt(xt().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,si(t,no(i,a,n,t),r);case 6:return wr((o=e.sent).idToken,i,"internal-error"),wr(s=oi(o.idToken),i,"internal-error"),u=s.sub,wr(t.uid===u,i,"user-mismatch"),e.abrupt("return",Za._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&gr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ho.apply(this,arguments)}function fo(e,t){return po.apply(this,arguments)}function po(){return po=kt(xt().mark((function e(t,n){var r,i,a,o,s=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,no(t,i,n);case 4:return a=e.sent,e.next=7,Za._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(e,t){return mo.apply(this,arguments)}function mo(){return(mo=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fo(Wi(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return yo.apply(this,arguments)}function yo(){return(yo=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,uo(!1,r,n.providerId);case 3:return e.abrupt("return",oo(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(e,t){return bo.apply(this,arguments)}function bo(){return(bo=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lo(bt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t){return wo.apply(this,arguments)}function wo(){return(wo=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:signInWithCustomToken",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ko(){return(ko=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wi(t),e.next=3,xo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Za._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var So=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return g(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Eo._fromServerResponse(e,t):"totpInfo"in t?To._fromServerResponse(e,t):gr(e,"internal-error")}}]),e}(),Eo=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(So),To=function(e){_(n,e);var t=k(n);function n(e){return d(this,n),t.call(this,"totp",e)}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(So);function Ao(e,t,n){var r;wr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),wr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(wr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(wr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Mo(e){return Co.apply(this,arguments)}function Co(){return(Co=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Wi(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(){return(Io=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wi(t),a={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},r&&Ao(i,a,r),e.next=5,Zi(i,a,"getOobCode",ya);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(){return Ro=kt(xt().mark((function e(t,n,r){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ia(bt(t),{oobCode:n,newPassword:r}).catch(function(){var e=kt(xt().mark((function e(n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Mo(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function No(){return(No=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(bt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Po(e,t){return Do.apply(this,arguments)}function Do(){return(Do=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,ia(r,{oobCode:n});case 3:i=e.sent,wr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return wr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:wr(i.mfaInfo,r,"internal-error");case 13:wr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=So._fromServerResponse(Wi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(){return(Lo=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Po(bt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t,n){return Uo.apply(this,arguments)}function Uo(){return(Uo=kt(xt().mark((function e(t,n,r){var i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wi(t),a=Zi(i,{returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qa),e.next=5,a.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&Mo(t),e}));case 5:return o=e.sent,e.next=8,Za._fromIdTokenResponse(i,"signIn",o);case 8:return s=e.sent,e.next=11,i._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(){return(Fo=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,t){wr(t.handleCodeInApp,i,"argument-error"),t&&Ao(i,e,t)},i=Wi(t),o(a={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},r),e.next=6,Zi(i,a,"getOobCode",ba);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(){return(Bo=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),wr((a=Va.credentialWithLink(n,r||Er()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",vo(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return zo.apply(this,arguments)}function zo(){return(zo=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:createAuthUri",Pr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(){return(jo=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tr()?Er():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Vo(bt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ho(){return(Ho=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ao(r.auth,a,n),e.next=8,ma(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(){return(Go=kt(xt().mark((function e(t,n,r){var i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ao(i.auth,o,r),e.next=8,wa(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e,t){return qo.apply(this,arguments)}function qo(){return(qo=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=kt(xt().mark((function e(t,n){var r,i,a,o,s,u,c;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=bt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,si(a,Wo(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(e,t,n){return Yo.apply(this,arguments)}function Yo(){return(Yo=kt(xt().mark((function e(t,n,r){var i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,si(t,oa(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qo=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Jo=function(e){_(n,e);var t=k(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return g(n)}(Qo),Zo=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return g(n)}(Qo),$o=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return g(n)}(Jo),es=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return g(n)}(Qo),ts=function(e){_(n,e);var t=k(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return g(n)}(Jo);function ns(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=oi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Qo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Zo(a,i);case"github.com":return new $o(a,i);case"google.com":return new es(a,i);case"twitter.com":return new ts(a,i,e.screenName||null);case"custom":case"anonymous":return new Qo(a,null);default:return new Qo(a,r,i)}}(n)}var rs=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.user=r}return g(e,[{key:"toJSON",value:function(){return{multiFactorSession:He({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),is=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return g(e,[{key:"resolveSignIn",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Wi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return So._fromServerResponse(r,e)}));wr(i.mfaPendingCredential,r,"internal-error");var o=rs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=kt(xt().mark((function e(t){var a,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Za._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return wr(n.user,r,"internal-error"),e.abrupt("return",Za._forOperation(n.user,n.operationType,s));case 17:gr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function as(e,t){return Dr(e,"POST","/v2/accounts/mfaEnrollment:start",Pr(e,t))}function os(e,t){return Dr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pr(e,t))}var ss=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return So._fromServerResponse(t.auth,e)})))}))}return g(e,[{key:"getSession",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=rs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,si(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,si(this.user,Dr(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Pr(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),us=new WeakMap;var cs="__sak",ls=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return g(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(cs,"1"),this.storage.removeItem(cs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var hs=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=tt();return Ri(e)||Ui(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Fi(),e._shouldAllowMigration=!0,e}return g(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);at()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=kt(xt().mark((function e(t,r){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(xt().mark((function e(t){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ls);hs.type="LOCAL";var fs=hs,ds=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return g(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ls);ds.type="SESSION";var ps=ds;function vs(e){return Promise.all(e.map(function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ms=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return g(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=kt(xt().mark((function e(t){var n,r,i,a,o,s,u,c;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,vs(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function gs(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ms.receivers=[];var ys=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return g(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=kt(xt().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=gs("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function _s(){return window}function bs(e){_s().location.href=e}function xs(){return"undefined"!==typeof _s().WorkerGlobalScope&&"function"===typeof _s().importScripts}function ws(){return ks.apply(this,arguments)}function ks(){return(ks=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ss(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Es="firebaseLocalStorageDb",Ts="firebaseLocalStorage",As="fbase_key",Ms=function(){function e(t){d(this,e),this.request=t}return g(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Cs(e,t){return e.transaction([Ts],t?"readwrite":"readonly").objectStore(Ts)}function Is(){var e=indexedDB.deleteDatabase(Es);return new Ms(e).toPromise()}function Rs(){var e=indexedDB.open(Es,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ts,{keyPath:As})}catch(r){n(r)}})),e.addEventListener("success",kt(xt().mark((function n(){var r;return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ts)){n.next=12;break}return r.close(),n.next=5,Is();case 5:return n.t0=t,n.next=8,Rs();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ns(e,t,n){return Ps.apply(this,arguments)}function Ps(){return Ps=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Cs(t,!0).put((He(i={},As,n),He(i,"value",r),i)),e.abrupt("return",new Ms(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}function Ds(e,t){return Ls.apply(this,arguments)}function Ls(){return Ls=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs(t,!1).get(n),e.next=3,new Ms(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}function Os(e,t){var n=Cs(e,!0).delete(t);return new Ms(n).toPromise()}var Us=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return g(e,[{key:"_openDb",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Rs();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=kt(xt().mark((function e(){var t=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ms._getInstance(xs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=kt(xt().mark((function e(n,r){var i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=kt(xt().mark((function e(){var t,n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ws();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ys(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ss()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Rs();case 5:return t=e.sent,e.next=8,Ns(t,cs,"1");case 8:return e.next=10,Os(t,cs);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=kt(xt().mark((function e(t,n){var r=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ns(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ds(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=kt(xt().mark((function e(t){var n=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Os(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Cs(e,!1).getAll();return new Ms(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:if(n=[],r=new Set,0!==t.length){i=A(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Us.type="LOCAL";var Fs=Us;function Bs(e,t){return Dr(e,"POST","/v2/accounts/mfaSignIn:start",Pr(e,t))}function Vs(e,t){return Dr(e,"POST","/v2/accounts/mfaSignIn:finalize",Pr(e,t))}var zs=1e12,js=function(){function e(t){d(this,e),this.auth=t,this.counter=zs,this._widgets=new Map}return g(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Hs(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||zs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||zs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||zs,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Hs=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;wr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return g(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Gs=Ki("rcb"),Ws=new Mr(3e4,6e4),qs=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=_s().grecaptcha)||void 0===t?void 0:t.render)}return g(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return wr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Gr(_s().grecaptcha)?Promise.resolve(_s().grecaptcha):new Promise((function(r,i){var a=_s().setTimeout((function(){i(yr(e,"network-request-failed"))}),Ws.get());_s()[Gs]=function(){_s().clearTimeout(a),delete _s()[Gs];var o=_s().grecaptcha;if(o&&Gr(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(yr(e,"internal-error"))},Xi("".concat("https://www.google.com/recaptcha/api.js?","?").concat(pt({onload:Gs,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(yr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=_s().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Xs=function(){function e(){d(this,e)}return g(e,[{key:"load",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new js(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ks="recaptcha",Ys={theme:"light",type:"image"},Qs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Ys);d(this,e),this.parameters=r,this.type=Ks,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wi(t),this.isInvisible="invisible"===this.parameters.size,wr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;wr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xs:new qs,this.validateStartingState()}return g(e,[{key:"verify",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){wr(!this.parameters.sitekey,this.auth,"argument-error"),wr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),wr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=_s()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){wr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr(Tr()&&!xs(),this.auth,"internal-error"),e.next=3,Js();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Xr(this.auth);case 8:wr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return wr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Js(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Zs=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return g(e,[{key:"confirm",value:function(e){var t=Fa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function $s(){return($s=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wi(t),e.next=3,ru(i,n,bt(r));case 3:return a=e.sent,e.abrupt("return",new Zs(a,(function(e){return vo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eu(e,t,n){return tu.apply(this,arguments)}function tu(){return(tu=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),e.next=3,uo(!1,i,"phone");case 3:return e.next=5,ru(i.auth,n,bt(r));case 5:return a=e.sent,e.abrupt("return",new Zs(a,(function(e){return go(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(){return(nu=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),e.next=3,ru(i.auth,n,bt(r));case 3:return a=e.sent,e.abrupt("return",new Zs(a,(function(e){return _o(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(e,t,n){return iu.apply(this,arguments)}function iu(){return(iu=kt(xt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,wr("string"===typeof a,t,"argument-error"),wr(r.type===Ks,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return wr("enroll"===s.type,t,"internal-error"),e.next=13,as(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return wr("signin"===s.type,t,"internal-error"),wr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Bs(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Na(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}function au(){return(au=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oo(bt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ou=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Wi(t)}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return ru(this.auth,e,bt(t))}}],[{key:"credential",value:function(e,t){return Fa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Fa._fromTokenResponse(n,r):null}}]),e}();function su(e,t){return t?Si(t):(wr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ou.PROVIDER_ID="phone",ou.PHONE_SIGN_IN_METHOD="phone";var uu=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Ca(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ca(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ca(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ra);function cu(e){return fo(e.auth,new uu(e),e.bypassAuthState)}function lu(e){var t=e.auth,n=e.user;return wr(n,t,"internal-error"),lo(n,new uu(e),e.bypassAuthState)}function hu(e){return fu.apply(this,arguments)}function fu(){return(fu=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,wr(r=t.user,n,"internal-error"),e.abrupt("return",oo(r,new uu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var du=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return g(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=kt(xt().mark((function t(n,r){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=kt(xt().mark((function e(t){var n,r,i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cu;case"linkViaPopup":case"linkViaRedirect":return hu;case"reauthViaPopup":case"reauthViaRedirect":return lu;default:gr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),pu=new Mr(2e3,1e4);function vu(e,t,n){return mu.apply(this,arguments)}function mu(){return(mu=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wi(t),br(t,n,za),a=su(i,r),o=new bu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(){return(gu=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return br((i=bt(t)).auth,n,za),a=su(i.auth,r),o=new bu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e,t,n){return _u.apply(this,arguments)}function _u(){return(_u=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return br((i=bt(t)).auth,n,za),a=su(i.auth,r),o=new bu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bu=function(e){_(n,e);var t=k(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=w(s),s}return g(n,[{key:"executeNotNull",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return wr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=kt(xt().mark((function e(){var t,n=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sr(1===this.filter.length,"Popup operations only handle one event"),t=gs(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(yr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(yr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(yr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,pu.get())}()}}]),n}(du);bu.currentPopupAction=null;var xu="pendingRedirect",wu=new Map,ku=function(e){_(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return g(n,[{key:"execute",value:function(){var e=kt(xt().mark((function e(){var t,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=wu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Su(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,er(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:wu.set(this.auth._key(),t);case 21:return this.bypassAuthState||wu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=kt(xt().mark((function e(t){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",er(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",er(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(du);function Su(e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iu(n),i=Cu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t){return Au.apply(this,arguments)}function Au(){return(Au=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cu(t)._set(Iu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t){wu.set(e._key(),t)}function Cu(e){return Si(e._redirectPersistence)}function Iu(e){return Ai(xu,e.config.apiKey,e.name)}function Ru(e,t,n){return function(e,t,n){return Nu.apply(this,arguments)}(e,t,n)}function Nu(){return(Nu=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wi(t),br(t,n,za),e.next=4,i._initializationPromise;case 4:return a=su(i,r),e.next=7,Tu(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t,n){return function(e,t,n){return Du.apply(this,arguments)}(e,t,n)}function Du(){return(Du=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return br((i=bt(t)).auth,n,za),e.next=4,i.auth._initializationPromise;case 4:return a=su(i.auth,r),e.next=7,Tu(a,i.auth);case 7:return e.next=9,zu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t,n){return function(e,t,n){return Ou.apply(this,arguments)}(e,t,n)}function Ou(){return(Ou=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return br((i=bt(t)).auth,n,za),e.next=4,i.auth._initializationPromise;case 4:return a=su(i.auth,r),e.next=7,uo(!1,i,n.providerId);case 7:return e.next=9,Tu(a,i.auth);case 9:return e.next=11,zu(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uu(e,t){return Fu.apply(this,arguments)}function Fu(){return(Fu=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wi(t)._initializationPromise;case 2:return e.abrupt("return",Bu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=kt(xt().mark((function e(t,n){var r,i,a,o,s,u=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Wi(t),a=su(i,n),o=new ku(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function zu(e){return ju.apply(this,arguments)}function ju(){return(ju=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gs("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hu=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return g(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Wu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Gu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Gu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Wu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function qu(e){return Xu.apply(this,arguments)}function Xu(){return Xu=kt(xt().mark((function e(t){var n,r=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Dr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}var Ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yu=/^https?/;function Qu(){return(Qu=kt(xt().mark((function e(t){var n,r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,qu(t);case 4:n=e.sent,r=n.authorizedDomains,i=A(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ju(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:gr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Ju(e){var t=Er(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Yu.test(r))return!1;if(Ku.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Zu=new Mr(3e4,6e4);function $u(){var e=_s().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=f(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ec=null;function tc(e){return ec=ec||function(e){return new Promise((function(t,n){var r,i,a;function o(){$u(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){$u(),n(yr(e,"network-request-failed"))},timeout:Zu.get()})}if(null===(i=null===(r=_s().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=_s().gapi)||void 0===a?void 0:a.load)){var s=Ki("iframefcb");return _s()[s]=function(){gapi.load?o():n(yr(e,"network-request-failed"))},Xi("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ec=null,e}))}(e),ec}var nc=new Mr(5e3,15e3),rc="__/auth/iframe",ic="emulator/auth/iframe",ac={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sc(e){var t=e.config;wr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Cr(t,ic):"https://".concat(e.config.authDomain,"/").concat(rc),r={apiKey:t.apiKey,appName:e.name,v:xn},i=oc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(pt(r).slice(1))}function uc(e){return cc.apply(this,arguments)}function cc(){return cc=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tc(t);case 2:return n=e.sent,wr(r=_s().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:sc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ac,dontclear:!0},(function(e){return new Promise(function(){var n=kt(xt().mark((function n(r,i){var a,o,s;return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){_s().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=yr(t,"network-request-failed"),o=_s().setTimeout((function(){i(a)}),nc.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}var lc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hc=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return g(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function fc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},lc),{width:r.toString(),height:i.toString(),top:a,left:o}),c=tt().toLowerCase();n&&(s=Ni(c)?"_blank":n),Ii(c)&&(t=t||"http://localhost",u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ui(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new hc(null);var f=window.open(t||"",s,h);wr(f,e,"popup-blocked");try{f.focus()}catch(d){}return new hc(f)}var dc="__/auth/handler",pc="emulator/auth/handler",vc=encodeURIComponent("fac");function mc(e,t,n,r,i,a){return gc.apply(this,arguments)}function gc(){return(gc=kt(xt().mark((function e(t,n,r,i,a,o){var s,u,c,h,f,d,p,v,m,g,y,_,b;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wr(t.config.authDomain,t,"auth-domain-config-required"),wr(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:xn,eventId:a},n instanceof za)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",ht(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)h=l(c[u],2),f=h[0],d=h[1],s[f]=d;for(n instanceof ja&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,g=Object.keys(v);m<g.length;m++)y=g[m],void 0===v[y]&&delete v[y];return e.next=10,t._getAppCheckToken();case 10:return _=e.sent,b=_?"#".concat(vc,"=").concat(encodeURIComponent(_)):"",e.abrupt("return","".concat(yc(t),"?").concat(pt(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(e){var t=e.config;return t.emulator?Cr(t,pc):"https://".concat(t.authDomain,"/").concat(dc)}var _c="webStorageSupport",bc=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ps,this._completeRedirectFn=Bu,this._overrideRedirectResult=Mu}return g(e,[{key:"_openPopup",value:function(){var e=kt(xt().mark((function e(t,n,r,i){var a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,mc(t,n,r,Er(),i);case 3:return o=e.sent,e.abrupt("return",fc(t,o,gs()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=kt(xt().mark((function e(t,n,r,i){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,mc(t,n,r,Er(),i);case 4:return bs(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Sr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(t);case 2:return n=e.sent,r=new Hu(t),n.register("authEvent",(function(e){return wr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(_c,{type:_c},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[_c];void 0!==i&&t(!!i),gr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Qu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Fi()||Ri()||Ui()}}]),e}(),xc=bc,wc=function(){function e(t){d(this,e),this.factorId=t}return g(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return kr("unexpected MultiFactorSessionType")}}}]),e}(),kc=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return g(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Dr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Pr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Dr(e,"POST","/v2/accounts/mfaSignIn:finalize",Pr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(wc),Sc=function(){function e(){d(this,e)}return g(e,null,[{key:"assertion",value:function(e){return kc._fromCredential(e)}}]),e}();Sc.FACTOR_ID="phone";var Ec=function(){function e(){d(this,e)}return g(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Tc._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Tc._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,a=r.user.auth,o={idToken:r.credential,totpEnrollmentInfo:{}},Dr(a,"POST","/v2/accounts/mfaEnrollment:start",Pr(a,o));case 4:return i=e.sent,e.abrupt("return",Ac._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}var a,o}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ec.FACTOR_ID="totp";var Tc=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return g(n,[{key:"_finalizeEnroll",value:function(){var e=kt(xt().mark((function e(t,n,r){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",os(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Vs(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(wc),Ac=function(){function e(t,n,r,i,a,o,s){d(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return g(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Mc(e)||Mc(t))&&(r=!0),r&&(Mc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Mc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Mc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Cc="@firebase/auth",Ic="1.5.1",Rc=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return g(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){wr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Nc;!function(e){var t;null===(t=Je())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Pc(){return window}Nc="Browser",pn(new St("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;wr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:Nc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bi(Nc)},l=new Gi(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Si);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),pn(new St("auth-internal",(function(e){return function(e){return new Rc(e)}(Wi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),An(Cc,Ic,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Nc)),An(Cc,Ic,"esm2017");var Dc=2e3;function Lc(e,t,n){return Oc.apply(this,arguments)}function Oc(){return(Oc=kt(xt().mark((function e(t,n,r){var i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pc(),o=a.BuildInfo,Sr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,jc(n.sessionId);case 4:return s=e.sent,u={},Ui()?u.ibi=o.packageName:Di()?u.apn=o.packageName:gr(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",mc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uc(){return(Uc=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pc(),r=n.BuildInfo,i={},Ui()?i.iosBundleId=r.packageName:Di()?i.androidPackageName=r.packageName:gr(t,"operation-not-supported-in-this-environment"),e.next=5,qu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fc(e){var t=Pc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Bc(e,t,n){return Vc.apply(this,arguments)}function Vc(){return(Vc=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(yr(t,"redirect-cancelled-by-user"))}),Dc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Di()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})))).apply(this,arguments)}function zc(e){var t,n,r,i,a,o,s,u,c,l,h=Pc();wr("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),wr("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),wr("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wr("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wr("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function jc(e){return Hc.apply(this,arguments)}function Hc(){return(Hc=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(e){if(Sr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Wc=20,qc=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return g(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),er(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Hu);function Xc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Zc(),postBody:null,tenantId:e.tenantId,error:yr(e,"no-auth-event")}}function Kc(e,t){return $c()._set(el(e),t)}function Yc(e){return Qc.apply(this,arguments)}function Qc(){return(Qc=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$c()._get(el(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,$c()._remove(el(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jc(e,t){var n,r,i=function(e){var t=tl(e),n=t.link?decodeURIComponent(t.link):void 0,r=tl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return tl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=tl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?yr(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Zc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Wc;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function $c(){return Si(fs)}function el(e){return Ai("authEvent",e.config.apiKey,e.name)}function tl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=T(e.split("?"));t[0];return vt(t.slice(1).join("?"))}var nl=function(){function e(){d(this,e),this._redirectPersistence=ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bu,this._overrideRedirectResult=Mu}return g(e,[{key:"_initialize",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new qc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){gr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=kt(xt().mark((function e(t,n,r,i){var a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),wu.clear(),e.next=10,this._originValidation(t);case 10:return o=Xc(t,r,i),e.next=13,Kc(t,o);case 13:return e.next=15,Lc(t,o,n);case 15:return s=e.sent,e.next=18,Fc(s);case 18:return u=e.sent,e.abrupt("return",Bc(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Uc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Pc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(kt(xt().mark((function n(){return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Yc(e);case 2:t.onEvent(il());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=kt(xt().mark((function n(r){var i,a;return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Yc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Jc(i,r.url)),t.onEvent(a||il());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Pc().handleOpenURL=function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),rl=nl;function il(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yr("no-auth-event")}}var al=1e3;function ol(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return!("file:"!==ol()&&"ionic:"!==ol()&&"capacitor:"!==ol()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ul(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return at()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/Edge\/\d+/.test(e)}(e)}function cl(){try{var e=self.localStorage,t=gs();if(e)return e.setItem(t,"1"),e.removeItem(t),!ul()||ot()}catch(n){return ll()&&ot()}return!1}function ll(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function hl(){return("http:"===ol()||"https:"===ol()||rt()||sl())&&!(it()||nt())&&cl()&&!ll()}function fl(){return sl()&&"undefined"!==typeof document}function dl(){return pl.apply(this,arguments)}function pl(){return(pl=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),al);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vl={LOCAL:"local",NONE:"none",SESSION:"session"},ml=wr,gl="persistence";function yl(e,t){ml(Object.values(vl).includes(t),e,"invalid-persistence-type"),it()?ml(t!==vl.SESSION,e,"unsupported-persistence-type"):nt()?ml(t===vl.NONE,e,"unsupported-persistence-type"):ll()?ml(t===vl.NONE||t===vl.LOCAL&&ot(),e,"unsupported-persistence-type"):ml(t===vl.NONE||cl(),e,"unsupported-persistence-type")}function _l(e){return bl.apply(this,arguments)}function bl(){return(bl=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=xl(),r=Ai(gl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var wl=wr,kl=function(){function e(){d(this,e),this.browserResolver=Si(xc),this.cordovaResolver=Si(rl),this.underlyingResolver=null,this._redirectPersistence=ps,this._completeRedirectFn=Bu,this._overrideRedirectResult=Mu}return g(e,[{key:"_initialize",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=kt(xt().mark((function e(t,n,r,i){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=kt(xt().mark((function e(t,n,r,i){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return fl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return wl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Sl(e){return e.unwrap()}function El(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Il(e,function(e,t){var n,r=bt(e),i=t;return wr(t.customData.operationType,r,"argument-error"),wr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),is._fromError(r,i)}(e,t));else if(r){var i=Tl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Tl(e){var t=(e instanceof st?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof st)&&"temporaryProof"in t&&"phoneNumber"in t)return ou.credentialFromResult(e);var n,r=t.providerId;if(!r||r===rr.PASSWORD)return null;switch(r){case rr.GOOGLE:n=Wa;break;case rr.FACEBOOK:n=Ga;break;case rr.GITHUB:n=qa;break;case rr.TWITTER:n=Ya;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Xa._create(r,s):Ra._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Ha(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof st?n.credentialFromError(e):n.credentialFromResult(e)}function Al(e,t){return t.catch((function(t){throw t instanceof st&&El(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Tl(t)),additionalUserInfo:ns(e),user:Rl.getOrCreate(r)}}))}function Ml(e,t){return Cl.apply(this,arguments)}function Cl(){return(Cl=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Al(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Il=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return g(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Al(Sl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Rl=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=bt(e);return us.has(t)||us.set(t,ss._fromUser(t)),us.get(t)}(t)}return g(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(this.auth,go(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ml(this.auth,eu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(this.auth,yu(this._delegate,t,kl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(Wi(this.auth));case 2:return e.abrupt("return",Lu(this._delegate,t,kl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(this.auth,_o(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ml(this.auth,function(e,t,n){return nu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Al(this.auth,function(e,t,n){return gu.apply(this,arguments)}(this._delegate,e,kl))}},{key:"reauthenticateWithRedirect",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(Wi(this.auth));case 2:return e.abrupt("return",Pu(this._delegate,t,kl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ho.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ko(bt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ko(bt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return au.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Rl.USER_MAP=new WeakMap;var Nl=wr,Pl=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Nl(r,"invalid-api-key",{appName:t.name}),Nl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?kl:void 0;this._delegate=n.initialize({options:{persistence:Ll(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(hr),this.linkUnderlyingAuth()}return g(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Rl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ea(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return No.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Po(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ro.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(this._delegate,Oo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return jo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ba.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nl(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Uu(this._delegate,kl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Al(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Wi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Dl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Dl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Fo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Io.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yl(this._delegate,t),e.t0=t,e.next=e.t0===vl.SESSION?4:e.t0===vl.LOCAL?6:e.t0===vl.NONE?11:13;break;case 4:return n=ps,e.abrupt("break",14);case 6:return e.next=8,Si(Fs)._isAvailable();case 8:return r=e.sent,n=r?Fs:fs,e.abrupt("break",14);case 11:return n=Ti,e.abrupt("break",14);case 13:return e.abrupt("return",gr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Al(this._delegate,function(e){return eo.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Al(this._delegate,vo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Al(this._delegate,function(e,t){return ko.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Al(this._delegate,function(e,t,n){return vo(bt(e),Va.credential(t,n)).catch(function(){var t=kt(xt().mark((function t(n){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Mo(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Al(this._delegate,function(e,t,n){return Bo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ml(this._delegate,function(e,t,n){return $s.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nl(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Al(this._delegate,vu(this._delegate,t,kl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nl(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_l(this._delegate);case 3:return e.abrupt("return",Ru(this._delegate,t,kl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Lo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Dl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Rl.getOrCreate(e))},error:t,complete:n}}function Ll(e,t){var n=function(e,t){var n=xl();if(!n)return[];var r=Ai(gl,e,t);switch(n.getItem(r)){case vl.NONE:return[Ti];case vl.LOCAL:return[Fs,ps];case vl.SESSION:return[ps];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Fs)||n.push(Fs),"undefined"!==typeof window)for(var r=0,i=[fs,ps];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ti)||n.push(Ti),n}Pl.Persistence=vl;var Ol=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new ou(Sl($n.auth()))}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return ou.credential(e,t)}}]),e}();Ol.PHONE_SIGN_IN_METHOD=ou.PHONE_SIGN_IN_METHOD,Ol.PROVIDER_ID=ou.PROVIDER_ID;var Ul,Fl=wr,Bl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$n.app();d(this,e),Fl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Qs(i.auth(),t,n),this.type=this._delegate.type}return g(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ul=$n).INTERNAL.registerComponent(new St("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Pl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ir,PASSWORD_RESET:ar,RECOVER_EMAIL:or,REVERT_SECOND_FACTOR_ADDITION:sr,VERIFY_AND_CHANGE_EMAIL:ur,VERIFY_EMAIL:cr}},EmailAuthProvider:Va,FacebookAuthProvider:Ga,GithubAuthProvider:qa,GoogleAuthProvider:Wa,OAuthProvider:Ha,SAMLAuthProvider:Ka,PhoneAuthProvider:Ol,PhoneMultiFactorGenerator:Sc,RecaptchaVerifier:Bl,TwitterAuthProvider:Ya,Auth:Pl,AuthCredential:ra,Error:st}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ul.registerVersion("@firebase/auth-compat","0.5.1");var Vl,zl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},jl={},Hl=Hl||{},Gl=zl||self;function Wl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ql(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xl="closure_uid_"+(1e9*Math.random()>>>0),Kl=0;function Yl(e,t,n){return e.call.apply(e.bind,arguments)}function Ql(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jl(e,t,n){return(Jl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yl:Ql).apply(null,arguments)}function Zl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function $l(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function eh(){this.s=this.s,this.o=this.o}eh.prototype.s=!1,eh.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Xl)&&e[Xl]||(e[Xl]=++Kl))},eh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var th=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function nh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function rh(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Wl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ih(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ih.prototype.h=function(){this.defaultPrevented=!0};var ah=function(){if(!Gl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};Gl.addEventListener("test",n,t),Gl.removeEventListener("test",n,t)}catch(n){}return e}();function oh(e){return/^[\s\xa0]*$/.test(e)}function sh(){var e=Gl.navigator;return e&&(e=e.userAgent)?e:""}function uh(e){return-1!=sh().indexOf(e)}function ch(e){return ch[" "](e),e}ch[" "]=function(){};var lh,hh,fh=uh("Opera"),dh=uh("Trident")||uh("MSIE"),ph=uh("Edge"),vh=ph||dh,mh=uh("Gecko")&&!(-1!=sh().toLowerCase().indexOf("webkit")&&!uh("Edge"))&&!(uh("Trident")||uh("MSIE"))&&!uh("Edge"),gh=-1!=sh().toLowerCase().indexOf("webkit")&&!uh("Edge");function yh(){var e=Gl.document;return e?e.documentMode:void 0}e:{var _h="",bh=function(){var e=sh();return mh?/rv:([^\);]+)(\)|;)/.exec(e):ph?/Edge\/([\d\.]+)/.exec(e):dh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):gh?/WebKit\/(\S+)/.exec(e):fh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(bh&&(_h=bh?bh[1]:""),dh){var xh=yh();if(null!=xh&&xh>parseFloat(_h)){lh=String(xh);break e}}lh=_h}if(Gl.document&&dh){var wh=yh();hh=wh||(parseInt(lh,10)||void 0)}else hh=void 0;var kh=hh;function Sh(e,t){if(ih.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(mh){e:{try{ch(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Eh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sh.$.h.call(this)}}$l(Sh,ih);var Eh={2:"touch",3:"pen",4:"mouse"};Sh.prototype.h=function(){Sh.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Th="closure_listenable_"+(1e6*Math.random()|0),Ah=0;function Mh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ah,this.fa=this.ia=!1}function Ch(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ih(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Rh(e){var t={};for(var n in e)t[n]=e[n];return t}var Nh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ph(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Nh.length;a++)n=Nh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Dh(e){this.src=e,this.g={},this.h=0}function Lh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=th(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ch(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Oh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Dh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Oh(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Mh(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Uh="closure_lm_"+(1e6*Math.random()|0),Fh={};function Bh(e,t,n,r,i){if(r&&r.once)return zh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Bh(e,t[a],n,r,i);return null}return n=Kh(n),e&&e[Th]?e.O(t,n,ql(r)?!!r.capture:!!r,i):Vh(e,t,n,!1,r,i)}function Vh(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ql(i)?!!i.capture:!!i,s=qh(e);if(s||(e[Uh]=s=new Dh(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Wh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ah||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)zh(e,t[a],n,r,i);return null}return n=Kh(n),e&&e[Th]?e.P(t,n,ql(r)?!!r.capture:!!r,i):Vh(e,t,n,!0,r,i)}function jh(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)jh(e,t[a],n,r,i);else r=ql(r)?!!r.capture:!!r,n=Kh(n),e&&e[Th]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Oh(a=e.g[t],n,r,i))&&(Ch(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=qh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Oh(t,n,r,i)),(n=-1<e?t[e]:null)&&Hh(n))}function Hh(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Th])Lh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=qh(t))?(Lh(n,e),0==n.h&&(n.src=null,t[Uh]=null)):Ch(e)}}}function Gh(e){return e in Fh?Fh[e]:Fh[e]="on"+e}function Wh(e,t){if(e.fa)e=!0;else{t=new Sh(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Hh(e),e=n.call(r,t)}return e}function qh(e){return(e=e[Uh])instanceof Dh?e:null}var Xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kh(e){return"function"===typeof e?e:(e[Xh]||(e[Xh]=function(t){return e.handleEvent(t)}),e[Xh])}function Yh(){eh.call(this),this.i=new Dh(this),this.S=this,this.J=null}function Qh(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ih(t,e);else if(t instanceof ih)t.target=t.target||e;else{var i=t;Ph(t=new ih(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Jh(o,r,!0,t)&&i}if(i=Jh(o=t.g=e,r,!0,t)&&i,i=Jh(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Jh(o=t.g=n[a],r,!1,t)&&i}function Jh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Lh(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}$l(Yh,eh),Yh.prototype[Th]=!0,Yh.prototype.removeEventListener=function(e,t,n,r){jh(this,e,t,n,r)},Yh.prototype.N=function(){if(Yh.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ch(n[r]);delete t.g[e],t.h--}}this.J=null},Yh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Yh.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Zh=Gl.JSON.stringify,$h=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return g(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function ef(){var e=cf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var tf=function(){function e(){d(this,e),this.h=this.g=null}return g(e,[{key:"add",value:function(e,t){var n=nf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),nf=new $h((function(){return new rf}),(function(e){return e.reset()})),rf=function(){function e(){d(this,e),this.next=this.g=this.h=null}return g(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function af(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function of(e){Gl.setTimeout((function(){throw e}),0)}var sf,uf=!1,cf=new tf,lf=function(){var e=Gl.Promise.resolve(void 0);sf=function(){e.then(hf)}},hf=function(){for(var e;e=ef();){try{e.h.call(e.g)}catch(n){of(n)}var t=nf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}uf=!1};function ff(e,t){Yh.call(this),this.h=e||1,this.g=t||Gl,this.j=Jl(this.qb,this),this.l=Date.now()}function df(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function pf(e,t,n){if("function"===typeof e)n&&(e=Jl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gl.setTimeout(e,t||0)}function vf(e){e.g=pf((function(){e.g=null,e.i&&(e.i=!1,vf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}$l(ff,Yh),(Vl=ff.prototype).ga=!1,Vl.T=null,Vl.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Qh(this,"tick"),this.ga&&(df(this),this.start()))}},Vl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vl.N=function(){ff.$.N.call(this),df(this),delete this.g};var mf=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return g(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vf(this)}},{key:"N",value:function(){er(b(n.prototype),"N",this).call(this),this.g&&(Gl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(eh);function gf(e){eh.call(this),this.h=e,this.g={}}$l(gf,eh);var yf=[];function _f(e,t,n,r){Array.isArray(n)||(n&&(yf[0]=n.toString()),n=yf);for(var i=0;i<n.length;i++){var a=Bh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function bf(e){Ih(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hh(e)}),e),e.g={}}function xf(){this.g=!0}function wf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Zh(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}gf.prototype.N=function(){gf.$.N.call(this),bf(this)},gf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xf.prototype.Ea=function(){this.g=!1},xf.prototype.info=function(){};var kf={},Sf=null;function Ef(){return Sf=Sf||new Yh}function Tf(e){ih.call(this,kf.Ta,e)}function Af(e){var t=Ef();Qh(t,new Tf(t))}function Mf(e,t){ih.call(this,kf.STAT_EVENT,e),this.stat=t}function Cf(e){var t=Ef();Qh(t,new Mf(t,e))}function If(e,t){ih.call(this,kf.Ua,e),this.size=t}function Rf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gl.setTimeout((function(){e()}),t)}kf.Ta="serverreachability",$l(Tf,ih),kf.STAT_EVENT="statevent",$l(Mf,ih),kf.Ua="timingevent",$l(If,ih);var Nf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Pf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Df(){}function Lf(e){return e.h||(e.h=e.i())}function Of(){}Df.prototype.h=null;var Uf,Ff={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bf(){ih.call(this,"d")}function Vf(){ih.call(this,"c")}function zf(){}function jf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new gf(this),this.P=Gf,e=vh?125:void 0,this.V=new ff(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Hf}function Hf(){this.i=null,this.g="",this.h=!1}$l(Bf,ih),$l(Vf,ih),$l(zf,Df),zf.prototype.g=function(){return new XMLHttpRequest},zf.prototype.i=function(){return{}},Uf=new zf;var Gf=45e3,Wf={},qf={};function Xf(e,t,n){e.L=1,e.A=fd(sd(t)),e.u=n,e.S=!0,Kf(e,null)}function Kf(e,t){e.G=Date.now(),Zf(e),e.B=sd(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ed(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Hf,e.g=Tp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new mf(Jl(e.Pa,e,e.g),e.O)),_f(e.U,e.g,"readystatechange",e.nb),t=e.I?Rh(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Af(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Yf(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Qf(e,t,n){for(var r,i=!0;!e.J&&e.o<n.length;){if((r=Jf(e,n))==qf){4==t&&(e.s=4,Cf(14),i=!1),wf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Wf){e.s=4,Cf(15),wf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}wf(e.j,e.m,r,null),rd(e,r)}Yf(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Cf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yp(t),t.M=!0,Cf(11))):(wf(e.j,e.m,n,"[Invalid Chunked Response]"),nd(e),td(e))}function Jf(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?qf:(n=Number(t.substring(n,r)),isNaN(n)?Wf:(r+=1)+n>t.length?qf:(t=t.slice(r,r+n),e.o=r+n,t))}function Zf(e){e.Y=Date.now()+e.P,$f(e,e.P)}function $f(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Rf(Jl(e.lb,e),t)}function ed(e){e.C&&(Gl.clearTimeout(e.C),e.C=null)}function td(e){0==e.l.H||e.J||xp(e.l,e)}function nd(e){ed(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,df(e.V),bf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function rd(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Nd(n.i,e)))if(!e.K&&Nd(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;bp(n),lp(n)}gp(n),Cf(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Rf(Jl(n.ib,n),6e3));if(1>=Rd(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else kp(n,11)}else if((e.K||n.g==e)&&bp(n),!oh(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Pd(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,hd(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Ep(r,r.J?r.pa:null,r.Y),d.K){Dd(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.C&&(ed(p),Zf(p)),r.g=d}else mp(r);0<n.j.length&&fp(n)}else"stop"!=a[0]&&"close"!=a[0]||kp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?kp(n,7):cp(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Af()}catch(a){}}function id(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Wl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Wl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Vl=jf.prototype).setTimeout=function(e){this.P=e},Vl.nb=function(e){e=e.target;var t=this.M;t&&3==rp(e)?t.l():this.Pa(e)},Vl.Pa=function(e){try{if(e==this.g)e:{var t=rp(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||vh||this.g&&(this.h.h||this.g.ja()||ip(this.g)))){this.J||4!=t||7==n||Af(),ed(this);var r=this.g.da();this.ca=r;t:if(Yf(this)){var i=ip(this.g);e="";var a=i.length,o=4==rp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){nd(this),td(this);var s="";break t}this.h.i=new Gl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.v,this.B,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oh(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.s=3,Cf(12),nd(this),td(this);break e}wf(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rd(this,r)}this.S?(Qf(this,t,s),vh&&this.i&&3==t&&(_f(this.U,this.V,"tick",this.mb),this.V.start())):(wf(this.j,this.m,s,null),rd(this,s)),4==t&&nd(this),this.i&&!this.J&&(4==t?xp(this.l,this):(this.i=!1,Zf(this)))}else(function(e){var t={};e=(e.g&&2<=rp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!oh(e[n])){var r=af(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.s=3,Cf(12)):(this.s=0,Cf(13)),nd(this),td(this)}}}catch(t){}},Vl.mb=function(){if(this.g){var e=rp(this.g),t=this.g.ja();this.o<t.length&&(ed(this),Qf(this,e,t),this.i&&4!=e&&Zf(this))}},Vl.cancel=function(){this.J=!0,nd(this)},Vl.lb=function(){this.C=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Af(),Cf(17)),nd(this),this.s=2,td(this)):$f(this,this.Y-e)};var ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function od(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof od){this.h=e.h,ud(this,e.j),this.s=e.s,this.g=e.g,cd(this,e.m),this.l=e.l;var t=e.i,n=new xd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ld(this,n),this.o=e.o}else e&&(t=String(e).match(ad))?(this.h=!1,ud(this,t[1]||"",!0),this.s=dd(t[2]||""),this.g=dd(t[3]||"",!0),cd(this,t[4]),this.l=dd(t[5]||"",!0),ld(this,t[6]||"",!0),this.o=dd(t[7]||"")):(this.h=!1,this.i=new xd(null,this.h))}function sd(e){return new od(e)}function ud(e,t,n){e.j=n?dd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function cd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ld(e,t,n){t instanceof xd?(e.i=t,function(e,t){t&&!e.j&&(wd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kd(this,t),Ed(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pd(t,_d)),e.i=new xd(t,e.h))}function hd(e,t,n){e.i.set(t,n)}function fd(e){return hd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}od.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pd(t,md,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(pd(t,md,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pd(n,"/"==n.charAt(0)?yd:gd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",pd(n,bd)),e.join("")};var md=/[#\/\?@]/g,gd=/[#\?:]/g,yd=/[#\?]/g,_d=/[#\?@]/g,bd=/#/g;function xd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wd(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kd(e,t){wd(e),t=Td(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Sd(e,t){return wd(e),t=Td(e,t),e.g.has(t)}function Ed(e,t,n){kd(e,t),0<n.length&&(e.i=null,e.g.set(Td(e,t),nh(n)),e.h+=n.length)}function Td(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vl=xd.prototype).add=function(e,t){wd(this),this.i=null,e=Td(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vl.forEach=function(e,t){wd(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Vl.ta=function(){wd(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vl.Z=function(e){wd(this);var t=[];if("string"===typeof e)Sd(this,e)&&(t=t.concat(this.g.get(Td(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Vl.set=function(e,t){return wd(this),this.i=null,Sd(this,e=Td(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vl.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Vl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ad=g((function e(t,n){d(this,e),this.g=t,this.map=n}));function Md(e){this.l=e||Cd,Gl.PerformanceNavigationTiming?e=0<(e=Gl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gl.g&&Gl.g.Ka&&Gl.g.Ka()&&Gl.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cd=10;function Id(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Rd(e){return e.h?1:e.g?e.g.size:0}function Nd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Pd(e,t){e.g?e.g.add(t):e.h=t}function Dd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ld(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=A(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return nh(e.i)}Md.prototype.cancel=function(){if(this.i=Ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=A(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Od,Ud=function(){function e(){d(this,e)}return g(e,[{key:"stringify",value:function(e){return Gl.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Gl.JSON.parse(e,void 0)}}]),e}();function Fd(){this.g=new Ud}function Bd(e,t,n){var r=n||"";try{id(e,(function(e,n){var i=e;ql(e)&&(i=Zh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function zd(e){this.l=e.ec||null,this.j=e.ob||!1}function jd(e,t){Yh.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Hd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$l(zd,Df),zd.prototype.g=function(){return new jd(this.l,this.j)},zd.prototype.i=(Od={},function(){return Od}),$l(jd,Yh);var Hd=0;function Gd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Wd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qd(e)}function qd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vl=jd.prototype).open=function(e,t){if(this.readyState!=Hd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qd(this)},Vl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Gl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Vl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wd(this)),this.readyState=Hd},Vl.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qd(this)),this.g&&(this.readyState=3,qd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Gl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Vl.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wd(this):qd(this),3==this.readyState&&Gd(this)}},Vl.Za=function(e){this.g&&(this.response=this.responseText=e,Wd(this))},Vl.Ya=function(e){this.g&&(this.response=e,Wd(this))},Vl.ka=function(){this.g&&Wd(this)},Vl.setRequestHeader=function(e,t){this.v.append(e,t)},Vl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Xd=Gl.JSON.parse;function Kd(e){Yh.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Yd,this.L=this.M=!1}$l(Kd,Yh);var Yd="",Qd=/^https?$/i,Jd=["POST","PUT"];function Zd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$d(e),tp(e)}function $d(e){e.F||(e.F=!0,Qh(e,"complete"),Qh(e,"error"))}function ep(e){if(e.h&&"undefined"!=typeof Hl&&(!e.C[1]||4!=rp(e)||2!=e.da()))if(e.v&&4==rp(e))pf(e.La,0,e);else if(Qh(e,"readystatechange"),4==rp(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ad)[1]||null;!a&&Gl.self&&Gl.self.location&&(a=Gl.self.location.protocol.slice(0,-1)),i=!Qd.test(a?a.toLowerCase():"")}t=i}if(t)Qh(e,"complete"),Qh(e,"success");else{e.m=6;try{var o=2<rp(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",$d(e)}}finally{tp(e)}}}function tp(e,t){if(e.g){np(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Qh(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function np(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Gl.clearTimeout(e.A),e.A=null)}function rp(e){return e.g?e.g.readyState:0}function ip(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Yd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(hv){return null}}function ap(e){var t="";return Ih(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function op(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ap(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hd(e,t,n))}function sp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function up(e){this.Ga=0,this.j=[],this.l=new xf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sp("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sp("baseRetryDelayMs",5e3,e),this.hb=sp("retryDelaySeedMs",1e4,e),this.eb=sp("forwardChannelMaxRetries",2,e),this.xa=sp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Md(e&&e.concurrentRequestLimit),this.Ja=new Fd,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function cp(e){if(hp(e),3==e.H){var t=e.W++,n=sd(e.I);if(hd(n,"SID",e.K),hd(n,"RID",t),hd(n,"TYPE","terminate"),pp(e,n),(t=new jf(e,e.l,t)).L=2,t.A=fd(sd(n)),n=!1,Gl.navigator&&Gl.navigator.sendBeacon)try{n=Gl.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Gl.Image&&((new Image).src=t.A,n=!0),n||(t.g=Tp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Zf(t)}Sp(e)}function lp(e){e.g&&(yp(e),e.g.cancel(),e.g=null)}function hp(e){lp(e),e.u&&(Gl.clearTimeout(e.u),e.u=null),bp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gl.clearTimeout(e.m),e.m=null)}function fp(e){if(!Id(e.i)&&!e.m){e.m=!0;var t=e.Na;sf||lf(),uf||(sf(),uf=!0),cf.add(t,e),e.C=0}}function dp(e,t){var n;n=t?t.m:e.W++;var r=sd(e.I);hd(r,"SID",e.K),hd(r,"RID",n),hd(r,"AID",e.V),pp(e,r),e.o&&e.s&&op(r,e.o,e.s),n=new jf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=vp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Pd(e.i,n),Xf(n,r,t)}function pp(e,t){e.na&&Ih(e.na,(function(e,n){hd(t,n,e)})),e.h&&id({},(function(e,n){hd(t,n,e)}))}function vp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jl(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Bd(l,o,"req"+c+"_")}catch(Cm){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function mp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sf||lf(),uf||(sf(),uf=!0),cf.add(t,e),e.A=0}}function gp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Rf(Jl(e.Ma,e),wp(e,e.A)),e.A++,!0)}function yp(e){null!=e.B&&(Gl.clearTimeout(e.B),e.B=null)}function _p(e){e.g=new jf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=sd(e.wa);hd(t,"RID","rpc"),hd(t,"SID",e.K),hd(t,"AID",e.V),hd(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&hd(t,"TO",e.qa),hd(t,"TYPE","xmlhttp"),pp(e,t),e.o&&e.s&&op(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=fd(sd(t)),n.u=null,n.S=!0,Kf(n,e)}function bp(e){null!=e.v&&(Gl.clearTimeout(e.v),e.v=null)}function xp(e,t){var n=null;if(e.g==t){bp(e),yp(e),e.g=null;var r=2}else{if(!Nd(e.i,t))return;n=t.F,Dd(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Qh(r=Ef(),new If(r,n)),fp(e)}else mp(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Rd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Rf(Jl(e.Na,e,t),wp(e,e.C)),e.C++,!0))}(e,t)||2==r&&gp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:kp(e,5);break;case 4:kp(e,10);break;case 3:kp(e,6);break;default:kp(e,2)}}function wp(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function kp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Jl(e.pb,e);n||(n=new od("//www.google.com/images/cleardot.gif"),Gl.location&&"http"==Gl.location.protocol||ud(n,"https"),fd(n)),function(e,t){var n=new xf;if(Gl.Image){var r=new Image;r.onload=Zl(Vd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zl(Vd,n,r,"TestLoadImage: error",!1,t),r.onabort=Zl(Vd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zl(Vd,n,r,"TestLoadImage: timeout",!1,t),Gl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cf(2);e.H=0,e.h&&e.h.za(t),Sp(e),hp(e)}function Sp(e){if(e.H=0,e.ma=[],e.h){var t=Ld(e.i);0==t.length&&0==e.j.length||(rh(e.ma,t),rh(e.ma,e.j),e.i.i.length=0,nh(e.j),e.j.length=0),e.h.ya()}}function Ep(e,t,n){var r=n instanceof od?sd(n):new od(n);if(""!=r.g)t&&(r.g=t+"."+r.g),cd(r,r.m);else{var i=Gl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new od(null);r&&ud(a,r),t&&(a.g=t),i&&cd(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&hd(r,n,t),hd(r,"VER",e.ra),pp(e,r),r}function Tp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Kd(new zd({ob:n})):new Kd(e.va)).Oa(e.J),t}function Ap(){}function Mp(){if(dh&&!(10<=Number(kh)))throw Error("Environmental error: no available transport.")}function Cp(e,t){Yh.call(this),this.g=new up(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!oh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!oh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Np(this)}function Ip(e){Bf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Rp(){Vf.call(this),this.status=1}function Np(e){this.g=e}function Pp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Dp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Lp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Vl=Kd.prototype).Oa=function(e){this.M=e},Vl.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Uf.g(),this.C=this.u?Lf(this.u):Lf(Uf),this.g.onreadystatechange=Jl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Zd(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=A(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Gl.FormData&&e instanceof Gl.FormData,!(0<=th(Jd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=A(n);try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{np(this),0<this.B&&((this.L=function(e){return dh&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jl(this.ua,this)):this.A=pf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Zd(this,s)}},Vl.ua=function(){"undefined"!=typeof Hl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qh(this,"timeout"),this.abort(8))},Vl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Qh(this,"complete"),Qh(this,"abort"),tp(this))},Vl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tp(this,!0)),Kd.$.N.call(this)},Vl.La=function(){this.s||(this.G||this.v||this.l?ep(this):this.kb())},Vl.kb=function(){ep(this)},Vl.isActive=function(){return!!this.g},Vl.da=function(){try{return 2<rp(this)?this.g.status:-1}catch(Od){return-1}},Vl.ja=function(){try{return this.g?this.g.responseText:""}catch(Od){return""}},Vl.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Xd(t)}},Vl.Ia=function(){return this.m},Vl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vl=up.prototype).ra=8,Vl.H=1,Vl.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new jf(this,this.l,e),n=this.s;if(this.U&&(n?Ph(n=Rh(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=vp(this,t,r),hd(i=sd(this.I),"RID",e),hd(i,"CVER",22),this.F&&hd(i,"X-HTTP-Session-Id",this.F),pp(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(ap(n)))+"&"+r:this.o&&op(i,this.o,n)),Pd(this.i,t),this.bb&&hd(i,"TYPE","init"),this.P?(hd(i,"$req",r),hd(i,"SID","null"),t.aa=!0,Xf(t,i,null)):Xf(t,i,r),this.H=2}}else 3==this.H&&(e?dp(this,e):0==this.j.length||Id(this.i)||dp(this))},Vl.Ma=function(){if(this.u=null,_p(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Rf(Jl(this.jb,this),e)}},Vl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cf(10),lp(this),_p(this))},Vl.ib=function(){null!=this.v&&(this.v=null,lp(this),gp(this),Cf(19))},Vl.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Cf(2)):(this.l.info("Failed to ping google.com"),Cf(1))},Vl.isActive=function(){return!!this.h&&this.h.isActive(this)},(Vl=Ap.prototype).Ba=function(){},Vl.Aa=function(){},Vl.za=function(){},Vl.ya=function(){},Vl.isActive=function(){return!0},Vl.Va=function(){},Mp.prototype.g=function(e,t){return new Cp(e,t)},$l(Cp,Yh),Cp.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Cf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ep(e,null,e.Y),fp(e)},Cp.prototype.close=function(){cp(this.g)},Cp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Zh(e),e=n);t.j.push(new Ad(t.fb++,e)),3==t.H&&fp(t)},Cp.prototype.N=function(){this.g.h=null,delete this.j,cp(this.g),delete this.g,Cp.$.N.call(this)},$l(Ip,Bf),$l(Rp,Vf),$l(Np,Ap),Np.prototype.Ba=function(){Qh(this.g,"a")},Np.prototype.Aa=function(e){Qh(this.g,new Ip(e))},Np.prototype.za=function(e){Qh(this.g,new Rp)},Np.prototype.ya=function(){Qh(this.g,"b")},$l(Pp,(function(){this.blockSize=-1})),Pp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Pp.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Dp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Dp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Dp(this,r),i=0;break}}this.h=i,this.i+=t},Pp.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Op={};function Up(e){return-128<=e&&128>e?function(e,t){var n=Op;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Lp([0|e],0>e?-1:0)})):new Lp([0|e],0>e?-1:0)}function Fp(e){if(isNaN(e)||!isFinite(e))return Vp;if(0>e)return Wp(Fp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Bp;return new Lp(t,0)}var Bp=4294967296,Vp=Up(0),zp=Up(1),jp=Up(16777216);function Hp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Gp(e){return-1==e.h}function Wp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Lp(n,~e.h).add(zp)}function qp(e,t){return e.add(Wp(t))}function Xp(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Kp(e,t){this.g=e,this.h=t}function Yp(e,t){if(Hp(t))throw Error("division by zero");if(Hp(e))return new Kp(Vp,Vp);if(Gp(e))return t=Yp(Wp(e),t),new Kp(Wp(t.g),Wp(t.h));if(Gp(t))return t=Yp(e,Wp(t)),new Kp(Wp(t.g),t.h);if(30<e.g.length){if(Gp(e)||Gp(t))throw Error("slowDivide_ only works with positive integers.");for(var n=zp,r=t;0>=r.X(e);)n=Qp(n),r=Qp(r);var i=Jp(n,1),a=Jp(r,1);for(r=Jp(r,2),n=Jp(n,2);!Hp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Jp(r,1),n=Jp(n,1)}return t=qp(e,i.R(t)),new Kp(i,t)}for(i=Vp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Fp(n)).R(t);Gp(o)||0<o.X(e);)o=(a=Fp(n-=r)).R(t);Hp(a)&&(a=zp),i=i.add(a),e=qp(e,o)}return new Kp(i,e)}function Qp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Lp(n,e.h)}function Jp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Lp(i,e.h)}(Vl=Lp.prototype).ea=function(){if(Gp(this))return-Wp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Bp+r)*t,t*=Bp}return e},Vl.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Hp(this))return"0";if(Gp(this))return"-"+Wp(this).toString(e);for(var t=Fp(Math.pow(e,6)),n=this,r="";;){var i=Yp(n,t).g,a=((0<(n=qp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Hp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Vl.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Vl.X=function(e){return Gp(e=qp(this,e))?-1:Hp(e)?0:1},Vl.abs=function(){return Gp(this)?Wp(this):this},Vl.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Lp(n,-2147483648&n[n.length-1]?-1:0)},Vl.R=function(e){if(Hp(this)||Hp(e))return Vp;if(Gp(this))return Gp(e)?Wp(this).R(Wp(e)):Wp(Wp(this).R(e));if(Gp(e))return Wp(this.R(Wp(e)));if(0>this.X(jp)&&0>e.X(jp))return Fp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Xp(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Xp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Xp(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Xp(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Lp(n,0)},Vl.gb=function(e){return Yp(this,e).h},Vl.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Lp(n,this.h&e.h)},Vl.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Lp(n,this.h|e.h)},Vl.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Lp(n,this.h^e.h)},Mp.prototype.createWebChannel=Mp.prototype.g,Cp.prototype.send=Cp.prototype.u,Cp.prototype.open=Cp.prototype.m,Cp.prototype.close=Cp.prototype.close,Nf.NO_ERROR=0,Nf.TIMEOUT=8,Nf.HTTP_ERROR=6,Pf.COMPLETE="complete",Of.EventType=Ff,Ff.OPEN="a",Ff.CLOSE="b",Ff.ERROR="c",Ff.MESSAGE="d",Yh.prototype.listen=Yh.prototype.O,Kd.prototype.listenOnce=Kd.prototype.P,Kd.prototype.getLastError=Kd.prototype.Sa,Kd.prototype.getLastErrorCode=Kd.prototype.Ia,Kd.prototype.getStatus=Kd.prototype.da,Kd.prototype.getResponseJson=Kd.prototype.Wa,Kd.prototype.getResponseText=Kd.prototype.ja,Kd.prototype.send=Kd.prototype.ha,Kd.prototype.setWithCredentials=Kd.prototype.Oa,Pp.prototype.digest=Pp.prototype.l,Pp.prototype.reset=Pp.prototype.reset,Pp.prototype.update=Pp.prototype.j,Lp.prototype.add=Lp.prototype.add,Lp.prototype.multiply=Lp.prototype.R,Lp.prototype.modulo=Lp.prototype.gb,Lp.prototype.compare=Lp.prototype.X,Lp.prototype.toNumber=Lp.prototype.ea,Lp.prototype.toString=Lp.prototype.toString,Lp.prototype.getBits=Lp.prototype.D,Lp.fromNumber=Fp,Lp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Wp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Fp(Math.pow(n,8)),i=Vp,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Fp(Math.pow(n,o)),i=i.R(o).add(Fp(s))):i=(i=i.R(r)).add(Fp(s))}return i};var Zp=jl.createWebChannelTransport=function(){return new Mp},$p=jl.getStatEventTarget=function(){return Ef()},ev=jl.ErrorCode=Nf,tv=jl.EventType=Pf,nv=jl.Event=kf,rv=jl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iv=(jl.FetchXmlHttpFactory=zd,jl.WebChannel=Of),av=jl.XhrIo=Kd,ov=jl.Md5=Pp,sv=jl.Integer=Lp,uv="@firebase/firestore",cv=function(){function e(t){d(this,e),this.uid=t}return g(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();cv.UNAUTHENTICATED=new cv(null),cv.GOOGLE_CREDENTIALS=new cv("google-credentials-uid"),cv.FIRST_PARTY=new cv("first-party-uid"),cv.MOCK_USER=new cv("mock-user");var lv="10.7.0",hv=new Lt("@firebase/firestore");function fv(){return hv.logLevel}function dv(e){if(hv.logLevel<=Mt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mv);hv.debug.apply(hv,["Firestore (".concat(lv,"): ").concat(e)].concat(f(i)))}}function pv(e){if(hv.logLevel<=Mt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mv);hv.error.apply(hv,["Firestore (".concat(lv,"): ").concat(e)].concat(f(i)))}}function vv(e){if(hv.logLevel<=Mt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mv);hv.warn.apply(hv,["Firestore (".concat(lv,"): ").concat(e)].concat(f(i)))}}function mv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function gv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(lv,") INTERNAL ASSERTION FAILED: ")+e;throw pv(t),new Error(t)}function yv(e,t){e||gv()}function _v(e,t){return e}var bv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xv=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return g(n)}(st),wv=g((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),kv=g((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Sv=function(){function e(){d(this,e)}return g(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ev=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return g(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Tv=function(){function e(t){d(this,e),this.t=t,this.currentUser=cv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new wv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new wv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){dv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(dv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(dv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yv("string"==typeof n.accessToken),new kv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return yv(null===e||"string"==typeof e),new cv(e)}}]),e}(),Av=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=cv.FIRST_PARTY,this.I=new Map}return g(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Mv=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r}return g(e,[{key:"getToken",value:function(){return Promise.resolve(new Av(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Cv=g((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Iv=function(){function e(t){d(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&dv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,dv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){dv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):dv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(yv("string"==typeof t.token),e.R=t.token,new Cv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Rv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Nv=function(){function e(){d(this,e)}return g(e,null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Rv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Pv(e,t){return e<t?-1:e>t?1:0}function Dv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Lv(e){return e+"\0"}var Ov=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new xv(bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xv(bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new xv(bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xv(bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Pv(this.nanoseconds,e.nanoseconds):Pv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uv=function(){function e(t){d(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ov(0,0))}},{key:"max",value:function(){return new e(new Ov(253402300799,999999999))}}]),e}(),Fv=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&gv(),void 0===r?r=t.length-n:r>t.length-n&&gv(),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Bv=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new xv(bv.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,f(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fv),Vv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zv=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Vv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new xv(bv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new xv(bv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xv(bv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new xv(bv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fv),jv=function(){function e(t){d(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Bv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Bv.fromString(t))}},{key:"fromName",value:function(t){return new e(Bv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Bv.emptyPath())}},{key:"comparator",value:function(e,t){return Bv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Bv(t.slice()))}}]),e}(),Hv=g((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Gv(e){return e.fields.find((function(e){return 2===e.kind}))}function Wv(e){return e.fields.filter((function(e){return 2!==e.kind}))}Hv.UNKNOWN_ID=-1;var qv=g((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Xv=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return g(e,null,[{key:"empty",value:function(){return new e(0,Qv.min())}}]),e}();function Kv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Uv.fromTimestamp(1e9===r?new Ov(n+1,0):new Ov(n,r));return new Qv(i,jv.empty(),t)}function Yv(e){return new Qv(e.readTime,e.key,-1)}var Qv=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e(Uv.min(),jv.empty(),-1)}},{key:"max",value:function(){return new e(Uv.max(),jv.empty(),-1)}}]),e}();function Jv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=jv.comparator(e.documentKey,t.documentKey))?n:Pv(e.largestBatchId,t.largestBatchId)}var Zv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$v=function(){function e(){d(this,e),this.onCommittedListeners=[]}return g(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function em(e){return tm.apply(this,arguments)}function tm(){return(tm=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bv.FAILED_PRECONDITION&&t.message===Zv){e.next=2;break}throw t;case 2:dv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nm=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&gv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=A(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),rm=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.V=new wv,this.transaction.oncomplete=function(){r.V.resolve()},this.transaction.onabort=function(){n.error?r.V.reject(new om(t,n.error)):r.V.resolve()},this.transaction.onerror=function(e){var n=hm(e.target.error);r.V.reject(new om(t,n))}}return g(e,[{key:"m",get:function(){return this.V.promise}},{key:"abort",value:function(e){e&&this.V.reject(e),this.aborted||(dv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"g",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new um(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new om(n,t)}}}]),e}(),im=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.p=r,12.2===e.S(tt())&&pv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return g(e,[{key:"O",value:function(){var e=kt(xt().mark((function e(t){var n=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return dv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new om(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xv(bv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new xv(bv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new om(t,n))},i.onupgradeneeded=function(e){dv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.p.N(t,i.transaction,e.oldVersion,n.version).next((function(){dv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=kt(xt().mark((function e(t,n,r,i){var a,o,s,u,c=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=xt().mark((function e(){var n,s,u,l;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=rm.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.g(),e})).catch((function(e){return n.abort(e),nm.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.m;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,dv("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if(!(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return dv("SimpleDb","Removing database:",e),cm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!ot())return!1;if(e.C())return!0;var t=tt(),n=e.S(t),r=0<n&&n<10,i=e.v(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/mixlab",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_ID:"1:673872028091:web:054417acb2bde460b8e49e",REACT_APP_FB_API_KEY:"AIzaSyC1TBhwQ0DNgQ55kLhuLQF9wZbzgeqB3vA",REACT_APP_FB_AUTH_DOMAIN:"mixlab-56f28.firebaseapp.com",REACT_APP_FB_MESSAGING_SENDER_ID:"673872028091",REACT_APP_FB_PROJECT_ID:"mixlab-56f28",REACT_APP_FB_STORAGE_BUCKET:"mixlab-56f28.appspot.com"})||void 0===e?void 0:e.F)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"v",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),am=function(){function e(t){d(this,e),this.k=t,this.q=!1,this.K=null}return g(e,[{key:"isDone",get:function(){return this.q}},{key:"$",get:function(){return this.K}},{key:"cursor",set:function(e){this.k=e}},{key:"done",value:function(){this.q=!0}},{key:"U",value:function(e){this.K=e}},{key:"delete",value:function(){return cm(this.k.delete())}}]),e}(),om=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,bv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return g(n)}(xv);function sm(e){return"IndexedDbTransactionError"===e.name}var um=function(){function e(t){d(this,e),this.store=t}return g(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(dv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(dv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cm(n)}},{key:"add",value:function(e){return dv("SimpleDb","ADD",this.store.name,e,e),cm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return cm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),dv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return dv("SimpleDb","DELETE",this.store.name,e),cm(this.store.delete(e))}},{key:"count",value:function(){return dv("SimpleDb","COUNT",this.store.name),cm(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new nm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new nm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){dv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.J=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"Y",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new nm((function(n,r){t.onerror=function(e){var t=hm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new nm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new am(i),o=t(i.primaryKey,i.value,a);if(o instanceof nm){var s=o.catch((function(e){return a.done(),nm.reject(e)}));n.push(s)}a.isDone?r():null===a.$?i.continue():i.continue(a.$)}else r()}})).next((function(){return nm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function cm(e){return new nm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=hm(e.target.error);n(t)}}))}var lm=!1;function hm(e){var t=im.S(tt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new xv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lm||(lm=!0,setTimeout((function(){throw r}),0)),r}}return e}var fm=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.X=n,this.task=null}return g(e,[{key:"start",value:function(){this.ee(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"ee",value:function(e){var t=this;dv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=dv,e.t1="Documents written: ",e.next=6,t.X.te();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!sm(e.t4)){e.next=17;break}dv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,em(e.t4);case 19:return e.next=21,t.ee(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),dm=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return g(e,[{key:"te",value:function(){var e=kt(xt().mark((function e(){var t,n=this,r=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.ne(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ne",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return nm.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return dv("IndexBackiller","Processing collection: ".concat(t)),n.re(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"re",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ie(i,n)})).next((function(n){return dv("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ie",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Yv(t);Jv(r,n)>0&&(n=r)})),new Qv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),pm=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.se(e)},this.oe=function(e){return n.writeSequenceNumber(e)})}return g(e,[{key:"se",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.oe&&this.oe(e),e}}]),e}();function vm(e){return null==e}function mm(e){return 0===e&&1/e==-1/0}function gm(e){return"number"==typeof e&&Number.isInteger(e)&&!mm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function ym(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=bm(t)),t=_m(e.get(n),t);return bm(t)}function _m(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function bm(e){return e+"\x01\x01"}function xm(e){var t=e.length;if(yv(t>=2),2===t)return yv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Bv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&gv(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:gv()}a=o+2}return new Bv(r)}pm._e=-1;var wm=["userId","batchId"];function km(e,t){return[e,ym(t)]}function Sm(e,t,n){return[e,ym(t),n]}var Em={},Tm=["prefixPath","collectionGroup","readTime","documentId"],Am=["prefixPath","collectionGroup","documentId"],Mm=["collectionGroup","readTime","prefixPath","documentId"],Cm=["canonicalId","targetId"],Im=["targetId","path"],Rm=["path","targetId"],Nm=["collectionId","parent"],Pm=["indexId","uid"],Dm=["uid","sequenceNumber"],Lm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Om=["indexId","uid","orderedDocumentKey"],Um=["userId","collectionPath","documentId"],Fm=["userId","collectionPath","largestBatchId"],Bm=["userId","collectionGroup","largestBatchId"],Vm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),zm=[].concat(f(Vm),["documentOverlays"]),jm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hm=jm,Gm=[].concat(Hm,["indexConfiguration","indexState","indexEntries"]),Wm=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ae=e,i.currentSequenceNumber=r,i}return g(n)}($v);function qm(e,t){var n=_v(e);return im.M(n.ae,t)}function Xm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Km(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ym(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Qm=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Zm.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Zm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Jm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Jm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Jm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Jm(this.root,e,this.comparator,!0)}}]),e}(),Jm=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return g(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Zm=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw gv();if(this.right.isRed())throw gv();var e=this.left.check();if(e!==this.right.check())throw gv();return e+(this.isRed()?0:1)}}]),e}();Zm.EMPTY=null,Zm.RED=!0,Zm.BLACK=!1,Zm.EMPTY=new(function(){function e(){d(this,e),this.size=0}return g(e,[{key:"key",get:function(){throw gv()}},{key:"value",get:function(){throw gv()}},{key:"color",get:function(){throw gv()}},{key:"left",get:function(){throw gv()}},{key:"right",get:function(){throw gv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Zm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $m=function(){function e(t){d(this,e),this.comparator=t,this.data=new Qm(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new eg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new eg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),eg=function(){function e(t){d(this,e),this.iter=t}return g(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function tg(e){return e.hasNext()?e.getNext():void 0}var ng=function(){function e(t){d(this,e),this.fields=t,t.sort(zv.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new $m(zv.comparator),i=A(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=A(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=A(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Dv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),rg=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return g(n)}(E(Error));var ig=function(e){function t(e){d(this,t),this.binaryString=e}return g(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Pv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new rg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ig.EMPTY_BYTE_STRING=new ig("");var ag=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function og(e){if(yv(!!e),"string"==typeof e){var t=0,n=ag.exec(e);if(yv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:sg(e.seconds),nanos:sg(e.nanos)}}function sg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ug(e){return"string"==typeof e?ig.fromBase64String(e):ig.fromUint8Array(e)}function cg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lg(e){var t=e.mapValue.fields.__previous_value__;return cg(t)?lg(t):t}function hg(e){var t=og(e.mapValue.fields.__local_write_time__.timestampValue);return new Ov(t.seconds,t.nanos)}var fg=g((function e(t,n,r,i,a,o,s,u,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),dg=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return g(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),pg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vg={nullValue:"NULL_VALUE"};function mg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cg(e)?4:Ig(e)?9007199254740991:10:gv()}function gg(e,t){if(e===t)return!0;var n=mg(e);if(n!==mg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hg(e).isEqual(hg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=og(e.timestampValue),r=og(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ug(e.bytesValue).isEqual(ug(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sg(e.geoPointValue.latitude)===sg(t.geoPointValue.latitude)&&sg(e.geoPointValue.longitude)===sg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sg(e.integerValue)===sg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=sg(e.doubleValue),r=sg(t.doubleValue);return n===r?mm(n)===mm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Dv(e.arrayValue.values||[],t.arrayValue.values||[],gg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xm(n)!==Xm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gg(n[i],r[i])))return!1;return!0}(e,t);default:return gv()}}function yg(e,t){return void 0!==(e.values||[]).find((function(e){return gg(e,t)}))}function _g(e,t){if(e===t)return 0;var n=mg(e),r=mg(t);if(n!==r)return Pv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=sg(e.integerValue||e.doubleValue),r=sg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return bg(e.timestampValue,t.timestampValue);case 4:return bg(hg(e),hg(t));case 5:return Pv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ug(e),r=ug(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Pv(n[i],r[i]);if(0!==a)return a}return Pv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Pv(sg(e.latitude),sg(t.latitude));return 0!==n?n:Pv(sg(e.longitude),sg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=_g(n[i],r[i]);if(a)return a}return Pv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===pg.mapValue&&t===pg.mapValue)return 0;if(e===pg.mapValue)return 1;if(t===pg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Pv(r[o],a[o]);if(0!==s)return s;var u=_g(n[r[o]],i[a[o]]);if(0!==u)return u}return Pv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gv()}}function bg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pv(e,t);var n=og(e),r=og(t),i=Pv(n.seconds,r.seconds);return 0!==i?i:Pv(n.nanos,r.nanos)}function xg(e){return wg(e)}function wg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=og(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ug(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return jv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=A(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=wg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=A(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(wg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):gv()}function kg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Sg(e){return!!e&&"integerValue"in e}function Eg(e){return!!e&&"arrayValue"in e}function Tg(e){return!!e&&"nullValue"in e}function Ag(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mg(e){return!!e&&"mapValue"in e}function Cg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Km(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Cg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ig(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rg(e){return"nullValue"in e?vg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?kg(dg.empty(),jv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:gv()}function Ng(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?kg(dg.empty(),jv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?pg:gv()}function Pg(e,t){var n=_g(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Dg(e,t){var n=_g(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Lg=function(){function e(t){d(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Mg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cg(t)}},{key:"setAll",value:function(e){var t=this,n=zv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Cg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Mg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return gg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Mg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Km(t,(function(t,n){return e[t]=n}));var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Cg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Og(e){var t=[];return Km(e.fields,(function(e,n){var r=new zv([e]);if(Mg(n)){var i=Og(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=A(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new ng(t)}var Ug=function(){function e(t,n,r,i,a,o,s){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Uv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Lg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Lg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Uv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uv.min(),Uv.min(),Uv.min(),Lg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Uv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uv.min(),Uv.min(),Lg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uv.min(),Uv.min(),Lg.empty(),2)}}]),e}(),Fg=g((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function Bg(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?jv.comparator(jv.fromName(o.referenceValue),n.key):_g(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Vg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gg(e.position[n],t.position[n]))return!1;return!0}var zg=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function jg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Hg=g((function e(){d(this,e)})),Gg=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_g(t,this.value)):null!==t&&mg(this.value)===mg(t)&&this.matchesComparison(_g(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ey(e,t,r):"array-contains"===t?new iy(e,r):"in"===t?new ay(e,r):"not-in"===t?new oy(e,r):"array-contains-any"===t?new sy(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ty(e,n):new ny(e,n)}}]),n}(Hg),Wg=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ue=null,i}return g(n,[{key:"matches",value:function(e){return qg(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ue||(this.ue=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ue}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Hg);function qg(e){return"and"===e.op}function Xg(e){return"or"===e.op}function Kg(e){return Yg(e)&&qg(e)}function Yg(e){var t,n=A(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Wg)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Qg(e){if(e instanceof Gg)return e.field.canonicalString()+e.op.toString()+xg(e.value);if(Kg(e))return e.filters.map((function(e){return Qg(e)})).join(",");var t=e.filters.map((function(e){return Qg(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Jg(e,t){return e instanceof Gg?function(e,t){return t instanceof Gg&&e.op===t.op&&e.field.isEqual(t.field)&&gg(e.value,t.value)}(e,t):e instanceof Wg?function(e,t){return t instanceof Wg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Jg(n,t.filters[r])}),!0)}(e,t):void gv()}function Zg(e,t){var n=e.filters.concat(t);return Wg.create(n,e.op)}function $g(e){return e instanceof Gg?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xg(e.value))}(e):e instanceof Wg?function(e){return e.op.toString()+" {"+e.getFilters().map($g).join(" ,")+"}"}(e):"Filter"}var ey=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=jv.fromName(i.referenceValue),a}return g(n,[{key:"matches",value:function(e){var t=jv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Gg),ty=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=ry("in",r),i}return g(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gg),ny=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=ry("not-in",r),i}return g(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gg);function ry(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return jv.fromName(e.referenceValue)}))}var iy=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Eg(t)&&yg(t.arrayValue,this.value)}}]),n}(Gg),ay=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&yg(this.value.arrayValue,t)}}]),n}(Gg),oy=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return g(n,[{key:"matches",value:function(e){if(yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!yg(this.value.arrayValue,t)}}]),n}(Gg),sy=function(e){_(n,e);var t=k(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return g(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return yg(t.value.arrayValue,e)}))}}]),n}(Gg),uy=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ce=null}));function cy(e){return new uy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ly(e){var t=_v(e);if(null===t.ce){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Qg(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),vm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xg(e)})).join(",")),t.ce=n}return t.ce}function hy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!jg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Jg(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vg(e.startAt,t.startAt)&&Vg(e.endAt,t.endAt)}function fy(e){return jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function dy(e,t){return e.filters.filter((function(e){return e instanceof Gg&&e.field.isEqual(t)}))}function py(e,t,n){var r,i=vg,a=!0,o=A(dy(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=vg,c=!0;switch(s.op){case"<":case"<=":u=Rg(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=vg}Pg({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Pg({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function vy(e,t,n){var r,i=pg,a=!0,o=A(dy(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=pg,c=!0;switch(s.op){case">=":case">":u=Ng(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=pg}Dg({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Dg({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var my=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}));function gy(e,t,n,r,i,a,o,s){return new my(e,t,n,r,i,a,o,s)}function yy(e){return new my(e)}function _y(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function by(e){return null!==e.collectionGroup}function xy(e){var t=_v(e);if(null===t.le){t.le=[];var n,r=new Set,i=A(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.le.push(a),r.add(a.field.canonicalString())}}catch(u){i.e(u)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",s=function(e){var t=new $m(zv.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);s.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.le.push(new zg(e,o))})),r.has(zv.keyField().canonicalString())||t.le.push(new zg(zv.keyField(),o))}return t.le}function wy(e){var t=_v(e);return t.he||(t.he=ky(t,xy(e))),t.he}function ky(e,t){if("F"===e.limitType)return cy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new zg(e.field,t)}));var n=e.endAt?new Fg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Fg(e.startAt.position,e.startAt.inclusive):null;return cy(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Sy(e,t){var n=e.filters.concat([t]);return new my(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ey(e,t,n){return new my(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ty(e,t){return hy(wy(e),wy(t))&&e.limitType===t.limitType}function Ay(e){return"".concat(ly(wy(e)),"|lt:").concat(e.limitType)}function My(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return $g(e)})).join(", "),"]")),vm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xg(e)})).join(",")),"Target(".concat(t,")")}(wy(e)),"; limitType=").concat(e.limitType,")")}function Cy(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):jv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=A(xy(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=A(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Bg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xy(e),t))&&!(e.endAt&&!function(e,t,n){var r=Bg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xy(e),t))}(e,t)}function Iy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ry(e){return function(t,n){var r,i=!1,a=A(xy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Ny(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Ny(e,t,n){var r=e.field.isKeyField()?jv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?_g(r,i):gv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gv()}}var Py=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return g(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Km(this.inner,(function(t,n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ym(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Dy=new Qm(jv.comparator);function Ly(){return Dy}var Oy=new Qm(jv.comparator);function Uy(){for(var e=Oy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Fy(e){var t=Oy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function By(){return zy()}function Vy(){return zy()}function zy(){return new Py((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var jy=new Qm(jv.comparator),Hy=new $m(jv.comparator);function Gy(){for(var e=Hy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Wy=new $m(Pv);function qy(){return Wy}function Xy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mm(t)?"-0":t}}function Ky(e){return{integerValue:""+e}}function Yy(e,t){return gm(t)?Ky(t):Xy(e,t)}var Qy=g((function e(){d(this,e),this._=void 0}));function Jy(e,t,n){return e instanceof e_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&cg(t)&&(t=lg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof t_?n_(e,t):e instanceof r_?i_(e,t):function(e,t){var n=$y(e,t),r=o_(n)+o_(e.Ie);return Sg(n)&&Sg(e.Ie)?Ky(r):Xy(e.serializer,r)}(e,t)}function Zy(e,t,n){return e instanceof t_?n_(e,t):e instanceof r_?i_(e,t):n}function $y(e,t){return e instanceof a_?function(e){return Sg(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var e_=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(Qy),t_=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return g(n)}(Qy);function n_(e,t){var n,r=s_(t),i=A(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return gg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var r_=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return g(n)}(Qy);function i_(e,t){var n,r=s_(t),i=A(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!gg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var a_=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.Ie=r,i}return g(n)}(Qy);function o_(e){return sg(e.integerValue||e.doubleValue)}function s_(e){return Eg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var u_=g((function e(t,n){d(this,e),this.field=t,this.transform=n}));var c_=g((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),l_=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function h_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var f_=g((function e(){d(this,e)}));function d_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new E_(e.key,l_.none()):new y_(e.key,e.data,l_.none());var n,r=e.data,i=Lg.empty(),a=new $m(zv.comparator),o=A(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new __(e.key,i,new ng(a.toArray()),l_.none())}function p_(e,t,n){e instanceof y_?function(e,t,n){var r=e.value.clone(),i=x_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof __?function(e,t,n){if(h_(e.precondition,t)){var r=x_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(b_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function v_(e,t,n,r){return e instanceof y_?function(e,t,n,r){if(!h_(e.precondition,t))return n;var i=e.value.clone(),a=w_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof __?function(e,t,n,r){if(!h_(e.precondition,t))return n;var i=w_(e.fieldTransforms,r,t),a=t.data;return a.setAll(b_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return h_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function m_(e,t){var n,r=null,i=A(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=$y(a.transform,o||null);null!=s&&(null===r&&(r=Lg.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function g_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Dv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof t_&&t instanceof t_||e instanceof r_&&t instanceof r_?Dv(e.elements,t.elements,gg):e instanceof a_&&t instanceof a_?gg(e.Ie,t.Ie):e instanceof e_&&t instanceof e_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var y_=function(e){_(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(f_),__=function(e){_(n,e);var t=k(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return g(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(f_);function b_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function x_(e,t,n){var r=new Map;yv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Zy(o,s,n[i]))}return r}function w_(e,t,n){var r,i=new Map,a=A(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Jy(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var k_,S_,E_=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(f_),T_=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(f_),A_=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return g(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&p_(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=A(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=v_(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=A(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=v_(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Vy();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=d_(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Uv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Gy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Dv(this.mutations,e.mutations,(function(e,t){return g_(e,t)}))&&Dv(this.baseMutations,e.baseMutations,(function(e,t){return g_(e,t)}))}}]),e}(),M_=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){yv(t.mutations.length===r.length);for(var i=jy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),C_=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return g(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),I_=g((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function R_(e){switch(e){default:return gv();case bv.CANCELLED:case bv.UNKNOWN:case bv.DEADLINE_EXCEEDED:case bv.RESOURCE_EXHAUSTED:case bv.INTERNAL:case bv.UNAVAILABLE:case bv.UNAUTHENTICATED:return!1;case bv.INVALID_ARGUMENT:case bv.NOT_FOUND:case bv.ALREADY_EXISTS:case bv.PERMISSION_DENIED:case bv.FAILED_PRECONDITION:case bv.ABORTED:case bv.OUT_OF_RANGE:case bv.UNIMPLEMENTED:case bv.DATA_LOSS:return!0}}function N_(e){if(void 0===e)return pv("GRPC error has no .code"),bv.UNKNOWN;switch(e){case k_.OK:return bv.OK;case k_.CANCELLED:return bv.CANCELLED;case k_.UNKNOWN:return bv.UNKNOWN;case k_.DEADLINE_EXCEEDED:return bv.DEADLINE_EXCEEDED;case k_.RESOURCE_EXHAUSTED:return bv.RESOURCE_EXHAUSTED;case k_.INTERNAL:return bv.INTERNAL;case k_.UNAVAILABLE:return bv.UNAVAILABLE;case k_.UNAUTHENTICATED:return bv.UNAUTHENTICATED;case k_.INVALID_ARGUMENT:return bv.INVALID_ARGUMENT;case k_.NOT_FOUND:return bv.NOT_FOUND;case k_.ALREADY_EXISTS:return bv.ALREADY_EXISTS;case k_.PERMISSION_DENIED:return bv.PERMISSION_DENIED;case k_.FAILED_PRECONDITION:return bv.FAILED_PRECONDITION;case k_.ABORTED:return bv.ABORTED;case k_.OUT_OF_RANGE:return bv.OUT_OF_RANGE;case k_.UNIMPLEMENTED:return bv.UNIMPLEMENTED;case k_.DATA_LOSS:return bv.DATA_LOSS;default:return gv()}}(S_=k_||(k_={}))[S_.OK=0]="OK",S_[S_.CANCELLED=1]="CANCELLED",S_[S_.UNKNOWN=2]="UNKNOWN",S_[S_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",S_[S_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",S_[S_.NOT_FOUND=5]="NOT_FOUND",S_[S_.ALREADY_EXISTS=6]="ALREADY_EXISTS",S_[S_.PERMISSION_DENIED=7]="PERMISSION_DENIED",S_[S_.UNAUTHENTICATED=16]="UNAUTHENTICATED",S_[S_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",S_[S_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",S_[S_.ABORTED=10]="ABORTED",S_[S_.OUT_OF_RANGE=11]="OUT_OF_RANGE",S_[S_.UNIMPLEMENTED=12]="UNIMPLEMENTED",S_[S_.INTERNAL=13]="INTERNAL",S_[S_.UNAVAILABLE=14]="UNAVAILABLE",S_[S_.DATA_LOSS=15]="DATA_LOSS";var P_=null;function D_(){return new TextEncoder}var L_=new sv([4294967295,4294967295],0);function O_(e){var t=D_().encode(e),n=new ov;return n.update(t),new Uint8Array(n.digest())}function U_(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new sv([n,r],0),new sv([i,a],0)]}var F_=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new B_("Invalid padding: ".concat(n));if(r<0)throw new B_("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new B_("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new B_("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*t.length-n,this.Ee=sv.fromNumber(this.Te)}return g(e,[{key:"de",value:function(e,t,n){var r=e.add(t.multiply(sv.fromNumber(n)));return 1===r.compare(L_)&&(r=new sv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}},{key:"Ae",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Te)return!1;for(var t=l(U_(O_(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);if(!this.Ae(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Te)for(var t=l(U_(O_(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);this.Re(a)}}},{key:"Re",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),B_=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return g(n)}(E(Error)),V_=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,z_.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Uv.min(),i,new Qm(Pv),Ly(),Gy())}}]),e}(),z_=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Gy(),Gy(),Gy())}}]),e}(),j_=g((function e(t,n,r,i){d(this,e),this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i})),H_=g((function e(t,n){d(this,e),this.targetId=t,this.fe=n})),G_=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ig.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),W_=function(){function e(){d(this,e),this.ge=0,this.pe=K_(),this.ye=ig.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}return g(e,[{key:"current",get:function(){return this.we}},{key:"resumeToken",get:function(){return this.ye}},{key:"be",get:function(){return 0!==this.ge}},{key:"De",get:function(){return this.Se}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}},{key:"ve",value:function(){var e=Gy(),t=Gy(),n=Gy();return this.pe.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gv()}})),new z_(this.ye,this.we,e,t,n)}},{key:"Fe",value:function(){this.Se=!1,this.pe=K_()}},{key:"Me",value:function(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}},{key:"xe",value:function(e){this.Se=!0,this.pe=this.pe.remove(e)}},{key:"Oe",value:function(){this.ge+=1}},{key:"Ne",value:function(){this.ge-=1,yv(this.ge>=0)}},{key:"Be",value:function(){this.Se=!0,this.we=!0}}]),e}(),q_=function(){function e(t){d(this,e),this.Le=t,this.ke=new Map,this.qe=Ly(),this.Qe=X_(),this.Ke=new Qm(Pv)}return g(e,[{key:"$e",value:function(e){var t,n=A(e.Ve);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me)}}catch(s){n.e(s)}finally{n.f()}var i,a=A(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.We(o,e.key,e.me)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Ge",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ze(n);switch(e.state){case 0:t.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||t.removeTarget(n);break;case 3:t.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:t.je(n)&&(t.He(n),r.Ce(e.resumeToken));break;default:gv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((function(e,r){n.je(r)&&t(r)}))}},{key:"Je",value:function(e){var t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){var i=r.target;if(fy(i))if(0===n){var a=new jv(i.path);this.We(t,a,Ug.newNoDocument(a,Uv.min()))}else yv(1===n);else{var o=this.Ze(t);if(o!==n){var s=this.Xe(e),u=s?this.et(s,e,o):1;if(0!==u){this.He(t);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}null==P_||P_.tt(function(e,t,n,r,i){var a,o,s,u,c,l,h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},f=t.unchangedNames;return f&&(h.bloomFilter={applied:0===i,hashCount:null!==(a=null==f?void 0:f.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(u=null===(s=null===(o=null==f?void 0:f.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==f?void 0:f.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(o,e.fe,this.Le.nt(),s,u))}}}}},{key:"Xe",value:function(e){var t=e.fe.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,s=i.padding,u=void 0===s?0:s,c=t.hashCount,l=void 0===c?0:c;try{n=ug(o).toUint8Array()}catch(e){if(e instanceof rg)return vv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new F_(n,u,l)}catch(e){return vv(e instanceof B_?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Te?null:r}},{key:"et",value:function(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}},{key:"rt",value:function(e,t){var n=this,r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Le.nt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.We(t,r,null),i++)})),i}},{key:"it",value:function(e){var t=this,n=new Map;this.ke.forEach((function(r,i){var a=t.Ye(i);if(a){if(r.current&&fy(a.target)){var o=new jv(a.target.path);null!==t.qe.get(o)||t.st(i,o)||t.We(i,o,Ug.newNoDocument(o,e))}r.De&&(n.set(i,r.ve()),r.Fe())}}));var r=Gy();this.Qe.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ye(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new V_(e,n,this.Ke,this.qe,r);return this.qe=Ly(),this.Qe=X_(),this.Ke=new Qm(Pv),i}},{key:"Ue",value:function(e,t){if(this.je(e)){var n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}}},{key:"We",value:function(e,t,n){if(this.je(e)){var r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.ke.delete(e)}},{key:"Ze",value:function(e){var t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Oe",value:function(e){this.ze(e).Oe()}},{key:"ze",value:function(e){var t=this.ke.get(e);return t||(t=new W_,this.ke.set(e,t)),t}},{key:"ot",value:function(e){var t=this.Qe.get(e);return t||(t=new $m(Pv),this.Qe=this.Qe.insert(e,t)),t}},{key:"je",value:function(e){var t=null!==this.Ye(e);return t||dv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ye",value:function(e){var t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}},{key:"He",value:function(e){var t=this;this.ke.set(e,new W_),this.Le.getRemoteKeysForTarget(e).forEach((function(n){t.We(e,n,null)}))}},{key:"st",value:function(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}]),e}();function X_(){return new Qm(jv.comparator)}function K_(){return new Qm(jv.comparator)}var Y_={asc:"ASCENDING",desc:"DESCENDING"},Q_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J_={and:"AND",or:"OR"},Z_=g((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function $_(e,t){return e.useProto3Json||vm(t)?t:{value:t}}function eb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function tb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nb(e,t){return eb(e,t.toTimestamp())}function rb(e){return yv(!!e),Uv.fromTimestamp(function(e){var t=og(e);return new Ov(t.seconds,t.nanos)}(e))}function ib(e,t){return function(e){return new Bv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ab(e){var t=Bv.fromString(e);return yv(Mb(t)),t}function ob(e,t){return ib(e.databaseId,t.path)}function sb(e,t){var n=ab(t);if(n.get(1)!==e.databaseId.projectId)throw new xv(bv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xv(bv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new jv(hb(n))}function ub(e,t){return ib(e.databaseId,t)}function cb(e){var t=ab(e);return 4===t.length?Bv.emptyPath():hb(t)}function lb(e){return new Bv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hb(e){return yv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function fb(e,t,n){return{name:ob(e,t),fields:n.value.mapValue.fields}}function db(e,t,n){var r=sb(e,t.name),i=rb(t.updateTime),a=t.createTime?rb(t.createTime):Uv.min(),o=new Lg({mapValue:{fields:t.fields}}),s=Ug.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function pb(e,t){return"found"in t?function(e,t){yv(!!t.found),t.found.name,t.found.updateTime;var n=sb(e,t.found.name),r=rb(t.found.updateTime),i=t.found.createTime?rb(t.found.createTime):Uv.min(),a=new Lg({mapValue:{fields:t.found.fields}});return Ug.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){yv(!!t.missing),yv(!!t.readTime);var n=sb(e,t.missing),r=rb(t.readTime);return Ug.newNoDocument(n,r)}(e,t):gv()}function vb(e,t){var n;if(t instanceof y_)n={update:fb(e,t.key,t.value)};else if(t instanceof E_)n={delete:ob(e,t.key)};else if(t instanceof __)n={update:fb(e,t.key,t.data),updateMask:Ab(t.fieldMask)};else{if(!(t instanceof T_))return gv();n={verify:ob(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof e_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof t_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof r_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof a_)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw gv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gv()}(e,t.precondition)),n}function mb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?l_.updateTime(rb(e.updateTime)):void 0!==e.exists?l_.exists(e.exists):l_.none()}(t.currentDocument):l_.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)yv("REQUEST_TIME"===t.setToServerValue),n=new e_;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new t_(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new r_(i)}else"increment"in t?n=new a_(e,t.increment):gv();var a=zv.fromServerFormat(t.fieldPath);return new u_(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=sb(e,t.update.name),a=new Lg({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ng(t.map((function(e){return zv.fromServerFormat(e)})))}(t.updateMask);return new __(i,a,o,n,r)}return new y_(i,a,n,r)}if(t.delete){var s=sb(e,t.delete);return new E_(s,n)}if(t.verify){var u=sb(e,t.verify);return new T_(u,n)}return gv()}function gb(e,t){return{documents:[ub(e,t.path)]}}function yb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ub(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ub(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Tb(Wg.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Sb(e.field),direction:xb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=$_(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function _b(e){var t=cb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=bb(e);return t instanceof Wg&&Kg(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=function(e){return e.map((function(e){return function(e){return new zg(Eb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var u=null;n.limit&&(u=function(e){var t;return vm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Fg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Fg(n,t)}(n.endAt)),gy(t,i,s,o,u,"F",c,l)}function bb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Eb(e.unaryFilter.field);return Gg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Eb(e.unaryFilter.field);return Gg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Eb(e.unaryFilter.field);return Gg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Eb(e.unaryFilter.field);return Gg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gv()}}(e):void 0!==e.fieldFilter?function(e){return Gg.create(Eb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wg.create(e.compositeFilter.filters.map((function(e){return bb(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gv()}}(e.compositeFilter.op))}(e):gv()}function xb(e){return Y_[e]}function wb(e){return Q_[e]}function kb(e){return J_[e]}function Sb(e){return{fieldPath:e.canonicalString()}}function Eb(e){return zv.fromServerFormat(e.fieldPath)}function Tb(e){return e instanceof Gg?function(e){if("=="===e.op){if(Ag(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NAN"}};if(Tg(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ag(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NOT_NAN"}};if(Tg(e.value))return{unaryFilter:{field:Sb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sb(e.field),op:wb(e.op),value:e.value}}}(e):e instanceof Wg?function(e){var t=e.getFilters().map((function(e){return Tb(e)}));return 1===t.length?t[0]:{compositeFilter:{op:kb(e.op),filters:t}}}(e):gv()}function Ab(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Mb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Cb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ig.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Ib=g((function e(t){d(this,e),this.ut=t}));function Rb(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Nb(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ob(e,t.key),fields:t.data.value.mapValue.fields,updateTime:eb(e,t.version.toTimestamp()),createTime:eb(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pb(t.version)};else{if(!t.isUnknownDocument())return gv();r.unknownDocument={path:n.path.toArray(),version:Pb(t.version)}}return r}function Nb(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Pb(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Db(e){var t=new Ov(e.seconds,e.nanoseconds);return Uv.fromTimestamp(t)}function Lb(e,t){for(var n=(t.baseMutations||[]).map((function(t){return mb(e.ut,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return mb(e.ut,t)})),s=Ov.fromMillis(t.localWriteTimeMs);return new A_(t.batchId,s,n,o)}function Ob(e){var t,n=Db(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Db(e.lastLimboFreeSnapshotVersion):Uv.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return yv(1===e.documents.length),wy(yy(cb(e.documents[0])))}(e.query):function(e){return wy(_b(e))}(e.query),new Cb(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,ig.fromBase64String(e.resumeToken))}function Ub(e,t){var n,r=Pb(t.snapshotVersion),i=Pb(t.lastLimboFreeSnapshotVersion);n=fy(t.target)?gb(e.ut,t.target):yb(e.ut,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ly(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Fb(e){var t=_b({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ey(t,t.limit,"L"):t}function Bb(e,t){return new C_(t.largestBatchId,mb(e.ut,t.overlayMutation))}function Vb(e,t){var n=t.path.lastSegment();return[e,ym(t.path.popLast()),n]}function zb(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Pb(r.readTime),documentKey:ym(r.documentKey.path),largestBatchId:r.largestBatchId}}var jb=function(){function e(){d(this,e)}return g(e,[{key:"getBundleMetadata",value:function(e,t){return Hb(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Db(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Hb(e).put(function(e){return{bundleId:e.id,createTime:Pb(rb(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Gb(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Fb(e.bundledQuery),readTime:Db(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Gb(e).put(function(e){return{name:e.name,readTime:Pb(rb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Hb(e){return qm(e,"bundles")}function Gb(e){return qm(e,"namedQueries")}var Wb=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return g(e,[{key:"getOverlay",value:function(e,t){var n=this;return qb(e).get(Vb(this.userId,t)).next((function(e){return e?Bb(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=By();return nm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new C_(t,a);i.push(r.lt(e,o))})),nm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ym(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(qb(e).H("collectionPathOverlayIndex",i))})),nm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=By(),a=ym(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qb(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Bb(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=By(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qb(e).Y({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Bb(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"lt",value:function(e,t){return qb(e).put(function(e,t,n){var r=l(Vb(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:vb(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ct",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function qb(e){return qm(e,"documentOverlays")}var Xb=function(){function e(){d(this,e)}return g(e,[{key:"ht",value:function(e,t){this.Pt(e,t),t.It()}},{key:"Pt",value:function(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(sg(e.integerValue));else if("doubleValue"in e){var n=sg(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),mm(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt("".concat(r.seconds||"")),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(ug(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?Ig(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):gv()}},{key:"At",value:function(e,t){this.Tt(t,25),this.wt(e,t)}},{key:"wt",value:function(e,t){t.dt(e)}},{key:"gt",value:function(e,t){var n=e.fields||{};this.Tt(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.At(a,t),this.Pt(n[a],t)}}},{key:"yt",value:function(e,t){var n=e.values||[];this.Tt(t,50);var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Pt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ft",value:function(e,t){var n=this;this.Tt(t,37),jv.fromName(e).path.forEach((function(e){n.Tt(t,60),n.wt(e,t)}))}},{key:"Tt",value:function(e,t){e.Et(t)}},{key:"Rt",value:function(e){e.Et(2)}}]),e}();function Kb(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Yb(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Kb(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xb.St=new Xb;var Qb=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return g(e,[{key:"bt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Dt(n.value),n=t.next();this.Ct()}},{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{var a=r.codePointAt(0);this.Dt(240|a>>>18),this.Dt(128|63&a>>>12),this.Dt(128|63&a>>>6),this.Dt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Ot",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Nt",value:function(e){var t=this.Bt(e),n=Yb(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"kt",value:function(e){var t=this.Bt(e),n=Yb(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qt",value:function(){this.Qt(255),this.Qt(255)}},{key:"Kt",value:function(){this.$t(255),this.$t(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ut",value:function(){return this.buffer.slice(0,this.position)}},{key:"Bt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Dt",value:function(e){var t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}},{key:"Ct",value:function(){this.Qt(0),this.Qt(1)}},{key:"Mt",value:function(){this.$t(0),this.$t(1)}},{key:"Qt",value:function(e){this.Lt(1),this.buffer[this.position++]=e}},{key:"$t",value:function(e){this.Lt(1),this.buffer[this.position++]=~e}},{key:"Lt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Jb=function(){function e(t){d(this,e),this.Wt=t}return g(e,[{key:"Vt",value:function(e){this.Wt.bt(e)}},{key:"dt",value:function(e){this.Wt.xt(e)}},{key:"Et",value:function(e){this.Wt.Nt(e)}},{key:"It",value:function(){this.Wt.qt()}}]),e}(),Zb=function(){function e(t){d(this,e),this.Wt=t}return g(e,[{key:"Vt",value:function(e){this.Wt.vt(e)}},{key:"dt",value:function(e){this.Wt.Ot(e)}},{key:"Et",value:function(e){this.Wt.kt(e)}},{key:"It",value:function(){this.Wt.Kt()}}]),e}(),$b=function(){function e(){d(this,e),this.Wt=new Qb,this.Gt=new Jb(this.Wt),this.zt=new Zb(this.Wt)}return g(e,[{key:"seed",value:function(e){this.Wt.seed(e)}},{key:"jt",value:function(e){return 0===e?this.Gt:this.zt}},{key:"Ut",value:function(){return this.Wt.Ut()}},{key:"reset",value:function(){this.Wt.reset()}}]),e}(),ex=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return g(e,[{key:"Ht",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function tx(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=nx(e.arrayValue,t.arrayValue))?n:0!==(n=nx(e.directionalValue,t.directionalValue))?n:jv.comparator(e.documentKey,t.documentKey)}function nx(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var rx=function(){function e(t){d(this,e),this.Jt=new $m((function(e,t){return zv.comparator(e.field,t.field)})),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=A(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return g(e,[{key:"Xt",get:function(){return this.Jt.size>1}},{key:"en",value:function(e){if(yv(e.collectionGroup===this.collectionId),this.Xt)return!1;var t=Gv(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Wv(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){var o=this.Jt.getIterator().getNext();if(!r.has(o.field.canonicalString())){var s=n[i];if(!this.nn(o,s)||!this.rn(this.Yt[a++],s))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}},{key:"sn",value:function(){if(this.Xt)return null;var e,t=new $m(zv.comparator),n=[],r=A(this.Zt);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new qv(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new qv(i.field,0))}}}catch(u){r.e(u)}finally{r.f()}var a,o=A(this.Yt);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||t.has(s.field)||(t=t.add(s.field),n.push(new qv(s.field,"asc"===s.dir?0:1)))}}catch(u){o.e(u)}finally{o.f()}return new Hv(Hv.UNKNOWN_ID,this.collectionId,n,Xv.empty())}},{key:"tn",value:function(e){var t,n=A(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function ix(e){var t,n;if(yv(e instanceof Gg||e instanceof Wg),e instanceof Gg){if(e instanceof ay){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Gg.create(e.field,"==",t)})))||[];return Wg.create(r,"or")}return e}var i=e.filters.map((function(e){return ix(e)}));return Wg.create(i,e.op)}function ax(e){if(0===e.getFilters().length)return[];var t=cx(ix(e));return yv(ux(t)),ox(t)||sx(t)?[t]:t.getFilters()}function ox(e){return e instanceof Gg}function sx(e){return e instanceof Wg&&Kg(e)}function ux(e){return ox(e)||sx(e)||function(e){if(e instanceof Wg&&Xg(e)){var t,n=A(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ox(r)&&!sx(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function cx(e){if(yv(e instanceof Gg||e instanceof Wg),e instanceof Gg)return e;if(1===e.filters.length)return cx(e.filters[0]);var t=e.filters.map((function(e){return cx(e)})),n=Wg.create(t,e.op);return ux(n=fx(n))?n:(yv(n instanceof Wg),yv(qg(n)),yv(n.filters.length>1),n.filters.reduce((function(e,t){return lx(e,t)})))}function lx(e,t){var n;return yv(e instanceof Gg||e instanceof Wg),yv(t instanceof Gg||t instanceof Wg),n=e instanceof Gg?t instanceof Gg?function(e,t){return Wg.create([e,t],"and")}(e,t):hx(e,t):t instanceof Gg?hx(t,e):function(e,t){if(yv(e.filters.length>0&&t.filters.length>0),qg(e)&&qg(t))return Zg(e,t.getFilters());var n=Xg(e)?e:t,r=Xg(e)?t:e,i=n.filters.map((function(e){return lx(e,r)}));return Wg.create(i,"or")}(e,t),fx(n)}function hx(e,t){if(qg(t))return Zg(t,e.getFilters());var n=t.filters.map((function(t){return lx(e,t)}));return Wg.create(n,"or")}function fx(e){if(yv(e instanceof Gg||e instanceof Wg),e instanceof Gg)return e;var t=e.getFilters();if(1===t.length)return fx(t[0]);if(Yg(e))return e;var n=t.map((function(e){return fx(e)})),r=[];return n.forEach((function(t){t instanceof Gg?r.push(t):t instanceof Wg&&(t.op===e.op?r.push.apply(r,f(t.filters)):r.push(t))})),1===r.length?r[0]:Wg.create(r,e.op)}var dx=function(){function e(){d(this,e),this.on=new px}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.on.add(t),nm.resolve()}},{key:"getCollectionParents",value:function(e,t){return nm.resolve(this.on.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return nm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return nm.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return nm.resolve()}},{key:"createTargetIndexes",value:function(e,t){return nm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return nm.resolve(null)}},{key:"getIndexType",value:function(e,t){return nm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return nm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return nm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return nm.resolve(Qv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return nm.resolve(Qv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return nm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return nm.resolve()}}]),e}(),px=function(){function e(){d(this,e),this.index={}}return g(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $m(Bv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new $m(Bv.comparator)).toArray()}}]),e}(),vx=new Uint8Array(0),mx=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this._n=new px,this.an=new Py((function(e){return ly(e)}),(function(e,t){return hy(e,t)})),this.uid=t.uid||""}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this._n.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n._n.add(t)}));var a={collectionId:r,parent:ym(i)};return gx(e).put(a)}return nm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lv(t),""],!1,!0);return gx(e).W(r).next((function(e){var r,i=A(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=_x(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=bx(e);return a.next((function(e){o.put(zb(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=_x(e),r=bx(e),i=yx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=_x(e),n=yx(e),r=bx(e);return t.H().next((function(){return n.H()})).next((function(){return r.H()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return nm.forEach(this.un(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new rx(t).sn();if(null!=i)return n.addFieldIndex(e,i)}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=yx(e),i=!0,a=new Map;return nm.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Gy(),o=[];return nm.forEach(a,(function(i,a){dv("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(ly(t)));var s=function(e,t){var n=Gv(t);if(void 0===n)return null;var r,i=A(dy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=A(Wv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=A(dy(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=A(Wv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?py(e,o.fieldPath,e.startAt):vy(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Fg(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=A(Wv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?vy(e,o.fieldPath,e.endAt):py(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Fg(r,i)}(a,i),h=n.ln(i,a,c),f=n.ln(i,a,l),d=n.hn(i,a,u),p=n.Pn(i.indexId,s,h,c.inclusive,f,l.inclusive,d);return nm.forEach(p,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=jv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return nm.resolve(null)}))}},{key:"un",value:function(e){var t=this.an.get(e);return t||(t=0===e.filters.length?[e]:ax(Wg.create(e.filters,"and")).map((function(t){return cy(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.an.set(e,t),t)}},{key:"Pn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(){var u=t?s.In(t[d/c]):vx,h=s.Tn(e,u,n[d%c],r),p=s.En(e,u,i[d%c],a),v=o.map((function(t){return s.Tn(e,u,t,!0)}));l.push.apply(l,f(s.createRange(h,p,v)))},d=0;d<u;++d)h();return l}},{key:"Tn",value:function(e,t,n,r){var i=new ex(e,jv.empty(),t,n);return r?i:i.Ht()}},{key:"En",value:function(e,t,n,r){var i=new ex(e,jv.empty(),t,n);return r?i.Ht():i}},{key:"cn",value:function(e,t){var n=new rx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=A(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return nm.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new $m(zv.comparator),r=!1,i=A(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=A(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var u,c=A(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"dn",value:function(e,t){var n,r=new $b,i=A(Wv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.jt(a.kind);Xb.St.ht(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Ut()}},{key:"In",value:function(e){var t=new $b;return Xb.St.ht(e,t.jt(0)),t.Ut()}},{key:"An",value:function(e,t){var n=new $b;return Xb.St.ht(kg(this.databaseId,t),n.jt(function(e){var t=Wv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new $b);var i,a=0,o=A(Wv(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=A(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.Rn(t,u.fieldPath)&&Eg(c))r=this.Vn(r,u,c);else{var f=h.jt(u.kind);Xb.St.ht(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.mn(r)}},{key:"ln",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"mn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Ut();return t}},{key:"Vn",value:function(e,t,n){var r,i=f(e),a=[],o=A(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=A(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new $b;h.seed(l.Ut()),Xb.St.ht(u,h.jt(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"Rn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Gg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=_x(e),i=bx(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return nm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Xv(t.sequenceNumber,new Qv(Db(t.readTime),new jv(xm(t.documentKey)),t.largestBatchId)):Xv.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new qv(zv.fromServerFormat(n),r)}));return new Hv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Pv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=_x(e),a=bx(e);return this.fn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return nm.forEach(t,(function(t){return a.put(zb(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return nm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?nm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),nm.forEach(a,(function(r){return n.gn(e,t,r).next((function(t){var a=n.pn(i,r);return t.isEqual(a)?nm.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return yx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Sn",value:function(e,t,n,r){return yx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}},{key:"gn",value:function(e,t,n){var r=yx(e),i=new $m(tx);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},(function(e,r){i=i.add(new ex(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"pn",value:function(e,t){var n=new $m(tx),r=this.dn(t,e);if(null==r)return n;var i=Gv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Eg(a)){var o,s=A(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new ex(t.indexId,e.key,this.In(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new ex(t.indexId,e.key,vx,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;dv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=tg(a),u=tg(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=tg(o)):l?(i(s),s=tg(a)):(s=tg(a),u=tg(o))}}(r,i,tx,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.Sn(e,t,n,r))})),nm.waitFor(o)}},{key:"fn",value:function(e){var t=1;return bx(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return tx(e,t)})).filter((function(e,t,n){return!t||0!==tx(e,n[t-1])}));var r=[];r.push(e);var i,a=A(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=tx(o,e),u=tx(o,t);if(0===s)r[0]=e.Ht();else if(s>0&&u<0)r.push(o),r.push(o.Ht());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,vx,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,vx,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"bn",value:function(e,t){return tx(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(xx)}},{key:"getMinOffset",value:function(e,t){var n=this;return nm.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||gv()}))})).next(xx)}}]),e}();function gx(e){return qm(e,"collectionParents")}function yx(e){return qm(e,"indexEntries")}function _x(e){return qm(e,"indexConfiguration")}function bx(e){return qm(e,"indexState")}function xx(e){yv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Jv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Qv(t.readTime,t.documentKey,n)}var wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kx=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Sx(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Y({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){yv(1===s)})));var c,l=[],h=A(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Sm(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return nm.waitFor(a).next((function(){return l}))}function Ex(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw gv();t=e.noDocument}return JSON.stringify(t).length}kx.DEFAULT_COLLECTION_PERCENTILE=10,kx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kx.DEFAULT=new kx(41943040,kx.DEFAULT_COLLECTION_PERCENTILE,kx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kx.DISABLED=new kx(-1,0,0);var Tx=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}return g(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mx(e).Y({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Cx(e),o=Mx(e);return o.add({}).next((function(s){yv("number"==typeof s);var u,c=new A_(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return vb(e.ut,t)})),i=n.mutations.map((function(t){return vb(e.ut,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],f=new $m((function(e,t){return Pv(e.canonicalString(),t.canonicalString())})),d=A(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Sm(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Em))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Dn[s]=c.keys()})),nm.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Mx(e).get(t).next((function(e){return e?(yv(e.userId===n.userId),Lb(n.serializer,e)):null}))}},{key:"Cn",value:function(e,t){var n=this;return this.Dn[t]?nm.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Dn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Mx(e).Y({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(yv(t.batchId>=r),a=Lb(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Mx(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mx(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Lb(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=km(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Cx(e).Y({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],h=s[2],f=xm(c);if(u===n.userId&&t.path.isEqual(f))return Mx(e).get(h).next((function(e){if(!e)throw gv();yv(e.userId===n.userId),a.push(Lb(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $m(Pv),i=[];return t.forEach((function(t){var a=km(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Cx(e).Y({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],h=xm(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(s)})),nm.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=km(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new $m(Pv);return Cx(e).Y({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],h=o[2],f=xm(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):a.done()})).next((function(){return n.vn(e,s)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Mx(e).get(t).next((function(e){if(null===e)throw gv();yv(e.userId===n.userId),r.push(Lb(n.serializer,e))})))})),nm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Sx(e.ae,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Fn(t.batchId)})),nm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Fn",value:function(e){delete this.Dn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return nm.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Cx(e).Y({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xm(e[1]);i.push(a)}else r.done()})).next((function(){yv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ax(e,this.userId,t)}},{key:"Mn",value:function(e){var t=this;return Ix(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ct",value:function(t,n,r,i){return yv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ax(e,t,n){var r=km(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Cx(e).Y({range:a,J:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Mx(e){return qm(e,"mutations")}function Cx(e){return qm(e,"documentMutations")}function Ix(e){return qm(e,"mutationQueues")}var Rx=function(){function e(t){d(this,e),this.xn=t}return g(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"On",value:function(){return new e(0)}},{key:"Nn",value:function(){return new e(-1)}}]),e}(),Nx=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return g(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Bn(e).next((function(n){var r=new Rx(n.highestTargetId);return n.highestTargetId=r.next(),t.Ln(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Bn(e).next((function(e){return Uv.fromTimestamp(new Ov(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Ln(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.kn(e,t).next((function(){return n.Bn(e).next((function(r){return r.targetCount+=1,n.qn(t,r),n.Ln(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.kn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Px(e).delete(t.targetId)})).next((function(){return n.Bn(e)})).next((function(t){return yv(t.targetCount>0),t.targetCount-=1,n.Ln(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Px(e).Y((function(o,s){var u=Ob(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return nm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Px(e).Y((function(e,n){var r=Ob(n);t(r)}))}},{key:"Bn",value:function(e){return Dx(e).get("targetGlobalKey").next((function(e){return yv(null!==e),e}))}},{key:"Ln",value:function(e,t){return Dx(e).put("targetGlobalKey",t)}},{key:"kn",value:function(e,t){return Px(e).put(Ub(this.serializer,t))}},{key:"qn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ly(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Px(e).Y({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ob(n);hy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Lx(e);return t.forEach((function(t){var o=ym(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),nm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Lx(e);return nm.forEach(t,(function(t){var a=ym(t.path);return nm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Lx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Lx(e),i=Gy();return r.Y({range:n,J:!0},(function(e,t,n){var r=xm(e[1]),a=new jv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ym(t.path),r=IDBKeyRange.bound([n],[Lv(n)],!1,!0),i=0;return Lx(e).Y({index:"documentTargetsIndex",J:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"_t",value:function(e,t){return Px(e).get(t).next((function(e){return e?Ob(e):null}))}}]),e}();function Px(e){return qm(e,"targets")}function Dx(e){return qm(e,"targetGlobal")}function Lx(e){return qm(e,"targetDocuments")}function Ox(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=Pv(r,o);return 0===u?Pv(i,s):u}var Ux=function(){function e(t){d(this,e),this.Qn=t,this.buffer=new $m(Ox),this.Kn=0}return g(e,[{key:"$n",value:function(){return++this.Kn}},{key:"Un",value:function(e){var t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ox(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Fx=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Wn=null}return g(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}},{key:"started",get:function(){return null!==this.Wn}},{key:"Gn",value:function(e){var t=this;dv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Wn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!sm(e.t0)){e.next=12;break}dv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,em(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Bx=function(){function e(t,n){d(this,e),this.zn=t,this.params=n}return g(e,[{key:"calculateTargetCount",value:function(e,t){return this.zn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return nm.resolve(pm._e);var r=new Ux(t);return this.zn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.zn.Hn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.zn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.zn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(dv("LruGarbageCollector","Garbage collection skipped; disabled"),nm.resolve(wx)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(dv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),wx):n.Jn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.zn.getCacheSize(e)}},{key:"Jn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(dv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),fv()<=Mt.DEBUG&&dv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),nm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Vx(e,t){return new Bx(e,t)}var zx=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=Vx(this,n)}return g(e,[{key:"jn",value:function(e){var t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Yn",value:function(e){var t=0;return this.Hn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Hn",value:function(e,t){return this.Zn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return jx(e,n)}},{key:"removeReference",value:function(e,t,n){return jx(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return jx(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return Ix(e).Z((function(r){return Ax(e,r,t).next((function(e){return e&&(n=!0),nm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Zn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Uv.min()),Lx(e).delete(function(e){return[0,ym(e.path)]}(o))}))}));i.push(u)}})).next((function(){return nm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return jx(e,t)}},{key:"Zn",value:function(e,t){var n,r=Lx(e),i=pm._e;return r.Y({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==pm._e&&t(new jv(xm(n)),i),i=u,n=s):i=pm._e})).next((function(){i!==pm._e&&t(new jv(xm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function jx(e,t){return Lx(e).put(function(e,t){return{targetId:0,path:ym(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Hx=function(){function e(){d(this,e),this.changes=new Py((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return g(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ug.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?nm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Gx=function(){function e(t){d(this,e),this.serializer=t}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Kx(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Kx(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Nb(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.er(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ug.newInvalidDocument(t);return Kx(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Yx(t))},(function(e,i){r=n.tr(t,i)})).next((function(){return r}))}},{key:"nr",value:function(e,t){var n=this,r={size:0,document:Ug.newInvalidDocument(t)};return Kx(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Yx(t))},(function(e,i){r={document:n.tr(t,i),size:Ex(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ly();return this.rr(e,t,(function(e,t){var i=n.tr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r=Ly(),i=new Qm(jv.comparator);return this.rr(e,t,(function(e,t){var a=n.tr(e,t);r=r.insert(e,a),i=i.insert(e,Ex(t))})).next((function(){return{documents:r,sr:i}}))}},{key:"rr",value:function(e,t,n){if(t.isEmpty())return nm.resolve();var r=new $m(Jx);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Yx(r.first()),Yx(r.last())),a=r.getIterator(),o=a.getNext();return Kx(e).Y({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=jv.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Jx(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.U(Yx(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Nb(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kx(e).W(IDBKeyRange.bound(s,u,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=Ly(),s=A(e);try{for(s.s();!(n=s.n()).done;){var u=n.value,c=a.tr(jv.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);c.isFoundDocument()&&(Cy(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){s.e(l)}finally{s.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ly(),o=Qx(t,n),s=Qx(t,Qv.max());return Kx(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.tr(jv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new qx(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Xx(e).get("remoteDocumentGlobalKey").next((function(e){return yv(!!e),e}))}},{key:"er",value:function(e,t){return Xx(e).put("remoteDocumentGlobalKey",t)}},{key:"tr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=db(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=jv.fromSegments(t.noDocument.path),i=Db(t.noDocument.readTime);n=Ug.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return gv();var a=jv.fromSegments(t.unknownDocument.path),o=Db(t.unknownDocument.version);n=Ug.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ov(e[0],e[1]);return Uv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Uv.min()))return n}return Ug.newInvalidDocument(e)}}]),e}();function Wx(e){return new Gx(e)}var qx=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._r=e,i.trackRemovals=r,i.ar=new Py((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new $m((function(e,t){return Pv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.ar.get(a);if(n.push(t._r.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=Rb(t._r.serializer,o);i=i.add(a.path.popLast());var c=Ex(u);r+=c-s.size,n.push(t._r.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=Rb(t._r.serializer,o.convertToNoDocument(Uv.min()));n.push(t._r.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t._r.indexManager.addToCollectionParentIndex(e,r))})),n.push(this._r.updateMetadata(e,r)),nm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this._r.nr(e,t).next((function(e){return n.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this._r.ir(e,t).next((function(e){var t=e.documents;return e.sr.forEach((function(e,r){n.ar.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Hx);function Xx(e){return qm(e,"remoteDocumentGlobal")}function Kx(e){return qm(e,"remoteDocumentsV14")}function Yx(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Qx(e,t){var n=t.documentKey.path.toArray();return[e,Nb(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jx(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Pv(n[a],r[a]))return i;return(i=Pv(n.length,r.length))||((i=Pv(n[n.length-2],r[r.length-2]))||Pv(n[n.length-1],r[r.length-1]))}var Zx=g((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),$x=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return g(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&v_(r.mutation,e,ng.empty(),Ov.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Gy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gy(),i=By();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Uy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=By();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Gy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ly(),a=zy(),o=zy();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof __)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),v_(o.mutation,t,o.mutation.getFieldMask(),Ov.now())):a.set(t.key,ng.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Zx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=zy(),i=new Qm((function(e,t){return e-t})),a=Gy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=A(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ng.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Gy()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Vy();c.forEach((function(e){if(!a.has(e)){var n=d_(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return nm.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):by(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):nm.resolve(By()),s=-1,u=a;return o.next((function(t){return nm.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?nm.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Gy())})).next((function(e){return{batchId:s,changes:Fy(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new jv(t)).next((function(e){var t=Uy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Uy();return this.indexManager.getCollectionParents(e,a).next((function(s){return nm.forEach(s,(function(s){var u=function(e,t){return new my(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(a));return i.getDocumentsMatchingCollectionQuery(e,u,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ug.newInvalidDocument(r)))}));var n=Uy();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&v_(a.mutation,r,ng.empty(),Ov.now()),Cy(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),ew=function(){function e(t){d(this,e),this.serializer=t,this.ur=new Map,this.cr=new Map}return g(e,[{key:"getBundleMetadata",value:function(e,t){return nm.resolve(this.ur.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:rb(e.createTime)}}(t)),nm.resolve()}},{key:"getNamedQuery",value:function(e,t){return nm.resolve(this.cr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Fb(e.bundledQuery),readTime:rb(e.readTime)}}(t)),nm.resolve()}}]),e}(),tw=function(){function e(){d(this,e),this.overlays=new Qm(jv.comparator),this.lr=new Map}return g(e,[{key:"getOverlay",value:function(e,t){return nm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=By();return nm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.lt(e,t,i)})),nm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.lr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.lr.delete(n)),nm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=By(),i=t.length+1,a=new jv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return nm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Qm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=By(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=By(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return nm.resolve(u)}},{key:"lt",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new C_(t,n));var a=this.lr.get(t);void 0===a&&(a=Gy(),this.lr.set(t,a)),this.lr.set(t,a.add(n.key))}}]),e}(),nw=function(){function e(){d(this,e),this.hr=new $m(rw.Pr),this.Ir=new $m(rw.Tr)}return g(e,[{key:"isEmpty",value:function(){return this.hr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rw(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}},{key:"Er",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.dr(new rw(e,t))}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Rr",value:function(e){var t=this,n=new jv(new Bv([])),r=new rw(n,e),i=new rw(n,e+1),a=[];return this.Ir.forEachInRange([r,i],(function(e){t.dr(e),a.push(e.key)})),a}},{key:"Vr",value:function(){var e=this;this.hr.forEach((function(t){return e.dr(t)}))}},{key:"dr",value:function(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}},{key:"mr",value:function(e){var t=new jv(new Bv([])),n=new rw(t,e),r=new rw(t,e+1),i=Gy();return this.Ir.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rw(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rw=function(){function e(t,n){d(this,e),this.key=t,this.gr=n}return g(e,null,[{key:"Pr",value:function(e,t){return jv.comparator(e.key,t.key)||Pv(e.gr,t.gr)}},{key:"Tr",value:function(e,t){return Pv(e.gr,t.gr)||jv.comparator(e.key,t.key)}}]),e}(),iw=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new $m(rw.Pr)}return g(e,[{key:"checkEmpty",value:function(e){return nm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new A_(i,t,n,r);this.mutationQueue.push(a);var o,s=A(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.yr=this.yr.add(new rw(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return nm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return nm.resolve(this.wr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Sr(n),i=r<0?0:r;return nm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return nm.resolve(0===this.mutationQueue.length?-1:this.pr-1)}},{key:"getAllMutationBatches",value:function(e){return nm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rw(t,0),i=new rw(t,Number.POSITIVE_INFINITY),a=[];return this.yr.forEachInRange([r,i],(function(e){var t=n.wr(e.gr);a.push(t)})),nm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $m(Pv);return t.forEach((function(e){var t=new rw(e,0),i=new rw(e,Number.POSITIVE_INFINITY);n.yr.forEachInRange([t,i],(function(e){r=r.add(e.gr)}))})),nm.resolve(this.br(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;jv.isDocumentKey(i)||(i=i.child(""));var a=new rw(new jv(i),0),o=new $m(Pv);return this.yr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),a),nm.resolve(this.br(o))}},{key:"br",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.wr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;yv(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.yr;return nm.forEach(t.mutations,(function(i){var a=new rw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.yr=r}))}},{key:"Fn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rw(t,0),r=this.yr.firstAfterOrEqual(n);return nm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,nm.resolve()}},{key:"Dr",value:function(e,t){return this.Sr(e)}},{key:"Sr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"wr",value:function(e){var t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),aw=function(){function e(t){d(this,e),this.Cr=t,this.docs=new Qm(jv.comparator),this.size=0}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return nm.resolve(n?n.document.mutableCopy():Ug.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ly();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ug.newInvalidDocument(e))})),nm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ly(),a=t.path,o=new jv(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Jv(Yv(l),n)<=0||(r.has(l.key)||Cy(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return nm.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){gv()}},{key:"vr",value:function(e,t){return nm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ow(this)}},{key:"getSize",value:function(e){return nm.resolve(this.size)}}]),e}(),ow=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this))._r=e,r}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t._r.addEntry(e,i)):t._r.removeEntry(r)})),nm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this._r.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this._r.getEntries(e,t)}}]),n}(Hx),sw=function(){function e(t){d(this,e),this.persistence=t,this.Fr=new Py((function(e){return ly(e)}),hy),this.lastRemoteSnapshotVersion=Uv.min(),this.highestTargetId=0,this.Mr=0,this.Or=new nw,this.targetCount=0,this.Nr=Rx.On()}return g(e,[{key:"forEachTarget",value:function(e,t){return this.Fr.forEach((function(e,n){return t(n)})),nm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return nm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return nm.resolve(this.Mr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Nr.next(),nm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),nm.resolve()}},{key:"kn",value:function(e){this.Fr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Nr=new Rx(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.kn(t),this.targetCount+=1,nm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.kn(t),nm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,nm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Fr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),nm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return nm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fr.get(t)||null;return nm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Or.Er(t,n),nm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Or.Ar(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),nm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Or.Rr(t),nm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Or.mr(t);return nm.resolve(n)}},{key:"containsKey",value:function(e,t){return nm.resolve(this.Or.containsKey(t))}}]),e}(),uw=function(){function e(t,n){var r=this;d(this,e),this.Br={},this.overlays={},this.Lr=new pm(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new sw(this),this.indexManager=new dx,this.remoteDocumentCache=function(e){return new aw(e)}((function(e){return r.referenceDelegate.Qr(e)})),this.serializer=new Ib(n),this.Kr=new ew(this.serializer)}return g(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.kr=!1,Promise.resolve()}},{key:"started",get:function(){return this.kr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Br[e.toKey()];return n||(n=new iw(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Kr}},{key:"runTransaction",value:function(e,t,n){var r=this;dv("MemoryPersistence","Starting transaction:",e);var i=new cw(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((function(e){return r.referenceDelegate.Ur(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Wr",value:function(e,t){return nm.or(Object.values(this.Br).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cw=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return g(n)}($v),lw=function(){function e(t){d(this,e),this.persistence=t,this.Gr=new nw,this.zr=null}return g(e,[{key:"Hr",get:function(){if(this.zr)return this.zr;throw gv()}},{key:"addReference",value:function(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),nm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),nm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hr.add(t.toString()),nm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gr.Rr(t.targetId).forEach((function(e){return n.Hr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"$r",value:function(){this.zr=new Set}},{key:"Ur",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nm.forEach(this.Hr,(function(r){var i=jv.fromPath(r);return t.Jr(e,i).next((function(e){e||n.removeEntry(i,Uv.min())}))})).next((function(){return t.zr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Jr(e,t).next((function(e){e?n.Hr.delete(t.toString()):n.Hr.add(t.toString())}))}},{key:"Qr",value:function(e){return 0}},{key:"Jr",value:function(e,t){var n=this;return nm.or([function(){return nm.resolve(n.Gr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Wr(e,t)}])}}],[{key:"jr",value:function(t){return new e(t)}}]),e}(),hw=function(){function e(t){d(this,e),this.serializer=t}return g(e,[{key:"N",value:function(e,t,n,r){var i=this,a=new rm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wm,{unique:!0}),e.createObjectStore("documentMutations")}(e),fw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=nm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),fw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Uv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return nm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Zr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ei(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ni(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Um});t.createIndex("collectionPathOverlayIndex",Fm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Bm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Tm});t.createIndex("documentKeyIndex",Am),t.createIndex("collectionGroupIndex",Mm)}(e)})).next((function(){return i.ri(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ii(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Pm}).createIndex("sequenceNumberIndex",Dm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Lm}).createIndex("documentKeyIndex",Om,{unique:!1})}(e)}))),o}},{key:"Xr",value:function(e){var t=0;return e.store("remoteDocuments").Y((function(e,n){t+=Ex(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Zr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return nm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return nm.forEach(r,(function(r){yv(r.userId===n.userId);var i=Lb(t.serializer,r);return Sx(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ei",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Y((function(n,i){var a=new Bv(n),o=function(e){return[0,ym(e)]}(a);r.push(t.get(o).next((function(n){return n?nm.resolve():function(n){return t.put({targetId:0,path:ym(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return nm.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Nm});var n=t.store("collectionParents"),r=new px,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ym(i)})}};return t.store("remoteDocuments").Y({J:!0},(function(e,t){var n=new Bv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Y({J:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],xm(r));return i(a.popLast())}))}))}},{key:"ni",value:function(e){var t=this,n=e.store("targets");return n.Y((function(e,r){var i=Ob(r),a=Ub(t.serializer,i);return n.put(a)}))}},{key:"ri",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Y((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new jv(Bv.fromString(e.document.name).popFirst(5)):e.noDocument?jv.fromSegments(e.noDocument.path):e.unknownDocument?jv.fromSegments(e.unknownDocument.path):gv()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return nm.waitFor(r)}))}},{key:"ii",value:function(e,t){var n=this,r=t.store("mutations"),i=Wx(this.serializer),a=new uw(lw.jr,this.serializer.ut);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Gy();Lb(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),nm.forEach(r,(function(e,r){var o=new cv(r),s=Wb.ct(n.serializer,o),u=a.getIndexManager(o),c=Tx.ct(o,n.serializer,u,a.referenceDelegate);return new $x(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Wm(t,pm._e),e).next()}))}))}}]),e}();function fw(e){e.createObjectStore("targetDocuments",{keyPath:Im}).createIndex("documentTargetsIndex",Rm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cm,{unique:!0}),e.createObjectStore("targetGlobal")}var dw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pw=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=s,this.oi=c,this._i=l,this.ai=h,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=function(e){return Promise.resolve()},!e.D())throw new xv(bv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zx(this,i),this.Ii=n+"main",this.serializer=new Ib(u),this.Ti=new im(this.Ii,this.ai,new hw(this.serializer)),this.qr=new Nx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wx(this.serializer),this.Kr=new jb,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===l&&pv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return g(e,[{key:"start",value:function(){var e=this;return this.di().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xv(bv.FAILED_PRECONDITION,dw);return e.Ai(),e.Ri(),e.Vi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qr.getHighestSequenceNumber(t)}))})).then((function(t){e.Lr=new pm(t,e.oi)})).then((function(){e.kr=!0})).catch((function(t){return e.Ti&&e.Ti.close(),Promise.reject(t)}))}},{key:"mi",value:function(e){var t=this;return this.Pi=function(){var n=kt(xt().mark((function n(r){return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ti.L(function(){var t=kt(xt().mark((function t(n){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.di();case 4:case"end":return e.stop()}}),e)})))))}},{key:"di",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.Pi(!1)})))}))})).next((function(){return e.gi(t)})).next((function(n){return e.isPrimary&&!n?e.pi(t).next((function(){return!1})):!!n&&e.yi(t).next((function(){return!0}))}))})).catch((function(t){if(sm(t))return dv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return dv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.Pi(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return vw(e).get("owner").next((function(e){return nm.resolve(t.wi(e))}))}},{key:"Si",value:function(e){return mw(e).delete(this.clientId)}},{key:"bi",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Di(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=qm(e,"clientMetadata");return t.W().next((function(e){var n=a.Ci(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return nm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ei){n=A(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ei.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(){var e=this;this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.di().then((function(){return e.bi()})).then((function(){return e.Vi()}))}))}},{key:"wi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"gi",value:function(e){var t=this;return this._i?nm.resolve(!0):vw(e).get("owner").next((function(n){if(null!==n&&t.Di(n.leaseTimestampMs,5e3)&&!t.Fi(n.ownerId)){if(t.wi(n)&&t.networkEnabled)return!0;if(!t.wi(n)){if(!n.allowTabSynchronization)throw new xv(bv.FAILED_PRECONDITION,dw);return!1}}return!(!t.networkEnabled||!t.inForeground)||mw(e).W().next((function(e){return void 0===t.Ci(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&dv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=kt(xt().mark((function e(){var t=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),e.next=7,this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Wm(e,pm._e);return t.pi(n).next((function(){return t.Si(n)}))}));case 7:this.Ti.close(),this.Ni();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ci",value:function(e,t){var n=this;return e.filter((function(e){return n.Di(e.updateTimeMs,t)&&!n.Fi(e.clientId)}))}},{key:"Bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mw(t).W().next((function(t){return e.Ci(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.kr}},{key:"getMutationQueue",value:function(e,t){return Tx.ct(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new mx(e,this.serializer.ut.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Wb.ct(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Kr}},{key:"runTransaction",value:function(e,t,n){var r=this;dv("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Gm:14===e?Hm:13===e?jm:12===e?zm:11===e?Vm:void gv()}(this.ai);return this.Ti.runTransaction(e,a,o,(function(a){return i=new Wm(a,r.Lr?r.Lr.next():pm._e),"readwrite-primary"===t?r.fi(i).next((function(e){return!!e||r.gi(i)})).next((function(t){if(!t)throw pv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.Pi(!1)})),new xv(bv.FAILED_PRECONDITION,Zv);return n(i)})).next((function(e){return r.yi(i).next((function(){return e}))})):r.Li(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Li",value:function(e){var t=this;return vw(e).get("owner").next((function(e){if(null!==e&&t.Di(e.leaseTimestampMs,5e3)&&!t.Fi(e.ownerId)&&!t.wi(e)&&!(t._i||t.allowTabSynchronization&&e.allowTabSynchronization))throw new xv(bv.FAILED_PRECONDITION,dw)}))}},{key:"yi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vw(e).put("owner",t)}},{key:"pi",value:function(e){var t=this,n=vw(e);return n.get("owner").next((function(e){return t.wi(e)?(dv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):nm.resolve()}))}},{key:"Di",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(pv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ai",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.di()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"Ri",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Mi();var e=/(?:Version|Mobile)\/1[456]/;!nt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Oi",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Fi",value:function(e){var t;try{var n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return dv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return pv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Mi",value:function(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){pv("Failed to set zombie client id.",e)}}},{key:"Ni",value:function(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return im.D()}}]),e}();function vw(e){return qm(e,"owner")}function mw(e){return qm(e,"clientMetadata")}function gw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var yw=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}return g(e,null,[{key:"Qi",value:function(t,n){var r,i=Gy(),a=Gy(),o=A(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),_w=function(){function e(){d(this,e),this._documentReadCount=0}return g(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),bw=function(){function e(){d(this,e),this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}return g(e,[{key:"initialize",value:function(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.zi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new _w;return i.Hi(e,t,n).next((function(r){if(a.result=r,i.$i)return i.Ji(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Ji",value:function(e,t,n,r){return n.documentReadCount<this.Ui?(fv()<=Mt.DEBUG&&dv("QueryEngine","SDK will not create cache indexes for query:",My(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),nm.resolve()):(fv()<=Mt.DEBUG&&dv("QueryEngine","Query:",My(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(fv()<=Mt.DEBUG&&dv("QueryEngine","The SDK decides to create cache indexes for query:",My(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wy(t))):nm.resolve())}},{key:"zi",value:function(e,t){var n=this;if(_y(t))return nm.resolve(null);var r=wy(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ey(t,null,"F"),r=wy(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Gy.apply(void 0,f(i));return n.Gi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Yi(t,i);return n.Zi(t,o,a,r.readTime)?n.zi(e,Ey(t,null,"F")):n.Xi(e,o,t,r)}))}))})))}))}},{key:"ji",value:function(e,t,n,r){var i=this;return _y(t)||r.isEqual(Uv.min())?nm.resolve(null):this.Gi.getDocuments(e,n).next((function(a){var o=i.Yi(t,a);return i.Zi(t,o,n,r)?nm.resolve(null):(fv()<=Mt.DEBUG&&dv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),My(t)),i.Xi(e,o,t,Kv(r,-1)).next((function(e){return e})))}))}},{key:"Yi",value:function(e,t){var n=new $m(Ry(e));return t.forEach((function(t,r){Cy(e,r)&&(n=n.add(r))})),n}},{key:"Zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Hi",value:function(e,t,n){return fv()<=Mt.DEBUG&&dv("QueryEngine","Using full collection scan to execute query:",My(t)),this.Gi.getDocumentsMatchingQuery(e,t,Qv.min(),n)}},{key:"Xi",value:function(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xw=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.es=n,this.serializer=i,this.ts=new Qm(Pv),this.ns=new Py((function(e){return ly(e)}),hy),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}return g(e,[{key:"os",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $x(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ts)}))}}]),e}();function ww(e,t,n,r){return new xw(e,t,n,r)}function kw(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.os(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Gy(),u=A(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=A(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(_){h.e(_)}finally{h.f()}}}catch(_){u.e(_)}finally{u.f()}var d,p=A(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=A(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(_){g.e(_)}finally{g.f()}}}catch(_){p.e(_)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{_s:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}function Ew(e,t){var n=_v(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=nm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);yv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Gy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Tw(e){var t=_v(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qr.getLastRemoteSnapshotVersion(e)}))}function Aw(e,t){var n=_v(e),r=t.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.qr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.qr.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(ig.EMPTY_BYTE_STRING,Uv.min()).withLastLimboFreeSnapshotVersion(Uv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.qr.updateTargetData(e,c))}}));var s=Ly(),u=Gy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Mw(e,a,t.documentUpdates).next((function(e){s=e.us,u=e.cs}))),!r.isEqual(Uv.min())){var c=n.qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return nm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.ts=i,e}))}function Mw(e,t,n){var r=Gy(),i=Gy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ly();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Uv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):dv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{us:r,cs:i}}))}function Cw(e,t){var n=_v(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Iw(e,t){var n=_v(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qr.getTargetData(e,t).next((function(i){return i?(r=i,nm.resolve(r)):n.qr.allocateTargetId(e).next((function(i){return r=new Cb(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}function Rw(e,t,n){return Nw.apply(this,arguments)}function Nw(){return Nw=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_v(t),a=i.ts.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),sm(e.t1)){e.next=12;break}throw e.t1;case 12:dv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ts=i.ts.remove(n),i.ns.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Nw.apply(this,arguments)}function Pw(e,t,n){var r=_v(e),i=Uv.min(),a=Gy();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=_v(e),i=r.ns.get(n);return void 0!==i?nm.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,wy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.es.getDocumentsMatchingQuery(e,t,n?i:Uv.min(),n?a:Gy())})).next((function(e){return Ow(r,Iy(t),e),{documents:e,ls:a}}))}))}function Dw(e,t){var n=_v(e),r=_v(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r._t(e,t).next((function(e){return e?e.target:null}))}))}function Lw(e,t){var n=_v(e),r=n.rs.get(t)||Uv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ss.getAllFromCollectionGroup(e,t,Kv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Ow(n,t,e),e}))}function Ow(e,t,n){var r=e.rs.get(t)||Uv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}function Uw(e,t,n,r){return Fw.apply(this,arguments)}function Fw(){return Fw=kt(xt().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=_v(t),o=Gy(),s=Ly(),u=A(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.hs(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Ps(l)).setReadTime(n.Is(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.ss.newChangeBuffer({trackRemovals:!0}),e.next=7,Iw(a,function(e){return wy(yy(Bv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Mw(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.qr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.qr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs)})).next((function(){return t.us}))}))})));case 9:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function Bw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=kt(xt().mark((function e(t,n){var r,i,a,o=arguments;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Gy(),e.next=3,Iw(t,wy(Fb(n.bundledQuery)));case 3:return i=e.sent,a=_v(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=rb(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kr.saveNamedQuery(e,n);var o=i.withResumeToken(ig.EMPTY_BYTE_STRING,t);return a.ts=a.ts.insert(o.targetId,o),a.qr.updateTargetData(e,o).next((function(){return a.qr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.qr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function zw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function jw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Hw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Gw=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return g(e,[{key:"Es",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ts",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new xv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(pv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ww=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return g(e,[{key:"Es",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ts",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xv(i.error.code,i.error.message))),a?new e(t,i.state,r):(pv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),qw=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return g(e,null,[{key:"Ts",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=qy(),o=0;i&&o<r.activeTargetIds.length;++o)i=gm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(pv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Xw=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return g(e,null,[{key:"Ts",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(pv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Kw=function(){function e(){d(this,e),this.activeTargetIds=qy()}return g(e,[{key:"ds",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Es",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Yw=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Qm(Pv),this.started=!1,this.ps=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ys=zw(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Kw),this.Ss=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}return g(e,[{key:"start",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Bi();case 2:t=e.sent,n=A(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Rs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(zw(this.persistenceKey,i)))&&(o=qw.Ts(i,a))&&(this.gs=this.gs.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Fs(),(s=this.storage.getItem(this.Cs))&&(u=this.Ms(s))&&this.xs(u),c=A(this.ps);try{for(c.s();!(l=c.n()).done;)h=l.value,this.fs(h)}catch(d){c.e(d)}finally{c.f()}this.ps=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Os(this.gs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ns(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ns(e,t,n),this.Bs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Hw(this.persistenceKey,e));if(n){var r=Ww.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ls.As(e),this.Fs()}},{key:"isLocalQueryTarget",value:function(e){return this.Ls.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Hw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ks(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Bs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.qs(e)}},{key:"notifyBundleLoaded",value:function(e){this.Qs(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return dv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){dv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){dv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"fs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(dv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void pv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(kt(xt().mark((function e(){var r,i,a,o,s,u,c;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ss.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Ks(n.key),e.abrupt("return",t.$s(r,null));case 6:if(!(i=t.Us(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.$s(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.bs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Ws(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Gs(a));case 16:e.next=41;break;case 18:if(!t.Ds.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.zs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.js(o));case 23:e.next=41;break;case 25:if(n.key!==t.Cs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Ms(n.newValue))){e.next=30;break}return e.abrupt("return",t.xs(s));case 30:e.next=41;break;case 32:if(n.key!==t.ws){e.next=37;break}u=function(e){var t=pm._e;if(null!=e)try{var n=JSON.parse(e);yv("number"==typeof n),t=n}catch(e){pv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==pm._e&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.vs){e.next=41;break}return c=t.Hs(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Js(e)})));case 41:e.next=44;break;case 43:t.ps.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ls",get:function(){return this.gs.get(this.Rs)}},{key:"Fs",value:function(){this.setItem(this.ys,this.Ls.Es())}},{key:"Ns",value:function(e,t,n){var r=new Gw(this.currentUser,e,t,n),i=jw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}},{key:"Bs",value:function(e){var t=jw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"qs",value:function(e){var t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}},{key:"ks",value:function(e,t,n){var r=Hw(this.persistenceKey,e),i=new Ww(e,t,n);this.setItem(r,i.Es())}},{key:"Qs",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}},{key:"Ks",value:function(e){var t=this.Ss.exec(e);return t?t[1]:null}},{key:"Us",value:function(e,t){var n=this.Ks(e);return qw.Ts(n,t)}},{key:"Ws",value:function(e,t){var n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gw.Ts(new cv(i),r,t)}},{key:"zs",value:function(e,t){var n=this.Ds.exec(e),r=Number(n[1]);return Ww.Ts(r,t)}},{key:"Ms",value:function(e){return Xw.Ts(e)}},{key:"Hs",value:function(e){return JSON.parse(e)}},{key:"Gs",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Ys(t.batchId,t.state,t.error));case 2:dv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"js",value:function(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}},{key:"$s",value:function(e,t){var n=this,r=t?this.gs.insert(e,t):this.gs.remove(e),i=this.Os(this.gs),a=this.Os(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Xs(o,s).then((function(){n.gs=r}))}},{key:"xs",value:function(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Os",value:function(e){var t=qy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Qw=function(){function e(){d(this,e),this.eo=new Kw,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return g(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.eo.ds(e),this.no[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.no[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.eo.As(e)}},{key:"isLocalQueryTarget",value:function(e){return this.eo.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.no[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.eo.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.eo.activeTargetIds.has(e)}},{key:"start",value:function(){return this.eo=new Kw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Jw=function(){function e(){d(this,e)}return g(e,[{key:"ro",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zw=function(){function e(){var t=this;d(this,e),this.io=function(){return t.so()},this.oo=function(){return t._o()},this.ao=[],this.uo()}return g(e,[{key:"ro",value:function(e){this.ao.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}},{key:"uo",value:function(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}},{key:"so",value:function(){dv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=A(this.ao);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_o",value:function(){dv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=A(this.ao);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),$w=null;function ek(){return null===$w?$w=268435456+Math.round(2147483648*Math.random()):$w++,"0x"+$w.toString(16)}var tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},nk=function(){function e(t){d(this,e),this.co=t.co,this.lo=t.lo}return g(e,[{key:"ho",value:function(e){this.Po=e}},{key:"Io",value:function(e){this.To=e}},{key:"onMessage",value:function(e){this.Eo=e}},{key:"close",value:function(){this.lo()}},{key:"send",value:function(e){this.co(e)}},{key:"Ao",value:function(){this.Po()}},{key:"Ro",value:function(e){this.To(e)}},{key:"Vo",value:function(e){this.Eo(e)}}]),e}(),rk="WebChannelConnection",ik=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return g(n,[{key:"Do",value:function(e,t,n,r){var i=ek();return new Promise((function(a,o){var s=new av;s.setWithCredentials(!0),s.listenOnce(tv.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ev.NO_ERROR:var t=s.getResponseJson();dv(rk,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case ev.TIMEOUT:dv(rk,"RPC '".concat(e,"' ").concat(i," timed out")),o(new xv(bv.DEADLINE_EXCEEDED,"Request time out"));break;case ev.HTTP_ERROR:var n=s.getStatus();if(dv(rk,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bv).indexOf(t)>=0?t:bv.UNKNOWN}(u.status);o(new xv(c,u.message))}else o(new xv(bv.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new xv(bv.UNAVAILABLE,"Connection failed."));break;default:gv()}}finally{dv(rk,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);dv(rk,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"vo",value:function(e,t,n){var r=ek(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zp(),o=$p(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.bo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");dv(rk,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new nk({co:function(t){f?dv(rk,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(dv(rk,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),dv(rk,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},lo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,iv.EventType.OPEN,(function(){f||dv(rk,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,iv.EventType.CLOSE,(function(){f||(f=!0,dv(rk,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Ro())})),p(l,iv.EventType.ERROR,(function(t){f||(f=!0,vv(rk,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Ro(new xv(bv.UNAVAILABLE,"The operation could not be completed")))})),p(l,iv.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];yv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){dv(rk,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=k_[e];if(void 0!==t)return N_(t)}(s),c=o.message;void 0===u&&(u=bv.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.Ro(new xv(u,c)),l.close()}else dv(rk,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Vo(i)}})),p(o,nv.STAT_EVENT,(function(t){t.stat===rv.PROXY?dv(rk,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===rv.NOPROXY&&dv(rk,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ao()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=n+"://"+t.host,this.fo="projects/".concat(r,"/databases/").concat(i),this.po="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return g(e,[{key:"yo",get:function(){return!1}},{key:"wo",value:function(e,t,n,r,i){var a=ek(),o=this.So(e,t);dv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(s,r,i),this.Do(e,o,s,n).then((function(t){return dv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw vv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Co",value:function(e,t,n,r,i,a){return this.wo(e,t,n,r,i)}},{key:"bo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+lv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"So",value:function(e,t){var n=tk[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function ak(){return"undefined"!=typeof window?window:null}function ok(){return"undefined"!=typeof document?document:null}function sk(e){return new Z_(e,!0)}var uk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=a,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}return g(e,[{key:"reset",value:function(){this.Oo=0}},{key:"Lo",value:function(){this.Oo=this.xo}},{key:"ko",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&dv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Bo=Date.now(),e()})),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}},{key:"Qo",value:function(){null!==this.No&&(this.No.skipDelay(),this.No=null)}},{key:"cancel",value:function(){null!==this.No&&(this.No.cancel(),this.No=null)}},{key:"qo",value:function(){return(Math.random()-.5)*this.Oo}}]),e}(),ck=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.si=t,this.Ko=r,this.$o=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new uk(t,n)}return g(e,[{key:"jo",value:function(){return 1===this.state||5===this.state||this.Ho()}},{key:"Ho",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Jo()}},{key:"stop",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){this.state=0,this.zo.reset()}},{key:"Zo",value:function(){var e=this;this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(function(){return e.Xo()})))}},{key:"e_",value:function(e){this.t_(),this.stream.send(e)}},{key:"Xo",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ho()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"t_",value:function(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"close",value:function(){var e=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==t?this.zo.reset():n&&n.code===bv.RESOURCE_EXHAUSTED?(pv(n.toString()),pv("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===bv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Io(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"r_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Uo===n&&e.s_(i,a)}),(function(n){t((function(){var t=new xv(bv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.o_(t)}))}))}},{key:"s_",value:function(e,t){var n=this,r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((function(){r((function(){return n.state=2,n.Go=n.si.enqueueAfterDelay(n.$o,1e4,(function(){return n.Ho()&&(n.state=3),Promise.resolve()})),n.listener.ho()}))})),this.stream.Io((function(e){r((function(){return n.o_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Jo",value:function(){var e=this;this.state=5,this.zo.ko(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"o_",value:function(e){return dv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"i_",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.Uo===e?n():(dv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),lk=function(e){_(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return g(n,[{key:"__",value:function(e,t){return this.connection.vo("Listen",e,t)}},{key:"onMessage",value:function(e){this.zo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(yv(void 0===t||"string"==typeof t),ig.fromBase64String(t||"")):(yv(void 0===t||t instanceof Uint8Array),ig.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?bv.UNKNOWN:N_(e.code);return new xv(t,e.message||"")}(o);n=new G_(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=sb(e,u.document.name),l=rb(u.document.updateTime),h=u.document.createTime?rb(u.document.createTime):Uv.min(),f=new Lg({mapValue:{fields:u.document.fields}}),d=Ug.newFoundDocument(c,l,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new j_(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=sb(e,m.document),y=m.readTime?rb(m.readTime):Uv.min(),_=Ug.newNoDocument(g,y),b=m.removedTargetIds||[];n=new j_([],b,_.key,_)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var w=sb(e,x.document),k=x.removedTargetIds||[];n=new j_([],k,w,null)}else{if(!("filter"in t))return gv();t.filter;var S=t.filter;S.targetId;var E=S.count,T=void 0===E?0:E,A=S.unchangedNames,M=new I_(T,A),C=S.targetId;n=new H_(C,M)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Uv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uv.min():t.readTime?rb(t.readTime):Uv.min()}(e);return this.listener.a_(t,n)}},{key:"u_",value:function(e){var t={};t.database=lb(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=fy(r)?{documents:gb(e,r)}:{query:yb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tb(e,t.resumeToken);var i=$_(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Uv.min())>0){n.readTime=eb(e,t.snapshotVersion.toTimestamp());var a=$_(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}},{key:"c_",value:function(e){var t={};t.database=lb(this.serializer),t.removeTarget=e,this.e_(t)}}]),n}(ck),hk=function(e){_(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.l_=!1,u}return g(n,[{key:"h_",get:function(){return this.l_}},{key:"start",value:function(){this.l_=!1,this.lastStreamToken=void 0,er(b(n.prototype),"start",this).call(this)}},{key:"r_",value:function(){this.l_&&this.P_([])}},{key:"__",value:function(e,t){return this.connection.vo("Write",e,t)}},{key:"onMessage",value:function(e){if(yv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();var t=function(e,t){return e&&e.length>0?(yv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?rb(e.updateTime):rb(t);return n.isEqual(Uv.min())&&(n=rb(t)),new c_(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=rb(e.commitTime);return this.listener.I_(n,t)}return yv(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}},{key:"E_",value:function(){var e={};e.database=lb(this.serializer),this.e_(e)}},{key:"P_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return vb(t.serializer,e)}))};this.e_(n)}}]),n}(ck),fk=function(e){_(n,e);var t=k(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.d_=!1,o}return g(n,[{key:"A_",value:function(){if(this.d_)throw new xv(bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"wo",value:function(e,t,n){var r=this;return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.connection.wo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new xv(bv.UNKNOWN,e.toString())}))}},{key:"Co",value:function(e,t,n,r){var i=this;return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.connection.Co(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new xv(bv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.d_=!0}}]),n}(g((function e(){d(this,e)})));var dk=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}return g(e,[{key:"g_",value:function(){var e=this;0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.m_=null,e.y_("Backend didn't respond within 10 seconds."),e.p_("Offline"),Promise.resolve()})))}},{key:"w_",value:function(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}},{key:"set",value:function(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}},{key:"p_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"y_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(pv(t),this.f_=!1):dv("OnlineStateTracker",t)}},{key:"S_",value:function(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}]),e}(),pk=g((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=a,this.F_.ro((function(e){r.enqueueAndForget(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ek(o),!e.t0){e.next=5;break}return dv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_v(t)).C_.add(4),e.next=4,gk(n);case 4:return n.M_.set("Unknown"),n.C_.delete(4),e.next=8,vk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.M_=new dk(r,i)}));function vk(e){return mk.apply(this,arguments)}function mk(){return(mk=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ek(t)){e.next=18;break}n=A(t.v_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function gk(e){return yk.apply(this,arguments)}function yk(){return(yk=kt(xt().mark((function e(t){var n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=A(t.v_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function _k(e,t){var n=_v(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Sk(n)?kk(n):eS(n).Ho()&&xk(n,t))}function bk(e,t){var n=_v(e),r=eS(n);n.D_.delete(t),r.Ho()&&wk(n,t),0===n.D_.size&&(r.Ho()?r.Zo():Ek(n)&&n.M_.set("Unknown"))}function xk(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Uv.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}eS(e).u_(t)}function wk(e,t){e.x_.Oe(t),eS(e).c_(t)}function kk(e){e.x_=new q_({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},_t:function(t){return e.D_.get(t)||null},nt:function(){return e.datastore.serializer.databaseId}}),eS(e).start(),e.M_.g_()}function Sk(e){return Ek(e)&&!eS(e).jo()&&e.D_.size>0}function Ek(e){return 0===_v(e).C_.size}function Tk(e){e.x_=void 0}function Ak(e){return Mk.apply(this,arguments)}function Mk(){return(Mk=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.D_.forEach((function(e,n){xk(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ck(e,t){return Ik.apply(this,arguments)}function Ik(){return(Ik=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tk(t),Sk(t)?(t.M_.w_(n),kk(t)):t.M_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rk(e,t,n){return Nk.apply(this,arguments)}function Nk(){return Nk=kt(xt().mark((function e(t,n,r){var i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.M_.set("Online"),!(n instanceof G_&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=A(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.D_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.D_.delete(o),t.x_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),dv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Pk(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof j_?t.x_.$e(n):n instanceof H_?t.x_.Je(n):t.x_.Ge(n),r.isEqual(Uv.min())){e.next=29;break}return e.prev=14,e.next=17,Tw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.x_.it(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.D_.get(t);if(r){e.D_.set(t,r.withResumeToken(ig.EMPTY_BYTE_STRING,r.snapshotVersion)),wk(e,t);var i=new Cb(r.target,t,n,r.sequenceNumber);xk(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),dv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Pk(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Nk.apply(this,arguments)}function Pk(e,t,n){return Dk.apply(this,arguments)}function Dk(){return(Dk=kt(xt().mark((function e(t,n,r){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sm(n)){e.next=2;break}throw n;case 2:return t.C_.add(1),e.next=5,gk(t);case 5:t.M_.set("Offline"),r||(r=function(){return Tw(t.localStore)}),t.asyncQueue.enqueueRetryable(kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.C_.delete(1),e.next=6,vk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lk(e,t){return t().catch((function(n){return Pk(e,n,t)}))}function Ok(e){return Uk.apply(this,arguments)}function Uk(){return Uk=kt(xt().mark((function e(t){var n,r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_v(t),r=tS(n),i=n.b_.length>0?n.b_[n.b_.length-1].batchId:-1;case 2:if(!Fk(n)){e.next=19;break}return e.prev=3,e.next=6,Cw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.b_.length&&r.Zo(),e.abrupt("break",19);case 10:i=a.batchId,Bk(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Pk(n,e.t0);case 17:e.next=2;break;case 19:Vk(n)&&zk(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Uk.apply(this,arguments)}function Fk(e){return Ek(e)&&e.b_.length<10}function Bk(e,t){e.b_.push(t);var n=tS(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Vk(e){return Ek(e)&&!tS(e).jo()&&e.b_.length>0}function zk(e){tS(e).start()}function jk(e){return Hk.apply(this,arguments)}function Hk(){return(Hk=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tS(t).E_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gk(e){return Wk.apply(this,arguments)}function Wk(){return(Wk=kt(xt().mark((function e(t){var n,r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=tS(t),r=A(t.b_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.P_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qk(e,t,n){return Xk.apply(this,arguments)}function Xk(){return Xk=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.b_.shift(),a=M_.from(i,n,r),e.next=3,Lk(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Ok(t);case 5:case"end":return e.stop()}}),e)}))),Xk.apply(this,arguments)}function Kk(e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=kt(xt().mark((function e(t,n){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&tS(t).h_,!e.t0){e.next=4;break}return e.next=4,function(){var e=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return R_(e)&&e!==bv.ABORTED}(n.code)){e.next=7;break}return r=t.b_.shift(),tS(t).Yo(),e.next=5,Lk(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Ok(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Vk(t)&&zk(t);case 5:case"end":return e.stop()}}),e)}))),Yk.apply(this,arguments)}function Qk(e,t){return Jk.apply(this,arguments)}function Jk(){return Jk=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_v(t)).asyncQueue.verifyOperationInProgress(),dv("RemoteStore","RemoteStore received new credentials"),i=Ek(r),r.C_.add(3),e.next=6,gk(r);case 6:return i&&r.M_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.C_.delete(3),e.next=12,vk(r);case 12:case"end":return e.stop()}}),e)}))),Jk.apply(this,arguments)}function Zk(e,t){return $k.apply(this,arguments)}function $k(){return($k=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_v(t),!n){e.next=7;break}return r.C_.delete(2),e.next=5,vk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.C_.add(2),e.next=12,gk(r);case 12:r.M_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eS(e){return e.O_||(e.O_=function(e,t,n){var r=_v(e);return r.A_(),new lk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Ak.bind(null,e),Io:Ck.bind(null,e),a_:Rk.bind(null,e)}),e.v_.push(function(){var t=kt(xt().mark((function t(n){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.O_.Yo(),Sk(e)?kk(e):e.M_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.O_.stop();case 6:Tk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.O_}function tS(e){return e.N_||(e.N_=function(e,t,n){var r=_v(e);return r.A_(),new hk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:jk.bind(null,e),Io:Kk.bind(null,e),T_:Gk.bind(null,e),I_:qk.bind(null,e)}),e.v_.push(function(){var t=kt(xt().mark((function t(n){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.N_.Yo(),t.next=4,Ok(e);case 4:t.next=9;break;case 6:return t.next=8,e.N_.stop();case 8:e.b_.length>0&&(dv("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}var nS=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xv(bv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function rS(e,t){if(pv("AsyncQueue","".concat(t,": ").concat(e)),sm(e))return new xv(bv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var iS=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||jv.comparator(e.key,n.key)}:function(e,t){return jv.comparator(e.key,t.key)},this.keyedMap=Uy(),this.sortedSet=new Qm(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),aS=function(){function e(){d(this,e),this.B_=new Qm(jv.comparator)}return g(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):gv():this.B_=this.B_.insert(t,e)}},{key:"L_",value:function(){var e=[];return this.B_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),oS=function(){function e(t,n,r,i,a,o,s,u,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ty(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,iS.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),sS=g((function e(){d(this,e),this.k_=void 0,this.listeners=[]})),uS=g((function e(){d(this,e),this.queries=new Py((function(e){return Ay(e)}),Ty),this.onlineState="Unknown",this.q_=new Set}));function cS(e,t){return lS.apply(this,arguments)}function lS(){return lS=kt(xt().mark((function e(t,n){var r,i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_v(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new sS),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.k_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=rS(e.t0,"Initialization of query '".concat(My(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Q_(r.onlineState),o.k_&&n.K_(o.k_)&&vS(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),lS.apply(this,arguments)}function hS(e,t){return fS.apply(this,arguments)}function fS(){return fS=kt(xt().mark((function e(t,n){var r,i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_v(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}function dS(e,t){var n,r=_v(e),i=!1,a=A(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=A(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.K_(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.k_=o}}}catch(h){a.e(h)}finally{a.f()}i&&vS(r)}function pS(e,t,n){var r=_v(e),i=r.queries.get(t);if(i){var a,o=A(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function vS(e){e.q_.forEach((function(e){e.next()}))}var mS=function(){function e(t,n,r){d(this,e),this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}return g(e,[{key:"K_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=A(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new oS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.W_?this.z_(e)&&(this.U_.next(e),a=!0):this.j_(e,this.onlineState)&&(this.H_(e),a=!0),this.G_=e,a}},{key:"onError",value:function(e){this.U_.error(e)}},{key:"Q_",value:function(e){this.onlineState=e;var t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}},{key:"j_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"z_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"H_",value:function(e){e=oS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}]),e}(),gS=function(){function e(t,n){d(this,e),this.Y_=t,this.byteLength=n}return g(e,[{key:"Z_",value:function(){return"metadata"in this.Y_}}]),e}(),yS=function(){function e(t){d(this,e),this.serializer=t}return g(e,[{key:"hs",value:function(e){return sb(this.serializer,e)}},{key:"Ps",value:function(e){return e.metadata.exists?db(this.serializer,e.document,!1):Ug.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}},{key:"Is",value:function(e){return rb(e)}}]),e}(),_S=function(){function e(t,n,r){d(this,e),this.X_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bS(t)}return g(e,[{key:"ea",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;var n=Bv.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ta",value:function(e){var t,n=new Map,r=new yS(this.serializer),i=A(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.hs(a.metadata.name),u=A(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Gy()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uw(this.localStore,new yS(this.serializer),this.documents,this.X_.id);case 2:t=e.sent,n=this.ta(this.documents),r=A(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Bw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function bS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xS=g((function e(t){d(this,e),this.key=t})),wS=g((function e(t){d(this,e),this.key=t})),kS=function(){function e(t,n){d(this,e),this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Gy(),this.mutatedKeys=Gy(),this._a=Ry(t),this.aa=new iS(this._a)}return g(e,[{key:"ua",get:function(){return this.ia}},{key:"ca",value:function(e,t){var n=this,r=t?t.la:new aS,i=t?t.aa:this.aa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Cy(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.ha(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n._a(h,u)>0||c&&n._a(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:s,mutatedKeys:a}}},{key:"ha",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;var o=e.la.L_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gv()}};return n(e)-n(t)}(e.type,t.type)||i._a(e.doc,t.doc)})),this.Pa(n),r=null!=r&&r;var s=t&&!r?this.Ia():[],u=0===this.oa.size&&this.current&&!r?1:0,c=u!==this.sa;return this.sa=u,0!==o.length||c?{snapshot:new oS(this.query,e.aa,a,o,e.mutatedKeys,0===u,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}},{key:"Q_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new aS,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}},{key:"Ea",value:function(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}},{key:"Pa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ia=t.ia.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ia=t.ia.delete(e)})),this.current=e.current)}},{key:"Ia",value:function(){var e=this;if(!this.current)return[];var t=this.oa;this.oa=Gy(),this.aa.forEach((function(t){e.Ea(t.key)&&(e.oa=e.oa.add(t.key))}));var n=[];return t.forEach((function(t){e.oa.has(t)||n.push(new wS(t))})),this.oa.forEach((function(e){t.has(e)||n.push(new xS(e))})),n}},{key:"da",value:function(e){this.ia=e.ls,this.oa=Gy();var t=this.ca(e.documents);return this.applyChanges(t,!0)}},{key:"Aa",value:function(){return oS.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}]),e}(),SS=g((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),ES=g((function e(t){d(this,e),this.key=t,this.Ra=!1})),TS=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Py((function(e){return Ay(e)}),Ty),this.fa=new Map,this.ga=new Set,this.pa=new Qm(jv.comparator),this.ya=new Map,this.wa=new nw,this.Sa={},this.ba=new Map,this.Da=Rx.Nn(),this.onlineState="Unknown",this.Ca=void 0}return g(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ca}}]),e}();function AS(e,t){return MS.apply(this,arguments)}function MS(){return MS=kt(xt().mark((function e(t,n){var r,i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bE(t),!(o=r.ma.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Aa(),e.next=15;break;case 6:return e.next=8,Iw(r.localStore,wy(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,CS(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&_k(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),MS.apply(this,arguments)}function CS(e,t,n,r,i){return IS.apply(this,arguments)}function IS(){return IS=kt(xt().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.va=function(e,n,r){return function(){var e=kt(xt().mark((function e(t,n,r,i){var a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ca(r),e.t0=a.Zi,!e.t0){e.next=6;break}return e.next=5,Pw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ca(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=i&&null!=i.targetMismatches.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o,s),e.abrupt("return",(QS(t,n.targetId,u.Ta),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Pw(t.localStore,n,!0);case 3:return o=e.sent,s=new kS(n,o.ls),u=s.ca(o.documents),c=z_.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),QS(t,r,l.Ta),h=new SS(n,r,s),e.abrupt("return",(t.ma.set(n,h),t.fa.has(r)?t.fa.get(r).push(n):t.fa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function RS(e,t){return NS.apply(this,arguments)}function NS(){return NS=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_v(t),i=r.ma.get(n),!((a=r.fa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.fa.set(i.targetId,a.filter((function(e){return!Ty(e,n)}))),void r.ma.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Rw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bk(r.remoteStore,i.targetId),KS(r,i.targetId)})).catch(em);case 9:e.next=14;break;case 11:return KS(r,i.targetId),e.next=14,Rw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function PS(e,t,n){return DS.apply(this,arguments)}function DS(){return DS=kt(xt().mark((function e(t,n,r){var i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=_v(e),a=Ov.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Gy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Ly(),u=Gy();return i.ss.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=A(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=m_(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new __(c.key,l,Og(l.value.mapValue),l_.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Fy(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Sa[e.currentUser.toKey()];r||(r=new Qm(Pv)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,$S(i,a.changes);case 9:return e.next=11,Ok(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=rS(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),DS.apply(this,arguments)}function LS(e,t){return OS.apply(this,arguments)}function OS(){return OS=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),e.prev=1,e.next=4,Aw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ya.get(t);n&&(yv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ra=!0:e.modifiedDocuments.size>0?yv(n.Ra):e.removedDocuments.size>0&&(yv(n.Ra),n.Ra=!1))})),e.next=8,$S(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,em(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),OS.apply(this,arguments)}function US(e,t,n){var r=_v(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ma.forEach((function(e,n){var r=n.view.Q_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=_v(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=A(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Q_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&vS(n)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function FS(e,t,n){return BS.apply(this,arguments)}function BS(){return BS=kt(xt().mark((function e(t,n,r){var i,a,o,s,u,c;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_v(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ya.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Qm(jv.comparator)).insert(o,Ug.newNoDocument(o,Uv.min())),u=Gy().add(o),c=new V_(Uv.min(),new Map,new Qm(Pv),s,u),e.next=9,LS(i,c);case 9:i.pa=i.pa.remove(o),i.ya.delete(n),ZS(i),e.next=16;break;case 14:return e.next=16,Rw(i.localStore,n,!1).then((function(){return KS(i,n,r)})).catch(em);case 16:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function VS(e,t){return zS.apply(this,arguments)}function zS(){return zS=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),i=n.batch.batchId,e.prev=1,e.next=4,Ew(r.localStore,n);case 4:return a=e.sent,XS(r,i,null),qS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,$S(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,em(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zS.apply(this,arguments)}function jS(e,t,n){return HS.apply(this,arguments)}function HS(){return HS=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_v(t),e.prev=1,e.next=4,function(e,t){var n=_v(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return yv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,XS(i,n,r),qS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,$S(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,em(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),HS.apply(this,arguments)}function GS(e,t){return WS.apply(this,arguments)}function WS(){return WS=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ek((r=_v(t)).remoteStore)||dv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=_v(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ba.get(i)||[]).push(n),r.ba.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=rS(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),WS.apply(this,arguments)}function qS(e,t){(e.ba.get(t)||[]).forEach((function(e){e.resolve()})),e.ba.delete(t)}function XS(e,t,n){var r=_v(e),i=r.Sa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function KS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=A(e.fa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ma.delete(a),n&&e.Va.Fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((function(t){e.wa.containsKey(t)||YS(e,t)}))}function YS(e,t){e.ga.delete(t.path.canonicalString());var n=e.pa.get(t);null!==n&&(bk(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),ZS(e))}function QS(e,t,n){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xS?(e.wa.addReference(a.key,t),JS(e,a)):a instanceof wS?(dv("SyncEngine","Document no longer in limbo: "+a.key),e.wa.removeReference(a.key,t),e.wa.containsKey(a.key)||YS(e,a.key)):gv()}}catch(o){i.e(o)}finally{i.f()}}function JS(e,t){var n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(dv("SyncEngine","New document in limbo: "+n),e.ga.add(r),ZS(e))}function ZS(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){var t=e.ga.values().next().value;e.ga.delete(t);var n=new jv(Bv.fromString(t)),r=e.Da.next();e.ya.set(r,new ES(n)),e.pa=e.pa.insert(n,r),_k(e.remoteStore,new Cb(wy(yy(n.path)),r,"TargetPurposeLimboResolution",pm._e))}}function $S(e,t,n){return eE.apply(this,arguments)}function eE(){return eE=kt(xt().mark((function e(t,n,r){var i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_v(t),a=[],o=[],s=[],e.t0=i.ma.isEmpty(),e.t0){e.next=9;break}return i.ma.forEach((function(e,t){s.push(i.va(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=yw.Qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Va.a_(a),e.next=9,function(){var e=kt(xt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return nm.forEach(n,(function(t){return nm.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return nm.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),sm(e.t0)){e.next=10;break}throw e.t0;case 10:dv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=A(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ts.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ts=r.ts.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),eE.apply(this,arguments)}function tE(e,t){return nE.apply(this,arguments)}function nE(){return(nE=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=_v(t)).currentUser.isEqual(n)){e.next=11;break}return dv("SyncEngine","User change. New user:",n.toKey()),e.next=5,kw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ba.forEach((function(e){e.forEach((function(e){e.reject(new xv(bv.CANCELLED,t))}))})),e.ba.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,$S(r,i._s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rE(e,t){var n=_v(e),r=n.ya.get(t);if(r&&r.Ra)return Gy().add(r.key);var i=Gy(),a=n.fa.get(t);if(!a)return i;var o,s=A(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ma.get(u);i=i.unionWith(c.view.ua)}}catch(l){s.e(l)}finally{s.f()}return i}function iE(e,t){return aE.apply(this,arguments)}function aE(){return aE=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),e.next=3,Pw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.da(i),e.abrupt("return",(r.isPrimaryClient&&QS(r,n.targetId,a.Ta),a));case 6:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e,t){return sE.apply(this,arguments)}function sE(){return(sE=kt(xt().mark((function e(t,n){var r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),e.abrupt("return",Lw(r.localStore,n).then((function(e){return $S(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uE(e,t,n,r){return cE.apply(this,arguments)}function cE(){return cE=kt(xt().mark((function e(t,n,r,i){var a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_v(t),e.next=3,function(e,t){var n=_v(e),r=_v(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Cn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):nm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Ok(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(XS(a,n,i||null),qS(a,n),function(e,t){_v(_v(e).mutationQueue).Fn(t)}(a.localStore,n)):gv();case 11:return e.next=13,$S(a,o);case 13:e.next=16;break;case 15:dv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}function lE(e,t){return hE.apply(this,arguments)}function hE(){return(hE=kt(xt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bE(r=_v(t)),xE(r),!0!==n||!0===r.Ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,fE(r,i.toArray());case 5:return a=e.sent,r.Ca=!0,e.next=9,Zk(r.remoteStore,!0);case 9:o=A(a);try{for(o.s();!(s=o.n()).done;)u=s.value,_k(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Ca){e.next=25;break}return c=[],l=Promise.resolve(),r.fa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return KS(r,t),Rw(r.localStore,t,!0)})),bk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,fE(r,c);case 21:return function(e){var t=_v(e);t.ya.forEach((function(e,n){bk(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new Qm(jv.comparator)}(r),r.Ca=!1,e.next=25,Zk(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e,t,n){return dE.apply(this,arguments)}function dE(){return dE=kt(xt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,m,g;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=_v(t),a=[],o=[],s=A(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.fa.get(c))||0===h.length){e.next=34;break}return e.next=11,Iw(i.localStore,wy(h[0]));case 11:l=e.sent,f=A(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.ma.get(p),e.next=20,iE(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Dw(i.localStore,c);case 36:return g=e.sent,e.next=39,Iw(i.localStore,g);case 39:return l=e.sent,e.next=42,CS(i,pE(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Va.a_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),dE.apply(this,arguments)}function pE(e){return gy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function vE(e){return function(e){return _v(_v(e).persistence).Bi()}(_v(e).localStore)}function mE(e,t,n,r){return gE.apply(this,arguments)}function gE(){return gE=kt(xt().mark((function e(t,n,r,i){var a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=_v(t)).Ca){e.next=3;break}return e.abrupt("return",void dv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.fa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Lw(a.localStore,Iy(o[0]));case 10:return s=e.sent,u=V_.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ig.EMPTY_BYTE_STRING),e.next=14,$S(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Rw(a.localStore,n,!0);case 17:return KS(a,n,i),e.abrupt("break",20);case 19:gv();case 20:case"end":return e.stop()}}),e)}))),gE.apply(this,arguments)}function yE(e,t,n){return _E.apply(this,arguments)}function _E(){return _E=kt(xt().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=bE(t)).Ca){e.next=45;break}a=A(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.fa.has(s)){e.next=10;break}return dv("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Dw(i.localStore,s);case 12:return u=e.sent,e.next=15,Iw(i.localStore,u);case 15:return c=e.sent,e.next=18,CS(i,pE(u),c.targetId,!1,c.resumeToken);case 18:_k(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=A(r),e.prev=30,f=xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.fa.has(t),!e.t0){e.next=5;break}return e.next=5,Rw(i.localStore,t,!1).then((function(){bk(i.remoteStore,t),KS(i,t)})).catch(em);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),_E.apply(this,arguments)}function bE(e){var t=_v(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=LS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=FS.bind(null,t),t.Va.a_=dS.bind(null,t.eventManager),t.Va.Fa=pS.bind(null,t.eventManager),t}function xE(e){var t=_v(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=VS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jS.bind(null,t),t}function wE(e,t,n){var r=_v(e);(function(){var e=kt(xt().mark((function e(t,n,r){var i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=_v(e),r=rb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(bS(i)),a=new _S(i,t.localStore,n.serializer),e.next=15,n.Ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ea(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.Ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,$S(t,u.ra,void 0);case 31:return e.next=33,function(e,t){var n=_v(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.na));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(vv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var kE=function(){function e(){d(this,e),this.synchronizeTabs=!1}return g(e,[{key:"initialize",value:function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=sk(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return ww(this.persistence,new bw,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new uw(lw.jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Qw}},{key:"terminate",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),SE=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).xa=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return g(n,[{key:"initialize",value:function(){var e=kt(xt().mark((function e(t){var r=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.xa.initialize(this,t);case 4:return e.next=6,xE(this.xa.syncEngine);case 6:return e.next=8,Ok(this.xa.remoteStore);case 8:return e.next=10,this.persistence.mi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return ww(this.persistence,new bw,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Fx(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new dm(t,this.persistence);return new fm(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?kx.withCacheSize(this.cacheSizeBytes):kx.DEFAULT;return new pw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ak(),ok(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Qw}}]),n}(kE),EE=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).xa=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return g(n,[{key:"initialize",value:function(){var e=kt(xt().mark((function e(t){var r,i=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.xa.syncEngine,e.t0=this.sharedClientState instanceof Yw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Ys:uE.bind(null,r),Zs:mE.bind(null,r),Xs:yE.bind(null,r),Bi:vE.bind(null,r),Js:oE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.mi(function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lE(i.xa.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=ak();if(!Yw.D(t))throw new xv(bv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(SE),TE=function(){function e(){d(this,e)}return g(e,[{key:"initialize",value:function(){var e=kt(xt().mark((function e(t,n){var r=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return US(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tE.bind(null,this.syncEngine),e.next=12,Zk(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new uS}},{key:"createDatastore",value:function(e){var t=sk(e.databaseInfo.databaseId),n=function(e){return new ik(e)}(e.databaseInfo);return function(e,t,n,r){return new fk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new pk(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return US(t.syncEngine,e,0)}),Zw.D()?new Zw:new Jw)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new TS(e,t,n,r,i,a);return o&&(s.Ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_v(t),dv("RemoteStore","RemoteStore shutting down."),n.C_.add(5),e.next=5,gk(n);case 5:n.F_.shutdown(),n.M_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function AE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return kt(xt().mark((function r(){var i;return xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var ME=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return g(e,[{key:"next",value:function(e){this.observer.next&&this.Oa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Oa(this.observer.error,e):pv("Uncaught Error in snapshot listener:",e.toString())}},{key:"Na",value:function(){this.muted=!0}},{key:"Oa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),CE=function(){function e(t,n){var r=this;d(this,e),this.Ba=t,this.serializer=n,this.metadata=new wv,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((function(e){e&&e.Z_()?r.metadata.resolve(e.Y_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(function(e){return r.metadata.reject(e)}))}return g(e,[{key:"close",value:function(){return this.Ba.cancel()}},{key:"getMetadata",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ma",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ka());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ka",value:function(){var e=kt(xt().mark((function e(){var t,n,r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.qa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.La.decode(t),r=Number(n),isNaN(r)&&this.Qa("length string (".concat(n,") is not valid number")),e.next=9,this.Ka(r);case 9:return i=e.sent,e.abrupt("return",new gS(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$a",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"qa",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.$a()<0)){e.next=7;break}return e.next=3,this.Ua();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.$a())<0&&this.Qa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ka",value:function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ua();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Qa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.La.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qa",value:function(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ua",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ba.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),IE=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return g(e,[{key:"lookup",value:function(){var e=kt(xt().mark((function e(t){var n,r=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new xv(bv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=kt(xt().mark((function e(t,n){var r,i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),i=lb(r.serializer)+"/documents",a={documents:n.map((function(e){return ob(r.serializer,e)}))},e.next=5,r.Co("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=pb(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());yv(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new E_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=kt(xt().mark((function e(){var t,n=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=jv.fromPath(t);n.mutations.push(new T_(r,n.precondition(r)))})),e.next=7,function(){var e=kt(xt().mark((function e(t,n){var r,i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_v(t),i=lb(r.serializer)+"/documents",a={writes:n.map((function(e){return vb(r.serializer,e)}))},e.next=3,r.wo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gv();t=Uv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xv(bv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Uv.min())?l_.exists(!1):l_.updateTime(t):l_.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uv.min()))throw new xv(bv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return l_.updateTime(t)}return l_.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),RE=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Wa=r.maxAttempts,this.zo=new uk(this.asyncQueue,"transaction_retry")}return g(e,[{key:"run",value:function(){this.Wa-=1,this.Ga()}},{key:"Ga",value:function(){var e=this;this.zo.ko(kt(xt().mark((function t(){var n,r;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new IE(e.datastore),(r=e.za(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.ja(t)}))}))})).catch((function(t){e.ja(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"za",value:function(e){try{var t=this.updateFunction(e);return!vm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"ja",value:function(e){var t=this;this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Ga(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ha",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!R_(t)}return!1}}]),e}(),NE=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cv.UNAUTHENTICATED,this.clientId=Nv.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return dv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return g(e,[{key:"getConfiguration",value:function(){var e=kt(xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new xv(bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new wv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(kt(xt().mark((function n(){var r;return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=rS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function PE(e,t){return DE.apply(this,arguments)}function DE(){return DE=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),dv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,kw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}function LE(e,t){return OE.apply(this,arguments)}function OE(){return OE=kt(xt().mark((function e(t,n){var r,i;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,FE(t);case 3:return r=e.sent,dv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Qk(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Qk(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),OE.apply(this,arguments)}function UE(e){return"FirebaseError"===e.name?e.code===bv.FAILED_PRECONDITION||e.code===bv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function FE(e){return BE.apply(this,arguments)}function BE(){return(BE=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return dv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,PE(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),UE(n=e.t0)){e.next=13;break}throw n;case 13:return vv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,PE(t,new kE);case 16:e.next=21;break;case 18:return dv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,PE(t,new kE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function VE(e){return zE.apply(this,arguments)}function zE(){return(zE=kt(xt().mark((function e(t){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return dv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,LE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return dv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,LE(t,new TE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jE(e){return FE(e).then((function(e){return e.persistence}))}function HE(e){return FE(e).then((function(e){return e.localStore}))}function GE(e){return VE(e).then((function(e){return e.remoteStore}))}function WE(e){return VE(e).then((function(e){return e.syncEngine}))}function qE(e){return VE(e).then((function(e){return e.datastore}))}function XE(e){return KE.apply(this,arguments)}function KE(){return(KE=kt(xt().mark((function e(t){var n,r;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=AS.bind(null,n.syncEngine),r.onUnlisten=RS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function i(){return xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ME({next:function(a){t.enqueueAndForget((function(){return hS(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new xv(bv.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new xv(bv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new mS(yy(n.path),a,{includeMetadataChanges:!0,J_:!0});return cS(e,o)},i.next=3,XE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function QE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function i(){return xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ME({next:function(n){t.enqueueAndForget((function(){return hS(e,o)})),n.fromCache&&"server"===r.source?i.reject(new xv(bv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new mS(n,a,{includeMetadataChanges:!0,J_:!0});return cS(e,o)},i.next=3,XE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function JE(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var ZE=new Map;function $E(e,t,n){if(!n)throw new xv(bv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function eT(e,t,n,r){if(!0===t&&!0===r)throw new xv(bv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function tT(e){if(!jv.isDocumentKey(e))throw new xv(bv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nT(e){if(jv.isDocumentKey(e))throw new xv(bv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":gv()}function iT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xv(bv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rT(e);throw new xv(bv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function aT(e,t){if(t<=0)throw new xv(bv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var oT=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new xv(bv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xv(bv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}eT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JE(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return g(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),sT=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oT({}),this._settingsFrozen=!1}return g(e,[{key:"app",get:function(){if(!this._app)throw new xv(bv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new xv(bv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sv;switch(e.type){case"firstParty":return new Mv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xv(bv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=ZE.get(e);t&&(dv("ComponentProvider","Removing Datastore"),ZE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function uT(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=iT(e,sT))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&vv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=cv.MOCK_USER;else{s=et(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new xv(bv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new cv(c)}e._authCredentials=new Ev(new kv(s,u))}}var cT=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lT=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new hT(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),hT=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,yy(i)))._path=i,a.type="collection",a}return g(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new lT(this.firestore,null,new jv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cT);function fT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),$E("collection","path",t),e instanceof sT){var a=Bv.fromString.apply(Bv,[t].concat(r));return nT(a),new hT(e,null,a)}if(!(e instanceof lT||e instanceof hT))throw new xv(bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bv.fromString.apply(Bv,[t].concat(r)));return nT(o),new hT(e.firestore,null,o)}function dT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),1===arguments.length&&(t=Nv.newId()),$E("doc","path",t),e instanceof sT){var a=Bv.fromString.apply(Bv,[t].concat(r));return tT(a),new lT(e,null,new jv(a))}if(!(e instanceof lT||e instanceof hT))throw new xv(bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bv.fromString.apply(Bv,[t].concat(r)));return tT(o),new lT(e.firestore,e instanceof hT?e.converter:null,new jv(o))}function pT(e,t){return e=bt(e),t=bt(t),(e instanceof lT||e instanceof hT)&&(t instanceof lT||t instanceof hT)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function vT(e,t){return e=bt(e),t=bt(t),e instanceof cT&&t instanceof cT&&e.firestore===t.firestore&&Ty(e._query,t._query)&&e.converter===t.converter}var mT=function(){function e(){var t=this;d(this,e),this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new uk(this,"async_queue_retry"),this.iu=function(){var e=ok();e&&dv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zo.Qo()};var n=ok();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.iu)}return g(e,[{key:"isShuttingDown",get:function(){return this.Za}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.su(),this.ou(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Za){this.Za=!0,this.nu=e||!1;var t=ok();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}},{key:"enqueue",value:function(e){var t=this;if(this.su(),this.Za)return new Promise((function(){}));var n=new wv;return this.ou((function(){return t.Za&&t.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ya.push(e),t._u()}))}},{key:"_u",value:function(){var e=kt(xt().mark((function e(){var t=this;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ya.length){e.next=14;break}return e.prev=1,e.next=4,this.Ya[0]();case 4:this.Ya.shift(),this.zo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),sm(e.t0)){e.next=12;break}throw e.t0;case 12:dv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ya.length>0&&this.zo.ko((function(){return t._u()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ou",value:function(e){var t=this,n=this.Ja.then((function(){return t.tu=!0,e().catch((function(e){t.eu=e,t.tu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw pv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.tu=!1,e}))}));return this.Ja=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.su(),this.ru.indexOf(e)>-1&&(t=0);var i=nS.createAndSchedule(this,e,t,n,(function(e){return r.au(e)}));return this.Xa.push(i),i}},{key:"su",value:function(){this.eu&&gv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"uu",value:function(){var e=kt(xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ja,e.next=3,t;case 3:if(t!==this.Ja){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cu",value:function(e){var t,n=A(this.Xa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"lu",value:function(e){var t=this;return this.uu().then((function(){t.Xa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=A(t.Xa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.uu()}))}},{key:"hu",value:function(e){this.ru.push(e)}},{key:"au",value:function(e){var t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}]),e}();function gT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=A(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var yT=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new wv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return g(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),_T=function(e){_(n,e);var t=k(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new mT,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return g(n,[{key:"_terminate",value:function(){return this._firestoreClient||xT(this),this._firestoreClient.terminate()}}]),n}(sT);function bT(e){return e._firestoreClient||xT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xT(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new fg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,JE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new NE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function wT(e,t,n){var r=new wv;return e.asyncQueue.enqueue(kt(xt().mark((function i(){var a;return xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,PE(e,n);case 3:return i.next=5,LE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),UE(a=i.t0)){i.next=13;break}throw a;case 13:vv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function kT(e){return function(e){var t=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function n(){return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=GS,n.next=3,WE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(bT(e=iT(e,_T)))}function ST(e){return function(e){return e.asyncQueue.enqueue(kt(xt().mark((function t(){var n,r;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jE(e);case 2:return n=t.sent,t.next=5,GE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=_v(e);return t.C_.delete(0),vk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(bT(e=iT(e,_T)))}function ET(e){return function(e){return e.asyncQueue.enqueue(kt(xt().mark((function t(){var n,r;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jE(e);case 2:return n=t.sent,t.next=5,GE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=_v(t)).C_.add(0),e.next=4,gk(n);case 4:n.M_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(bT(e=iT(e,_T)))}function TT(e,t){var n=bT(e=iT(e,_T)),r=new yT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new CE(e,t)}(function(e,t){if(e instanceof Uint8Array)return AE(e,t);if(e instanceof ArrayBuffer)return AE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?D_().encode(e):e),t)}(n,sk(t));e.asyncQueue.enqueueAndForget(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=wE,t.next=3,WE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function AT(e,t){return function(e,t){return e.asyncQueue.enqueue(kt(xt().mark((function n(){return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=_v(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kr.getNamedQuery(e,t)}))},n.next=3,HE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(bT(e=iT(e,_T)),t).then((function(t){return t?new cT(e,null,t.query):null}))}function MT(e){if(e._initialized||e._terminated)throw new xv(bv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var CT=function(){function e(t){d(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ig.fromBase64String(t))}catch(t){throw new xv(bv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ig.fromUint8Array(t))}}]),e}(),IT=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new xv(bv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zv(n)}return g(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var RT=g((function e(t){d(this,e),this._methodName=t})),NT=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new xv(bv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new xv(bv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return g(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Pv(this._lat,e._lat)||Pv(this._long,e._long)}}]),e}(),PT=/^__.*__$/,DT=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new __(e,this.data,this.fieldMask,t,this.fieldTransforms):new y_(e,this.data,t,this.fieldTransforms)}}]),e}(),LT=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return new __(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function OT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gv()}}var UT=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Pu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"Iu",get:function(){return this.settings.Iu}},{key:"Tu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Eu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}},{key:"Ru",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}},{key:"Vu",value:function(e){return this.Tu({path:void 0,du:!0})}},{key:"mu",value:function(e){return rA(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Pu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Au(this.path.get(e))}},{key:"Au",value:function(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(OT(this.Iu)&&PT.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}]),e}(),FT=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||sk(t)}return g(e,[{key:"pu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new UT({Iu:e,methodName:t,gu:n,path:zv.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function BT(e){var t=e._freezeSettings(),n=sk(e._databaseId);return new FT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function VT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.pu(a.merge||a.mergeFields?2:0,t,n,i);$T("Data must be an object, but it was:",o,r);var s,u,c=JT(r,o);if(a.merge)s=new ng(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=A(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=eA(t,l.value,n);if(!o.contains(d))throw new xv(bv.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));iA(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}s=new ng(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new DT(new Lg(c),s,u)}var zT=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RT);function jT(e,t,n){return new UT({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var HT=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){return new u_(e.path,new e_)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(RT),GT=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).yu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=jT(this,e,!0),n=this.yu.map((function(e){return QT(e,t)})),r=new t_(n);return new u_(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RT),WT=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).yu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=jT(this,e,!0),n=this.yu.map((function(e){return QT(e,t)})),r=new r_(n);return new u_(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RT),qT=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).wu=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=new a_(e.serializer,Yy(e.serializer,this.wu));return new u_(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(RT);function XT(e,t,n,r){var i=e.pu(1,t,n);$T("Data must be an object, but it was:",i,r);var a=[],o=Lg.empty();Km(r,(function(e,r){var s=nA(t,e,n);r=bt(r);var u=i.Ru(s);if(r instanceof zT)a.push(s);else{var c=QT(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new ng(a);return new LT(o,s,i.fieldTransforms)}function KT(e,t,n,r,i,a){var o=e.pu(1,t,n),s=[eA(t,r,n)],u=[i];if(a.length%2!=0)throw new xv(bv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(eA(t,a[c])),u.push(a[c+1]);for(var l=[],h=Lg.empty(),f=s.length-1;f>=0;--f)if(!iA(l,s[f])){var d=s[f],p=u[f];p=bt(p);var v=o.Ru(d);if(p instanceof zT)l.push(d);else{var m=QT(p,v);null!=m&&(l.push(d),h.set(d,m))}}var g=new ng(l);return new LT(h,g,o.fieldTransforms)}function YT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return QT(n,e.pu(r?4:3,t))}function QT(e,t){if(ZT(e=bt(e)))return $T("Unsupported field value:",t,e),JT(e,t);if(e instanceof RT)return function(e,t){if(!OT(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=A(e);try{for(a.s();!(n=a.n()).done;){var o=QT(n.value,t.Vu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=bt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yy(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ov.fromDate(e);return{timestampValue:eb(t.serializer,n)}}if(e instanceof Ov){var r=new Ov(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eb(t.serializer,r)}}if(e instanceof NT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof CT)return{bytesValue:tb(t.serializer,e._byteString)};if(e instanceof lT){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.mu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ib(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(rT(e)))}(e,t)}function JT(e,t){var n={};return Ym(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Km(e,(function(e,r){var i=QT(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ZT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ov||e instanceof NT||e instanceof CT||e instanceof lT||e instanceof RT)}function $T(e,t,n){if(!ZT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=rT(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function eA(e,t,n){if((t=bt(t))instanceof IT)return t._internalPath;if("string"==typeof t)return nA(e,t);throw rA("Field path arguments must be of type string or ",e,!1,void 0,n)}var tA=new RegExp("[~\\*/\\[\\]]");function nA(e,t,n){if(t.search(tA)>=0)throw rA("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(IT,f(t.split(".")))._internalPath}catch($l){throw rA("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function rA(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new xv(bv.INVALID_ARGUMENT,s+e+u)}function iA(e,t){return e.some((function(e){return e.isEqual(t)}))}var aA=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return g(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new lT(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new oA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(sA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),oA=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){return er(b(n.prototype),"data",this).call(this)}}]),n}(aA);function sA(e,t){return"string"==typeof t?nA(e,t):t instanceof IT?t._internalPath:t._delegate._internalPath}function uA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xv(bv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cA=g((function e(){d(this,e)})),lA=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(cA);function hA(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof cA&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof dA})).length,n=e.filter((function(e){return e instanceof fA})).length;if(t>1||t>0&&n>0)throw new xv(bv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=A(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var fA=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return g(n,[{key:"_apply",value:function(e){var t=this._parse(e);return EA(e._query,t),new cT(e.firestore,e.converter,Sy(e._query,t))}},{key:"_parse",value:function(e){var t=BT(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new xv(bv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){SA(o,a);var u,c=[],l=A(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(kA(r,e,h))}}catch(f){l.e(f)}finally{l.f()}s={arrayValue:{values:c}}}else s=kA(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||SA(o,a),s=YT(n,t,o,"in"===a||"not-in"===a);return Gg.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lA);var dA=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return g(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Wg.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=A(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;EA(r,a),r=Sy(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new cT(e.firestore,e.converter,Sy(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(cA);var pA=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return g(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zg(t,n)}(e._query,this._field,this._direction);return new cT(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new my(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(lA);var vA=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return g(n,[{key:"_apply",value:function(e){return new cT(e.firestore,e.converter,Ey(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lA);var mA=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=wA(e,this.type,this._docOrFields,this._inclusive);return new cT(e.firestore,e.converter,function(e,t){return new my(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lA);function gA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mA._create("startAt",t,!0)}function yA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mA._create("startAfter",t,!1)}var _A=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=wA(e,this.type,this._docOrFields,this._inclusive);return new cT(e.firestore,e.converter,function(e,t){return new my(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lA);function bA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _A._create("endBefore",t,!1)}function xA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _A._create("endAt",t,!0)}function wA(e,t,n,r){if(n[0]=bt(n[0]),n[0]instanceof aA)return function(e,t,n,r,i){if(!r)throw new xv(bv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=A(xy(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(kg(t,r.key));else{var c=r.data.field(u.field);if(cg(c))throw new xv(bv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Fg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=BT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new xv(bv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!by(e)&&-1!==c.indexOf("/"))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Bv.fromString(c));if(!jv.isDocumentKey(l))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new jv(l);s.push(kg(t,h))}else{var f=YT(n,r,c);s.push(f)}}return new Fg(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function kA(e,t,n){if("string"==typeof(n=bt(n))){if(""===n)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!by(t)&&-1!==n.indexOf("/"))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Bv.fromString(n));if(!jv.isDocumentKey(r))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return kg(e,new jv(r))}if(n instanceof lT)return kg(e,n._key);throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(rT(n),"."))}function SA(e,t){if(!Array.isArray(e)||0===e.length)throw new xv(bv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function EA(e,t){var n=function(e,t){var n,r=A(e);try{for(r.s();!(n=r.n()).done;){var i,a=A(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new xv(bv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xv(bv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var TA=function(){function e(){d(this,e)}return g(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ug(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gv()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Km(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new NT(sg(e.latitude),sg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=lg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=og(e);return new Ov(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Bv.fromString(e);yv(Mb(n));var r=new dg(n.get(1),n.get(3)),i=new jv(n.popFirst(5));return r.isEqual(t)||pv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function AA(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var MA=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new CT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lT(this.firestore,null,t)}}]),n}(TA);var CA=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return g(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),IA=function(e){_(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return g(n,[{key:"exists",value:function(){return er(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new RA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(sA("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(aA),RA=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return er(b(n.prototype),"data",this).call(this,e)}}]),n}(IA),NA=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new CA(i.hasPendingWrites,i.fromCache),this.query=r}return g(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new RA(n._firestore,n._userDataWriter,r.key,r,new CA(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xv(bv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new RA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new RA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:PA(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function PA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gv()}}function DA(e,t){return e instanceof IA&&t instanceof IA?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof NA&&t instanceof NA&&e._firestore===t._firestore&&vT(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var LA=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new CT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lT(this.firestore,null,t)}}]),n}(TA);function OA(e){e=iT(e,lT);var t=iT(e.firestore,_T),n=bT(t),r=new LA(t);return function(e,t){var n=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function r(){return xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=kt(xt().mark((function e(t,n,r){var i,a;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=_v(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new xv(bv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=rS(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,HE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new IA(t,r,e._key,n,new CA(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function UA(e){e=iT(e,cT);var t=iT(e.firestore,_T),n=bT(t),r=new LA(t);return uA(e._query),QE(n,e._query).then((function(n){return new NA(t,r,e,n)}))}function FA(e){e=iT(e,cT);var t=iT(e.firestore,_T),n=bT(t),r=new LA(t);return function(e,t){var n=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function r(){return xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=kt(xt().mark((function e(t,n,r){var i,a,o,s,u;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pw(t,n,!0);case 3:i=e.sent,a=new kS(n,i.ls),o=a.ca(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=rS(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,HE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new NA(t,r,e,n)}))}function BA(e){e=iT(e,cT);var t=iT(e.firestore,_T),n=bT(t),r=new LA(t);return QE(n,e._query,{source:"server"}).then((function(n){return new NA(t,r,e,n)}))}function VA(e,t,n){e=iT(e,lT);var r=iT(e.firestore,_T),i=AA(e.converter,t,n);return GA(r,[VT(BT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,l_.none())])}function zA(e,t,n){e=iT(e,lT);for(var r=iT(e.firestore,_T),i=BT(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return GA(r,[("string"==typeof(t=bt(t))||t instanceof IT?KT(i,"updateDoc",e._key,t,n,o):XT(i,"updateDoc",e._key,t)).toMutation(e._key,l_.exists(!0))])}function jA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=bt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||gT(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(gT(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof lT)l=iT(e.firestore,_T),h=yy(e._key.path),c={next:function(t){n[u]&&n[u](WA(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=iT(e,cT);l=iT(p.firestore,_T),h=p._query;var v=new LA(l);c={next:function(e){n[u]&&n[u](new NA(l,v,p,e))},error:n[u+1],complete:n[u+2]},uA(e._query)}return function(e,t,n,r){var i=new ME(r),a=new mS(t,i,n);return e.asyncQueue.enqueueAndForget(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cS,t.next=3,XE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Na(),e.asyncQueue.enqueueAndForget(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hS,t.next=3,XE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(bT(l),h,f,c)}function HA(e,t){return function(e,t){var n=new ME(t);return e.asyncQueue.enqueueAndForget(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){_v(e).q_.add(t),t.next()},t.next=3,XE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Na(),e.asyncQueue.enqueueAndForget(kt(xt().mark((function t(){return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){_v(e).q_.delete(t)},t.next=3,XE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(bT(e=iT(e,_T)),gT(t)?t:{next:t})}function GA(e,t){return function(e,t){var n=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function r(){return xt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=PS,r.next=3,WE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(bT(e),t)}function WA(e,t,n){var r=n.docs.get(t._key),i=new LA(e);return new IA(e,i,t._key,r,new CA(n.hasPendingWrites,n.fromCache),t.converter)}var qA={maxAttempts:5},XA=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=BT(t)}return g(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=KA(e,this._firestore),i=AA(r.converter,t,n),a=VT(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,l_.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=KA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=bt(t))||t instanceof IT?KT(this._dataReader,"WriteBatch.update",i._key,t,n,o):XT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,l_.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=KA(e,this._firestore);return this._mutations=this._mutations.concat(new E_(t._key,l_.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new xv(bv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function KA(e,t){if((e=bt(e)).firestore!==t)throw new xv(bv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var YA=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return g(n,[{key:"get",value:function(e){var t=this,r=KA(e,this._firestore),i=new LA(this._firestore);return er(b(n.prototype),"get",this).call(this,e).then((function(e){return new IA(t._firestore,i,r._key,e._document,new CA(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=BT(t)}return g(e,[{key:"get",value:function(e){var t=this,n=KA(e,this._firestore),r=new MA(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return gv();var i=e[0];if(i.isFoundDocument())return new aA(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new aA(t._firestore,r,n._key,null,n.converter);throw gv()}))}},{key:"set",value:function(e,t,n){var r=KA(e,this._firestore),i=AA(r.converter,t,n),a=VT(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=KA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=bt(t))||t instanceof IT?KT(this._dataReader,"Transaction.update",i._key,t,n,o):XT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=KA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function QA(e,t,n){e=iT(e,_T);var r=Object.assign(Object.assign({},qA),n);return function(e){if(e.maxAttempts<1)throw new xv(bv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new wv;return e.asyncQueue.enqueueAndForget(kt(xt().mark((function i(){var a;return xt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,qE(e);case 2:a=i.sent,new RE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(bT(e),(function(n){return t(new YA(e,n))}),r)}function JA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new GT("arrayUnion",t)}function ZA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new WT("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){lv=e}(xn),pn(new St("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new _T(new Tv(e.getProvider("auth-internal")),new Iv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xv(bv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),An(uv,"4.4.0",e),An(uv,"4.4.0","esm2017")}();function $A(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function eM(){if("undefined"===typeof Uint8Array)throw new xv("unimplemented","Uint8Arrays are not available in this environment.")}function tM(){if("undefined"==typeof atob)throw new xv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nM=function(){function e(t){d(this,e),this._delegate=t}return g(e,[{key:"toBase64",value:function(){return tM(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return eM(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return tM(),new e(CT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return eM(),new e(CT.fromUint8Array(t))}}]),e}();function rM(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=A(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var iM=function(){function e(){d(this,e)}return g(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){MT(e=iT(e,_T));var n=bT(e);if(n._uninitializedComponentsProvider)throw new xv(bv.FAILED_PRECONDITION,"SDK cache is already specified.");vv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new TE;return wT(n,i,new SE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){MT(e=iT(e,_T));var t=bT(e);if(t._uninitializedComponentsProvider)throw new xv(bv.FAILED_PRECONDITION,"SDK cache is already specified.");vv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new TE;return wT(t,r,new EE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new xv(bv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new wv;return e._queue.enqueueAndForgetEvenWhileRestricted(kt(xt().mark((function n(){return xt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=kt(xt().mark((function e(t){var n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(im.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,im.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(gw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),aM=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof dg||(this._appCompat=t)}return g(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||vv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uT(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ST(this._delegate)}},{key:"disableNetwork",value:function(){return ET(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&eT("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return kT(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return HA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new xv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new _M(this,fT(this._delegate,e))}catch(t){throw hM(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new lM(this,dT(this._delegate,e))}catch(t){throw hM(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new mM(this,function(e,t){if(e=iT(e,sT),$E("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xv(bv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cT(e,null,function(e){return new my(Bv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw hM(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return QA(this._delegate,(function(n){return e(new sM(t,n))}))}},{key:"batch",value:function(){var e=this;return bT(this._delegate),new uM(new XA(this._delegate,(function(t){return GA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return TT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return AT(this._delegate,e).then((function(e){return e?new mM(t,e):null}))}}]),e}(),oM=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new nM(new CT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return lM.forKey(t,this.firestore,null)}}]),n}(TA);var sM=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new oM(t)}return g(e,[{key:"get",value:function(e){var t=this,n=bM(e);return this._delegate.get(n).then((function(e){return new pM(t._firestore,new IA(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=bM(e);return n?($A("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=bM(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bM(e);return this._delegate.delete(t),this}}]),e}(),uM=function(){function e(t){d(this,e),this._delegate=t}return g(e,[{key:"set",value:function(e,t,n){var r=bM(e);return n?($A("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=bM(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bM(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),cM=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return g(e,[{key:"fromFirestore",value:function(e,t){var n=new RA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vM(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new oM(t),n),i.set(n,a)),a}}]),e}();cM.INSTANCES=new WeakMap;var lM=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new oM(t)}return g(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new _M(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new _M(this.firestore,fT(this._delegate,e))}catch(t){throw hM(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=bt(e))instanceof lT&&pT(this._delegate,e)}},{key:"set",value:function(e,t){t=$A("DocumentReference.set",t);try{return t?VA(this._delegate,e,t):VA(this._delegate,e)}catch(n){throw hM(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?zA(this._delegate,e):zA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw hM(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return GA(iT((e=this._delegate).firestore,_T),[new E_(e._key,l_.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=fM(n),a=dM(n,(function(t){return new pM(e.firestore,new IA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return jA(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?OA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iT(e,lT);var t=iT(e.firestore,_T);return YE(bT(t),e._key,{source:"server"}).then((function(n){return WA(t,e,n)}))}(this._delegate):function(e){e=iT(e,lT);var t=iT(e.firestore,_T);return YE(bT(t),e._key).then((function(n){return WA(t,e,n)}))}(this._delegate)).then((function(e){return new pM(t.firestore,new IA(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cM.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new xv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new lT(n._delegate,r,new jv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new lT(n._delegate,r,t))}}]),e}();function hM(e,t,n){return e.message=e.message.replace(t,n),e}function fM(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!rM(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function dM(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=rM(e[0])?e[0]:rM(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pM=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"ref",get:function(){return new lM(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return DA(this._delegate,e._delegate)}}]),e}(),vM=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return this._delegate._converter||void 0!==t||gv(),t}}]),n}(pM),mM=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new oM(t)}return g(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,hA(this._delegate,function(e,t,n){var r=t,i=sA("where",e);return fA._create(i,r,n)}(t,n,r)))}catch(i){throw hM(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,hA(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=sA("orderBy",e);return pA._create(n,t)}(t,n)))}catch(r){throw hM(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,hA(this._delegate,(aT("limit",n=t),vA._create("limit",n,"F"))))}catch(n){throw hM(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,hA(this._delegate,(aT("limitToLast",n=t),vA._create("limitToLast",n,"L"))))}catch(n){throw hM(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,hA(this._delegate,gA.apply(void 0,arguments)))}catch(t){throw hM(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,hA(this._delegate,yA.apply(void 0,arguments)))}catch(t){throw hM(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,hA(this._delegate,bA.apply(void 0,arguments)))}catch(t){throw hM(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,hA(this._delegate,xA.apply(void 0,arguments)))}catch(t){throw hM(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return vT(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?FA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?BA(this._delegate):UA(this._delegate)).then((function(e){return new yM(t.firestore,new NA(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=fM(n),a=dM(n,(function(t){return new yM(e.firestore,new NA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return jA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cM.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),gM=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new vM(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),yM=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"query",get:function(){return new mM(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new vM(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new gM(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new vM(n._firestore,r))}))}},{key:"isEqual",value:function(e){return DA(this._delegate,e._delegate)}}]),e}(),_M=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return g(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new lM(this.firestore,e):null}},{key:"doc",value:function(e){try{return new lM(this.firestore,void 0===e?dT(this._delegate):dT(this._delegate,e))}catch(t){throw hM(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=iT(e.firestore,_T),r=dT(e),i=AA(e.converter,t);return GA(n,[VT(BT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,l_.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new lM(t.firestore,e)}))}},{key:"isEqual",value:function(e){return pT(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(cM.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(mM);function bM(e){return iT(e,lT)}var xM=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(IT,n)}return g(e,[{key:"isEqual",value:function(e){return(e=bt(e))instanceof IT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(zv.keyField().canonicalString())}}]),e}(),wM=function(){function e(t){d(this,e),this._delegate=t}return g(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new HT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new zT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=JA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ZA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new qT("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),kM={Firestore:aM,GeoPoint:NT,Timestamp:Ov,Blob:nM,Transaction:sM,WriteBatch:uM,DocumentReference:lM,DocumentSnapshot:pM,Query:mM,QueryDocumentSnapshot:vM,QuerySnapshot:yM,CollectionReference:_M,FieldPath:xM,FieldValue:wM,setLogLevel:function(e){var t;t=e,hv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new St("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},kM)))}(e,(function(e,t){return new aM(e,t,new iM)})),e.registerVersion("@firebase/firestore-compat","0.3.23")}($n);var SM,EM="firebasestorage.googleapis.com",TM="storageBucket",AM=function(e){_(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,MM(e),"Firebase Storage: ".concat(r," (").concat(MM(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(w(i),n.prototype),i}return g(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return MM(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(st);function MM(e){return"storage/"+e}function CM(){return new AM(SM.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function IM(){return new AM(SM.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RM(){return new AM(SM.CANCELED,"User canceled the upload/download.")}function NM(){return new AM(SM.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function PM(e){return new AM(SM.INVALID_ARGUMENT,e)}function DM(){return new AM(SM.APP_DELETED,"The Firebase app was deleted.")}function LM(e){return new AM(SM.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function OM(e,t){return new AM(SM.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function UM(e){throw new AM(SM.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(SM||(SM={}));var FM,BM=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return g(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new AM(SM.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===EM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new AM(SM.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),VM=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return g(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function zM(e){return"string"===typeof e||e instanceof String}function jM(e){return HM()&&e instanceof Blob}function HM(){return"undefined"!==typeof Blob}function GM(e,t,n,r){if(r<t)throw PM("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw PM("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function WM(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function qM(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function XM(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(FM||(FM={}));var KM=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return g(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=CM();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?DM():RM());else i(IM())}};this.canceled_?t(0,new YM(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new YM(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===FM.NO_ERROR,a=r.getStatus();if(!n||XM(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===FM.ABORT;t(!1,new YM(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new YM(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),YM=g((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function QM(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function JM(){for(var e=QM(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(HM())return new Blob(n);throw new AM(SM.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ZM(e){if("undefined"===typeof atob)throw t="base-64",new AM(SM.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var $M={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},eC=g((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function tC(e,t){switch(e){case $M.RAW:return new eC(nC(t));case $M.BASE64:case $M.BASE64URL:return new eC(rC(e,t));case $M.DATA_URL:return new eC(function(e){var t=new iC(e);return t.base64?rC($M.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw OM($M.DATA_URL,"Malformed data URL.")}return nC(t)}(t.rest)}(t),new iC(t).contentType)}throw CM()}function nC(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function rC(e,t){switch(e){case $M.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw OM(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $M.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw OM(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=ZM(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw OM(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var iC=g((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw OM($M.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var aC=function(){function e(t,n){d(this,e);var r=0,i="";jM(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return g(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(jM(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(HM()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(JM.apply(null,i))}var a=n.map((function(e){return zM(e)?tC($M.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function oC(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function sC(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function uC(e,t){return t}var cC=g((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||uC})),lC=null;function hC(){if(lC)return lC;var e=[];e.push(new cC("bucket")),e.push(new cC("generation")),e.push(new cC("metageneration")),e.push(new cC("name","fullPath",!0));var t=new cC("name");t.xform=function(e,t){return function(e){return!zM(e)||e.length<2?e:sC(e)}(t)},e.push(t);var n=new cC("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new cC("timeCreated")),e.push(new cC("updated")),e.push(new cC("md5Hash",null,!0)),e.push(new cC("cacheControl",null,!0)),e.push(new cC("contentDisposition",null,!0)),e.push(new cC("contentEncoding",null,!0)),e.push(new cC("contentLanguage",null,!0)),e.push(new cC("contentType",null,!0)),e.push(new cC("metadata","customMetadata",!0)),lC=e}function fC(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new BM(n,r);return t._makeStorageReference(i)}})}(r,e),r}function dC(e,t,n){var r=oC(t);return null===r?null:fC(e,r,n)}function pC(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var vC="prefixes",mC="items";function gC(e,t,n){var r=oC(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[vC]){var i,a=A(n[vC]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new BM(t,o));r.prefixes.push(s)}}catch(f){a.e(f)}finally{a.f()}}if(n[mC]){var u,c=A(n[mC]);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new BM(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var yC=g((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function _C(e){if(!e)throw CM()}function bC(e,t){return function(n,r){var i=dC(e,r,t);return _C(null!==i),i}}function xC(e,t){return function(n,r){var i=dC(e,r,t);return _C(null!==i),function(e,t,n,r){var i=oC(t);if(null===i)return null;if(!zM(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return WM("/b/"+o(i)+"/o/"+o(a),n,r)+qM({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function wC(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new AM(SM.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new AM(SM.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new AM(SM.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new AM(SM.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function kC(e){var t=wC(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new AM(SM.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function SC(e,t,n){var r=WM(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new yC(r,"GET",bC(e,n),i);return a.errorHandler=kC(t),a}function EC(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=WM(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new yC(o,"GET",function(e,t){return function(n,r){var i=gC(e,t,r);return _C(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=wC(t),u}function TC(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function AC(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=TC(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+pC(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=aC.getBlob(c,r,l);if(null===h)throw NM();var f={name:u.fullPath},d=WM(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new yC(d,"POST",bC(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=wC(t),v}var MC=g((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function CC(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){_C(!1)}return _C(!!n&&-1!==(t||["active"]).indexOf(n)),n}var IC=262144;function RC(e,t,n,r,i,a,o,s){var u=new MC(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new AM(SM.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw NM();var v=t.maxUploadRetryTime,m=new yC(n,"POST",(function(e,n){var i,o=CC(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?bC(t,a)(e,n):null,new MC(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=wC(e),m}var NC={STATE_CHANGED:"state_changed"},PC={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function DC(e){switch(e){case"running":case"pausing":case"canceling":return PC.RUNNING;case"paused":return PC.PAUSED;case"success":return PC.SUCCESS;case"canceled":return PC.CANCELED;default:return PC.ERROR}}var LC=g((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function OC(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var UC=null,FC=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=FM.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=FM.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=FM.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return g(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw UM("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw UM("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw UM("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw UM("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw UM("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),BC=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(FC);function VC(){return UC?UC():new BC}var zC=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=hC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(SM.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(XM(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=IM()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(SM.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return g(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=TC(t,r,i),s={name:o.fullPath},u=WM(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=pC(o,n),h=e.maxUploadRetryTime,f=new yC(u,"POST",(function(e){var t;CC(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){_C(!1)}return _C(zM(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=wC(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,VC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new yC(n,"POST",(function(e){var t=CC(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){_C(!1)}n||_C(!1);var i=Number(n);return _C(!isNaN(i)),new MC(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=wC(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,VC,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=IC*this._chunkMultiplier,n=new MC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=RC(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,VC,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(IC*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=SC(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,VC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=AC(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,VC,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=RM(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=DC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new LC(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(DC(this._state)){case PC.SUCCESS:OC(this._resolve.bind(null,this.snapshot))();break;case PC.CANCELED:case PC.ERROR:OC(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(DC(this._state)){case PC.RUNNING:case PC.PAUSED:e.next&&OC(e.next.bind(e,this.snapshot))();break;case PC.SUCCESS:e.complete&&OC(e.complete.bind(e))();break;default:e.error&&OC(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),jC=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof BM?n:BM.makeFromUrl(n,t.host)}return g(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new BM(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return sC(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new BM(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw LM(e)}}]),e}();function HC(e,t,n){return GC.apply(this,arguments)}function GC(){return(GC=kt(xt().mark((function e(t,n,r){var i,a,o,s;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,WC(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,f(s.prefixes)),(a=n.items).push.apply(a,f(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,HC(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WC(e,t){null!=t&&"number"===typeof t.maxResults&&GM("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=EC(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,VC)}function qC(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=WM(t.fullServerUrl(),e.host,e._protocol),a=pC(n,r),o=e.maxOperationRetryTime,s=new yC(i,"PATCH",bC(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=kC(t),s}(e.storage,e._location,t,hC());return e.storage.makeRequestWithTokens(n,VC)}function XC(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=WM(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new yC(r,"GET",xC(e,n),i);return a.errorHandler=kC(t),a}(e.storage,e._location,hC());return e.storage.makeRequestWithTokens(t,VC).then((function(e){if(null===e)throw new AM(SM.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function KC(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=WM(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new yC(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=kC(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,VC)}function YC(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new BM(e._location.bucket,n);return new jC(e.storage,r)}function QC(e,t){if(e instanceof $C){var n=e;if(null==n._bucket)throw new AM(SM.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TM+"' property when initializing the app?");var r=new jC(n,n._bucket);return null!=t?QC(r,t):r}return void 0!==t?YC(e,t):e}function JC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof $C)return new jC(e,t);throw PM("To use ref(service, url), the first argument must be a Storage instance.")}return QC(e,t)}function ZC(e,t){var n=null===t||void 0===t?void 0:t[TM];return null==n?null:BM.makeFromBucketSpec(n,e)}var $C=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=EM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?BM.makeFromBucketSpec(i,this._host):ZC(this._host,this.app.options)}return g(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=BM.makeFromBucketSpec(this._url,e):this._bucket=ZC(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){GM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){GM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=kt(xt().mark((function e(){var t,n;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new jC(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new VM(DM());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=qM(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new KM(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=kt(xt().mark((function e(t,n){var r,i,a,o;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),eI="@firebase/storage",tI="0.12.0",nI="storage";function rI(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new zC(e,new aC(t),n)}(e=bt(e),t,n)}function iI(e){return function(e){e._throwIfRoot("getMetadata");var t=SC(e.storage,e._location,hC());return e.storage.makeRequestWithTokens(t,VC)}(e=bt(e))}function aI(e){return function(e){var t={prefixes:[],items:[]};return HC(e,t).then((function(){return t}))}(e=bt(e))}function oI(e,t){return JC(e=bt(e),t)}function sI(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:et(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function uI(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new $C(r,i,a,n,xn)}pn(new St(nI,uI,"PUBLIC").setMultipleInstances(!0)),An(eI,tI,""),An(eI,tI,"esm2017");var cI=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return g(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),lI=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return g(e,[{key:"snapshot",get:function(){return new cI(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new cI(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new cI(e,i,i._ref))}:{next:t.next?function(e){return t.next(new cI(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),hI=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return g(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new fI(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new fI(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),fI=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return g(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return YC(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new lI(rI(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$M.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=tC(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new lI(new zC(this._delegate,new aC(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return aI(this._delegate).then((function(t){return new hI(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return WC(e=bt(e),t)}(this._delegate,e||void 0).then((function(e){return new hI(e,t.storage)}))}},{key:"getMetadata",value:function(){return iI(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return qC(e=bt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return XC(bt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),KC(bt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw LM(e)}}]),e}(),dI=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return g(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(pI(e))throw PM("ref() expected a child path but got a URL, use refFromURL instead.");return new fI(oI(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!pI(e))throw PM("refFromURL() expected a full URL but got a child path, use ref() instead.");try{BM.makeFromUrl(e,this._delegate.host)}catch(t){throw PM("refFromUrl() expected a valid full URL but got an invalid one.")}return new fI(oI(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};sI(this._delegate,e,t,n)}}]),e}();function pI(e){return/^[A-Za-z]+:\/\//.test(e)}function vI(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new dI(r,i)}!function(e){var t={TaskState:PC,TaskEvent:NC,StringFormat:$M,Storage:dI,Reference:fI};e.INTERNAL.registerComponent(new St("storage-compat",vI,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}($n);var mI=$n.initializeApp({apiKey:"AIzaSyC1TBhwQ0DNgQ55kLhuLQF9wZbzgeqB3vA",authDomain:"mixlab-56f28.firebaseapp.com",projectId:"mixlab-56f28",storageBucket:"mixlab-56f28.appspot.com",messagingSenderId:"673872028091",appId:"1:673872028091:web:054417acb2bde460b8e49e"}),gI=mI.firestore(),yI=(mI.storage(),{titleContainer:"component_titleContainer__pc0Yc",mainTitle:"component_mainTitle__fVp-L",subText:"component_subText__-ptfw",information:"component_information__7YpDu",introList:"component_introList__jaI7O",introContainer:"component_introContainer__wL6OD",introTextWrapper:"component_introTextWrapper__BMf79",introtitle:"component_introtitle__Cudi9",introexplanation:"component_introexplanation__5nsSA",icons:"component_icons__B76PW",border:"component_border__OiV1S"}),_I=n(184);function bI(e){return console.log(e),(0,_I.jsxs)("div",{className:"".concat(yI.titleContainer," ").concat(e.className),style:{width:e.width},children:[(0,_I.jsxs)("div",{className:yI.mainTitle,style:{alignItems:e.alignItems},children:[(0,_I.jsx)("p",{className:yI.subText,style:{"--align":e.align},children:e.subText}),(0,_I.jsx)("h2",{style:{"--align":e.align},children:e.h2})]}),(0,_I.jsx)("p",{className:yI.information,style:{"--align":e.align},children:e.information}),e.children]})}function xI(e){return(0,_I.jsxs)("div",{className:yI.introContainer,children:[(0,_I.jsx)("div",{className:yI.icons,style:{"--symbol":"url("+e.icons+")"}}),(0,_I.jsxs)("div",{className:yI.introTextWrapper,children:[(0,_I.jsx)("div",{className:yI.border}),(0,_I.jsx)("p",{className:yI.introtitle,children:e.introtitle}),(0,_I.jsx)("p",{className:yI.introexplanation,children:e.introexplanation})]})]})}function wI(e){var t=e.data.map((function(e){return(0,_I.jsx)(xI,{icons:e.Symbol,introtitle:e.title,introexplanation:e.information},e.id)}));return(0,_I.jsx)("div",{className:yI.introList,children:t})}var kI,SI,EI=function(e){return(0,_I.jsxs)("button",{className:"btn ".concat(e.className),onClick:e.onClick,disabled:e.disabled,children:[(0,_I.jsx)("div",{className:"floatani"}),(0,_I.jsx)("span",{children:e.title||"Button"})]})},TI={headerWrapper:"Header_headerWrapper__70Spf",logo:"Header_logo__8wKML",headerContainer:"Header_headerContainer__v19I8",profWrapper:"Header_profWrapper__bMBxm",navWrapper:"Header_navWrapper__6d6Z+",nav:"Header_nav__cdrAW",navigation:"Header_navigation__pzQCb",activeNav:"Header_activeNav__O52Oy",menuIcon:"Header_menuIcon__VGDr8",mobileNav:"Header_mobileNav__yx2Gw",open:"Header_open__bTYUq"},AI=["title","titleId"];function MI(){return MI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MI.apply(this,arguments)}function CI(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function II(e,t){var n=e.title,i=e.titleId,a=CI(e,AI);return r.createElement("svg",MI({width:120,height:48,viewBox:"0 0 120 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,kI||(kI=r.createElement("g",{clipPath:"url(#clip0_970_1450)"},r.createElement("path",{d:"M50.5776 12.3592C50.5776 9.39985 48.1699 7 45.2009 7C42.6542 7 40.5245 8.76983 39.9685 11.1409V11.1331C39.9685 11.1331 39.2629 14.7041 36.1549 16.8765C34.4947 18.0372 32.8528 18.4503 30.668 17.7523V17.7575C30.1146 17.5667 29.5245 17.4595 28.9082 17.4595C28.2918 17.4595 27.7017 17.5693 27.1509 17.7575V17.7523C24.9635 18.4477 23.138 18.2751 20.9296 16.4138C18.7212 14.5525 17.478 10.6547 17.478 10.6547V10.6599C16.762 8.53455 14.7477 7 12.3767 7C9.49689 7 7.15212 9.2613 7.01311 12.0977L7 12.1369V22.8552C7 24.829 8.07272 26.5465 9.66475 27.4772H9.65951C9.65951 27.4772 11.0312 28.1621 11.0732 29.5006C11.1178 30.8992 9.84835 31.2207 8.86218 32.188H8.8648C7.74487 33.171 7.03672 34.6062 7.03672 36.2087C7.03672 39.168 9.44444 41.5678 12.4134 41.5678C15.3824 41.5678 17.7902 39.168 17.7902 36.2087C17.7902 34.5905 17.0663 33.1422 15.9306 32.1619H15.9358C14.9497 31.1946 13.7537 30.9018 13.7563 29.5032C13.7563 28.1673 15.2303 27.4014 15.2303 27.4014H15.2251C16.7437 26.4498 17.7561 24.7741 17.7561 22.8579V16.7144C19.2904 16.8033 21.4594 18.4477 21.4594 18.4477C23.66 20.3639 23.5367 22.7402 23.5367 22.7402H23.5419C23.5419 22.7664 23.5367 22.7925 23.5367 22.8213C23.5367 25.7806 25.9444 28.1804 28.9134 28.1804C31.8824 28.1804 34.2901 25.7806 34.2901 22.8213C34.2901 22.7298 34.2796 22.6383 34.277 22.5494H34.2849C34.2849 22.5494 34.0226 20.7665 36.349 18.4006C36.349 18.4006 39.0846 15.7263 42.148 16.7746C42.148 16.7746 42.148 16.772 42.148 16.7693C42.2686 16.853 42.3945 16.9288 42.5204 17.002H42.5152C42.5152 17.002 42.5519 17.0229 42.607 17.0543C42.6201 17.0621 42.6332 17.07 42.6489 17.0778C42.9873 17.2791 43.8502 17.9039 43.8633 18.9836C43.8817 20.3848 42.6332 20.6933 41.6733 21.6527H41.6785C40.5481 22.6383 39.8294 24.0813 39.8294 25.6943V36.2087C39.8294 39.168 42.2372 41.5678 45.2062 41.5678C48.1752 41.5678 50.5829 39.168 50.5829 36.2087V25.6943C50.5829 24.0813 49.8642 22.6383 48.7338 21.6553H48.7391C47.7791 20.6933 46.5307 20.3848 46.549 18.9836C46.5621 17.9013 47.4277 17.2791 47.7634 17.0778C47.7765 17.07 47.7896 17.0621 47.8053 17.0543C47.863 17.0229 47.8971 17.0046 47.8971 17.0046H47.8919C49.4997 16.074 50.5829 14.346 50.5829 12.3644L50.5776 12.3592Z",fill:"current"}),r.createElement("path",{d:"M67.5235 21.653H67.5288C66.5688 20.691 65.3204 20.3825 65.3387 18.9813C65.3518 17.899 66.2174 17.2768 66.5531 17.0755C66.5662 17.0677 66.5793 17.0598 66.595 17.052C66.6527 17.0206 66.6868 17.0023 66.6868 17.0023H66.6816C68.2894 16.0717 69.3726 14.3437 69.3726 12.3621C69.3726 9.40278 66.9649 7.00293 63.9959 7.00293C61.0269 7.00293 58.6191 9.40278 58.6191 12.3621C58.6191 14.3463 59.7024 16.0743 61.3101 16.9997H61.3049C61.3049 16.9997 61.3416 17.0206 61.3967 17.052C61.4098 17.0598 61.4229 17.0677 61.4386 17.0755C61.777 17.2768 62.6399 17.9016 62.653 18.9813C62.6714 20.3825 61.4229 20.691 60.463 21.6504H60.4682C59.3378 22.636 58.6191 24.079 58.6191 25.692V36.2064C58.6191 39.1657 61.0269 41.5655 63.9959 41.5655C66.9649 41.5655 69.3726 39.1657 69.3726 36.2064V25.692C69.3726 24.079 68.6539 22.636 67.5235 21.653Z",fill:"current"}),r.createElement("path",{d:"M107.623 30.8469C103.681 30.8025 102.721 30.3554 102.173 29.9973C101.614 29.6287 100.235 27.7177 101.937 25.229L111.392 16.1785C112.383 15.206 113 13.8545 113 12.3592C113 9.39985 110.592 7 107.623 7C106.159 7 104.835 7.58297 103.867 8.52932L93.9739 17.998C92.3793 18.7797 90.1211 18.2072 89.4286 17.6085C88.4136 16.7301 87.973 15.3786 88.0805 12.665H88.0727C88.0779 12.5657 88.0884 12.4637 88.0884 12.3592C88.0884 9.39985 85.6807 7 82.7117 7C79.7427 7 77.335 9.39985 77.335 12.3592C77.335 15.3184 79.7427 17.7183 82.7117 17.7183C82.7484 17.7183 82.7825 17.7131 82.8166 17.7131V17.7183C85.644 17.6529 87.1573 17.185 88.6707 18.7718C89.3657 19.4986 89.8771 21.2344 88.6025 23.1402L78.9296 32.3998C78.9296 32.3998 78.9113 32.4181 78.9034 32.4259L78.8876 32.4416C77.9277 33.4115 77.335 34.7395 77.335 36.2087C77.335 39.168 79.7427 41.5678 82.7117 41.5678C84.1673 41.5678 85.484 40.9901 86.4544 40.0542L95.9804 30.9384C97.7796 29.7385 100.198 30.3005 101.019 30.9829C101.971 31.775 102.194 33.035 102.265 35.8192H102.27C102.259 35.9473 102.249 36.0754 102.249 36.2087C102.249 39.168 104.657 41.5678 107.626 41.5678C110.595 41.5678 113.002 39.168 113.002 36.2087C113.002 33.2494 110.595 30.8495 107.626 30.8495L107.623 30.8469Z",fill:"current"}))),SI||(SI=r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_970_1450"},r.createElement("rect",{width:106,height:34.5652,fill:"white",transform:"translate(7 7)"})))))}var RI=r.forwardRef(II);n.p;function NI(e){var t=be().pathname===e.to;return console.log(e.to),(0,_I.jsx)("div",{className:"".concat(TI.nav," ").concat(t?TI.activeNav:""),onClick:e.onClick,children:e.title||"Navigation"})}var PI=function(e){var t=we(),n=l((0,r.useState)(!1),2),i=n[0],a=n[1],o=function(){window.scrollTo({top:0})},s=function(){return(0,_I.jsxs)("div",{className:"".concat(TI.navigation," ").concat(i?TI.mobileNav:""),children:[(0,_I.jsx)(NI,{title:"Introduction",to:"/intro",onClick:function(){t("/intro"),o(),a(!1)}}),(0,_I.jsx)(NI,{title:"People",to:"/people",onClick:function(){t("/people"),o(),a(!1)}}),(0,_I.jsx)(NI,{title:"Project",to:"/project",onClick:function(){console.log("des"),t("/project"),o(),a(!1)}}),(0,_I.jsx)(NI,{title:"News",to:"/news",onClick:function(){t("/news"),o(),a(!1)}})]})};return(0,_I.jsx)("div",{className:"".concat(TI.headerWrapper," ").concat(i?TI.open:""),children:(0,_I.jsxs)("div",{className:TI.headerContainer,children:[(0,_I.jsx)("div",{className:TI.navWrapper,children:(0,_I.jsx)(RI,{className:TI.logo,fill:"var(--P1)",onClick:function(){t("/")}})}),(0,_I.jsx)(s,{}),(0,_I.jsx)("div",{className:TI.menuIcon,onClick:function(){a(!i)},children:i?(0,_I.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEUSURBVHgB7dZNDoIwEAXgqeA9OIZLWXoMb+DSI7j0Bh7DJXHnMTiGiUDtVMHIr4mviSTvW2Ez2Bloh4oQERERERHNlBGA1e6c2Dg+maLYXo+bHBX7jYUA2GV8co9ibZdRpgkOxfnkXcwz1t0DACnARPFWjMndVTJURJO8i9FYfw9ibgFZ7bPEVmUm1ibuneTmXqb1Eukkv4jS6yHNBQBWgOorQsdDJa+gBah2Ea9pgiTv/1kC+CxCZwmTvIJs4o7bzT386v1br3UsAPwSam1YP9izsVGwm7in2+j4UHdCwLXRkVY51mJ/hTtKTLTKUEXgjhJiRluljvkl1Xyx/+woYcVeplplXYSPBR0liIiIiIiIZusBAufILpRHni0AAAAASUVORK5CYII="}):(0,_I.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABUSURBVHgB7dNBDYAwEETRLUpABQ5whAoc4QAV4ASwwKakafLefeb2IwAAAGijRNK87uc7H6OK+zq2ZYqEIbJKfvrrF3wj4ipETDsirkLEAAAAHXoA7zoSHA8oZ1sAAAAASUVORK5CYII="})})]})})},DI=(0,r.forwardRef)((function(e,t){var n=l((0,r.useState)(!1),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){var t=function(t){var n=document.querySelector(".section.".concat(e.className)),r=n.getBoundingClientRect(),o=r.top+window.innerHeight/2>=-400&&r.top+window.innerHeight/2<=window.innerHeight+300&&r.bottom>=-100,s=r.top<-100&&r.bottom+window.innerHeight/2<window.innerHeight-200,u=r.bottom>window.innerHeight+300&&r.top+window.innerHeight/2>window.innerHeight;console.log(o,r.top+window.innerHeight/2>=0,r.top+window.innerHeight/2<=window.innerHeight+300,r.bottom>=-100,e.className),!o||i||s||u?u&&i?(a(!1),n.style.opacity=0,n.style.transform="translateY(24px)"):s&&i&&(a(!1),n.style.opacity=0,n.style.transform="translateY(-24px)"):(n.style.transform="translateY(0px)",n.style.opacity=1,a(!0))};return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}),[e.className,i]),(0,_I.jsxs)("div",{className:"section ".concat(e.className),ref:t,children:["right"==e.type?e.children:"",(0,_I.jsx)(bI,{width:e.width,type:e.type,subText:e.subText,h2:e.h2,information:e.information,alignItems:e.alignItems,align:e.align||"center",className:"".concat(e.className,"inner"),children:"right"==e.type?(0,_I.jsx)(EI,{onClick:e.onClick,title:e.buttonText,className:"large line"}):""}),"right"!=e.type?e.children:""]})})),LI=DI,OI=(n(890),n.p+"static/media/Works1.e67dde11b78a7731e302.png"),UI=n.p+"static/media/Works2.30b54a6c9afacb8a1bf4.png",FI=n.p+"static/media/Works3.f02746988071d93fa761.png";function BI(e){return(0,_I.jsxs)("div",{className:"carousel",children:[(0,_I.jsx)("div",{className:"subImg",children:(0,_I.jsx)("img",{src:OI,style:{width:"175px",height:"175px"},alt:""})}),(0,_I.jsx)("div",{className:"mainImg",children:(0,_I.jsx)("img",{src:UI,style:{width:"277px",height:"277px"},alt:""})}),(0,_I.jsx)("div",{className:"subImg",children:(0,_I.jsx)("img",{src:FI,style:{width:"175px",height:"175px"},alt:""})})]})}var VI=n.p+"static/media/plus.baed50331fbbeccb5ea953b1faaee9d2.svg";function zI(e){return(0,_I.jsxs)("div",{className:"subImg",onClick:e.onClick,children:[(0,_I.jsxs)("div",{className:"hover",children:[(0,_I.jsx)("img",{src:VI,alt:""}),(0,_I.jsx)("span",{children:"More view"})]}),(0,_I.jsx)("img",{src:e.img,style:{width:"175px",height:"175px"},alt:""})]})}function jI(e){var t=we(),n=e.data.map((function(e){return(0,_I.jsx)(zI,{img:e.thumbnail,onClick:function(){t("/news/"+e.title)}},e.id)}));return(0,_I.jsx)("div",{className:"carousel",children:n})}var HI,GI={MoreCards:"MoreCards_MoreCards__j8QGw",MoreCard:"MoreCards_MoreCard__ZmHeV",title:"MoreCards_title__hdZ-x",context:"MoreCards_context__oXg4o"};function WI(e){var t=[{title1:"Who is ",title2:"MIXER",context:"MIX LAB\uc758 \uad6c\uc131\uc6d0\uc740 \uc5b4\ub5bb\uac8c \ub418\ub098\uc694?",button:"More View",event:e.onClick_people},{title1:"MIX LAB ",title2:"\uc9c0\uc6d0\ud558\uae30",context:"MIX LAB\uc5d0\uc11c \ud568\uaed8\ud560 \ubd84\ub4e4\uc744 \ucc3e\uc2b5\ub2c8\ub2e4",button:"Apply",event:e.onClick_apply},{title1:"MIX LAB ",title2:"F&Q",context:"MIX LAB\uc740 \uc5b4\ub5bb\uac8c \ub4e4\uc5b4\uac00\ub098\uc694?",button:"More View",event:e.onClick_qna}];function n(e){return(0,_I.jsxs)("div",{className:GI.MoreCard,children:[(0,_I.jsxs)("div",{className:GI.title,children:[(0,_I.jsx)("span",{children:t[e.num].title1}),(0,_I.jsx)("span",{children:t[e.num].title2})]}),(0,_I.jsx)("div",{className:GI.context,children:t[e.num].context}),(0,_I.jsx)("div",{className:GI.button,children:(0,_I.jsx)(EI,{title:t[e.num].button,onClick:e.onClick})})]})}return(0,_I.jsx)("div",{className:GI.MoreCards,children:t.map((function(e,r){return(0,_I.jsx)(n,{num:r,onClick:t[r].event})}))})}function qI(e){return(0,_I.jsx)("div",{className:"footer",children:(0,_I.jsxs)("div",{className:"footerContainer",children:[(0,_I.jsx)(RI,{className:"logo",fill:"var(--G4)",onClick:function(){}}),(0,_I.jsxs)("p",{children:["237, Sangidaehak-ro, Siheung-si, Gyeonggi-do, 15073 ,Republic of Korea"," ",(0,_I.jsx)("br",{})," Copyright\xa9 2020 MIXLAB. ALL RIGHTS RESERVED"]})]})})}var XI="164",KI=1,YI=2,QI=3,JI=0,ZI=1,$I=100,eR=0,tR=1,nR=2,rR=0,iR=1,aR=2,oR=3,sR=4,uR=5,cR=6,lR=7,hR=301,fR=302,dR=303,pR=304,vR=306,mR=1e3,gR=1001,yR=1002,_R=1003,bR=1005,xR=1006,wR=1007,kR=1008,SR=1009,ER=1013,TR=1014,AR=1015,MR=1016,CR=1020,IR=1023,RR=1026,NR=1027,PR=33776,DR=33777,LR=33778,OR=33779,UR=36492,FR=2300,BR=2301,VR=2302,zR=2400,jR=2401,HR=2402,GR="",WR="srgb",qR="srgb-linear",XR="display-p3",KR="display-p3-linear",YR="linear",QR="srgb",JR="rec709",ZR="p3",$R=7680,eN=35044,tN="300 es",nN=2e3,rN=2001,iN=function(){function e(){d(this,e)}return g(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),aN=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],oN=Math.PI/180,sN=180/Math.PI;function uN(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(aN[255&e]+aN[e>>8&255]+aN[e>>16&255]+aN[e>>24&255]+"-"+aN[255&t]+aN[t>>8&255]+"-"+aN[t>>16&15|64]+aN[t>>24&255]+"-"+aN[63&n|128]+aN[n>>8&255]+"-"+aN[n>>16&255]+aN[n>>24&255]+aN[255&r]+aN[r>>8&255]+aN[r>>16&255]+aN[r>>24&255]).toLowerCase()}function cN(e,t,n){return Math.max(t,Math.min(n,e))}function lN(e,t){return(e%t+t)%t}function hN(e,t,n){return(1-n)*e+n*t}function fN(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function dN(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var pN=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return g(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(cN(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),vN=function(){function e(t,n,r,i,a,o,s,u,c){d(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,c)}return g(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=a*p+o*g+s*b,i[3]=a*v+o*y+s*x,i[6]=a*m+o*_+s*w,i[1]=u*p+c*g+l*b,i[4]=u*v+c*y+l*x,i[7]=u*m+c*_+l*w,i[2]=h*p+f*g+d*b,i[5]=h*v+f*y+d*x,i[8]=h*m+f*_+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*i*c+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=c*a-o*u,h=o*s-c*i,f=u*i-a*s,d=t*l+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(mN.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(mN.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(mN.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),mN=new vN;function gN(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function yN(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var _N={};function bN(e){e in _N||(_N[e]=!0,console.warn(e))}var xN,wN=(new vN).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),kN=(new vN).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),SN=(He(HI={},qR,{transfer:YR,primaries:JR,toReference:function(e){return e},fromReference:function(e){return e}}),He(HI,WR,{transfer:QR,primaries:JR,toReference:function(e){return e.convertSRGBToLinear()},fromReference:function(e){return e.convertLinearToSRGB()}}),He(HI,KR,{transfer:YR,primaries:ZR,toReference:function(e){return e.applyMatrix3(kN)},fromReference:function(e){return e.applyMatrix3(wN)}}),He(HI,XR,{transfer:QR,primaries:ZR,toReference:function(e){return e.convertSRGBToLinear().applyMatrix3(kN)},fromReference:function(e){return e.applyMatrix3(wN).convertLinearToSRGB()}}),HI),EN=new Set([qR,KR]),TN={enabled:!0,_workingColorSpace:qR,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!EN.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var r=SN[t].toReference;return(0,SN[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return SN[e].primaries},getTransfer:function(e){return e===GR?YR:SN[e].transfer}};function AN(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function MN(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var CN=function(){function e(){d(this,e)}return g(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===xN&&(xN=yN("canvas")),xN.width=e.width,xN.height=e.height;var n=xN.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=xN}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=yN("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*AN(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*AN(o[s]/255)):o[s]=AN(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),IN=0,RN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d(this,e),this.isSource=!0,Object.defineProperty(this,"id",{value:IN++}),this.uuid=uN(),this.data=t,this.dataReady=!0,this.version=0}return g(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(NN(r[a].image)):i.push(NN(r[a]))}else i=NN(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function NN(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?CN.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var PN=0,DN=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gR,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gR,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xR,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kR,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:IR,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:SR,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:GR;return d(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(w(e),"id",{value:PN++}),e.uuid=uN(),e.name="",e.source=new RN(r),e.mipmaps=[],e.mapping=i,e.channel=0,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=h,e.format=c,e.internalFormat=null,e.type=l,e.offset=new pN(0,0),e.repeat=new pN(1,1),e.center=new pN(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new vN,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.colorSpace=f,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.pmremVersion=0,e}return g(n,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case mR:e.x=e.x-Math.floor(e.x);break;case gR:e.x=e.x<0?0:1;break;case yR:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case mR:e.y=e.y-Math.floor(e.y);break;case gR:e.y=e.y<0?0:1;break;case yR:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(e){!0===e&&this.pmremVersion++}}]),n}(iN);DN.DEFAULT_IMAGE=null,DN.DEFAULT_MAPPING=300,DN.DEFAULT_ANISOTROPY=1;var LN=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return g(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],c=s[4],l=s[8],h=s[1],f=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(c-h)<a&&Math.abs(l-p)<a&&Math.abs(d-v)<a){if(Math.abs(c+h)<o&&Math.abs(l+p)<o&&Math.abs(d+v)<o&&Math.abs(u+f+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,_=(m+1)/2,b=(c+h)/4,x=(l+p)/4,w=(d+v)/4;return g>y&&g>_?g<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(g)),i=x/n):y>_?y<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(y)),i=w/r):_<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(_)),r=w/i),this.set(n,r,i,t),this}var k=Math.sqrt((v-d)*(v-d)+(l-p)*(l-p)+(h-c)*(h-c));return Math.abs(k)<.001&&(k=1),this.x=(v-d)/k,this.y=(l-p)/k,this.z=(h-c)/k,this.w=Math.acos((u+f+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),ON=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,n),(e=t.call(this)).isRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new LN(0,0,r,i),e.scissorTest=!1,e.viewport=new LN(0,0,r,i);var o={width:r,height:i,depth:1};a=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:xR,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},a);var s=new DN(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.colorSpace);s.flipY=!1,s.generateMipmaps=a.generateMipmaps,s.internalFormat=a.internalFormat,e.textures=[];for(var u=a.count,c=0;c<u;c++)e.textures[c]=s.clone(),e.textures[c].isRenderTargetTexture=!0;return e.depthBuffer=a.depthBuffer,e.stencilBuffer=a.stencilBuffer,e.resolveDepthBuffer=a.resolveDepthBuffer,e.resolveStencilBuffer=a.resolveStencilBuffer,e.depthTexture=a.depthTexture,e.samples=a.samples,e}return g(n,[{key:"texture",get:function(){return this.textures[0]},set:function(e){this.textures[0]=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(var t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;var r=Object.assign({},e.texture.image);return this.texture.source=new RN(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(iN),UN=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(this,n),(e=t.call(this,r,i,a)).isWebGLRenderTarget=!0,e}return g(n)}(ON),FN=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return d(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=_R,e.minFilter=_R,e.wrapR=gR,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return g(n)}(DN),BN=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return d(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=_R,e.minFilter=_R,e.wrapR=gR,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return g(n)}(DN),VN=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return g(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(r/2),l=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"YXZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"ZXY":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"ZYX":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"YZX":this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d;break;case"XZY":this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],c=t[6],l=t[10],h=n+o+l;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>l){var d=2*Math.sqrt(1+n-o-l);this._w=(c-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>l){var p=2*Math.sqrt(1+o-n-l);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+c)/p}else{var v=2*Math.sqrt(1+l-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+c)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(cN(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+r*u-i*s,this._y=r*c+a*s+i*o-n*u,this._z=i*c+a*u+n*s-r*o,this._w=a*c-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-t)*l)/c,f=Math.sin(t*l)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=c,void(e[t+3]=l);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(l!==p||s!==h||u!==f||c!==d){var v=1-o,m=s*h+u*f+c*d+l*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,m*g);v=Math.sin(v*b)/_,o=Math.sin(o*b)/_}var x=o*g;if(s=s*v+h*x,u=u*v+f*x,c=c*v+d*x,l=l*v+p*x,v===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return e[t]=o*d+c*l+s*f-u*h,e[t+1]=s*d+c*h+u*l-o*f,e[t+2]=u*d+c*f+o*h-s*l,e[t+3]=c*d-o*l-s*h-u*f,e}}]),t}(),zN=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;d(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return g(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(HN.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(HN.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=2*(a*r-o*n),c=2*(o*t-i*r),l=2*(i*n-a*t);return this.x=t+s*u+a*l-o*c,this.y=n+s*c+o*u-i*l,this.z=r+s*l+i*c-a*u,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return jN.copy(this).projectOnVector(e),this.sub(jN)}},{key:"reflect",value:function(e){return this.sub(jN.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(cN(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}},{key:Symbol.iterator,value:xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),jN=new zN,HN=new VN,GN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zN(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zN(-1/0,-1/0,-1/0);d(this,e),this.isBox3=!0,this.min=t,this.max=n}return g(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(qN.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(qN.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=qN.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n){var r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(var i=0,a=r.count;i<a;i++)!0===e.isMesh?e.getVertexPosition(i,qN):qN.fromBufferAttribute(r,i),qN.applyMatrix4(e.matrixWorld),this.expandByPoint(qN);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),XN.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),XN.copy(n.boundingBox)),XN.applyMatrix4(e.matrixWorld),this.union(XN)}for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,qN),qN.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(eP),tP.subVectors(this.max,eP),KN.subVectors(e.a,eP),YN.subVectors(e.b,eP),QN.subVectors(e.c,eP),JN.subVectors(YN,KN),ZN.subVectors(QN,YN),$N.subVectors(KN,QN);var t=[0,-JN.z,JN.y,0,-ZN.z,ZN.y,0,-$N.z,$N.y,JN.z,0,-JN.x,ZN.z,0,-ZN.x,$N.z,0,-$N.x,-JN.y,JN.x,0,-ZN.y,ZN.x,0,-$N.y,$N.x,0];return!!iP(t,KN,YN,QN,tP)&&(!!iP(t=[1,0,0,0,1,0,0,0,1],KN,YN,QN,tP)&&(nP.crossVectors(JN,ZN),iP(t=[nP.x,nP.y,nP.z],KN,YN,QN,tP)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,qN).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(qN).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(WN[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),WN[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),WN[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),WN[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),WN[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),WN[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),WN[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),WN[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(WN)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),WN=[new zN,new zN,new zN,new zN,new zN,new zN,new zN,new zN],qN=new zN,XN=new GN,KN=new zN,YN=new zN,QN=new zN,JN=new zN,ZN=new zN,$N=new zN,eP=new zN,tP=new zN,nP=new zN,rP=new zN;function iP(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){rP.fromArray(e,a);var s=i.x*Math.abs(rP.x)+i.y*Math.abs(rP.y)+i.z*Math.abs(rP.z),u=t.dot(rP),c=n.dot(rP),l=r.dot(rP);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}var aP=new GN,oP=new zN,sP=new zN,uP=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zN,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;d(this,e),this.isSphere=!0,this.center=t,this.radius=n}return g(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):aP.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;oP.subVectors(e,this.center);var t=oP.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(oP,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(sP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(oP.copy(e.center).add(sP)),this.expandByPoint(oP.copy(e.center).sub(sP))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),cP=new zN,lP=new zN,hP=new zN,fP=new zN,dP=new zN,pP=new zN,vP=new zN,mP=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zN,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zN(0,0,-1);d(this,e),this.origin=t,this.direction=n}return g(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,cP)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=cP.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(cP.copy(this.origin).addScaledVector(this.direction,t),cP.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){lP.copy(e).add(t).multiplyScalar(.5),hP.copy(t).sub(e).normalize(),fP.copy(this.origin).sub(lP);var i,a,o,s,u=.5*e.distanceTo(t),c=-this.direction.dot(hP),l=fP.dot(this.direction),h=-fP.dot(hP),f=fP.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(a=c*l-h,s=u*d,(i=c*h-l)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+c*(a*=p)+2*l)+a*(c*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-c*u+l)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(c*u+l)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=c>0?-u:u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(lP).addScaledVector(hP,a),o}},{key:"intersectSphere",value:function(e,t){cP.subVectors(e.center,this.origin);var n=cP.dot(this.direction),r=cP.dot(cP)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(i=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),l>=0?(o=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(o=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,cP)}},{key:"intersectTriangle",value:function(e,t,n,r,i){dP.subVectors(t,e),pP.subVectors(n,e),vP.crossVectors(dP,pP);var a,o=this.direction.dot(vP);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}fP.subVectors(this.origin,e);var s=a*this.direction.dot(pP.crossVectors(fP,pP));if(s<0)return null;var u=a*this.direction.dot(dP.cross(fP));if(u<0)return null;if(s+u>o)return null;var c=-a*fP.dot(vP);return c<0?null:this.at(c/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),gP=function(){function e(t,n,r,i,a,o,s,u,c,l,h,f,p,v,m,g){d(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,c,l,h,f,p,v,m,g)}return g(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/yP.setFromMatrixColumn(e,0).length(),i=1/yP.setFromMatrixColumn(e,1).length(),a=1/yP.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=a*c,f=a*l,d=o*c,p=o*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*c,m=s*l,g=u*c,y=u*l;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*l,t[5]=a*c,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var _=s*c,b=s*l,x=u*c,w=u*l;t[0]=_-w*o,t[4]=-a*l,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*c,t[9]=w-_*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var k=a*c,S=a*l,E=o*c,T=o*l;t[0]=s*c,t[4]=E*u-S,t[8]=k*u+T,t[1]=s*l,t[5]=T*u+k,t[9]=S*u-E,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var A=a*s,M=a*u,C=o*s,I=o*u;t[0]=s*c,t[4]=I-A*l,t[8]=C*l+M,t[1]=l,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=M*l+C,t[10]=A-I*l}else if("XZY"===e.order){var R=a*s,N=a*u,P=o*s,D=o*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=R*l+D,t[5]=a*c,t[9]=N*l-P,t[2]=P*l-N,t[6]=o*c,t[10]=D*l+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(bP,e,xP)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return SP.subVectors(e,t),0===SP.lengthSq()&&(SP.z=1),SP.normalize(),wP.crossVectors(n,SP),0===wP.lengthSq()&&(1===Math.abs(n.z)?SP.x+=1e-4:SP.z+=1e-4,SP.normalize(),wP.crossVectors(n,SP)),wP.normalize(),kP.crossVectors(SP,wP),r[0]=wP.x,r[4]=kP.x,r[8]=SP.x,r[1]=wP.y,r[5]=kP.y,r[9]=SP.y,r[2]=wP.z,r[6]=kP.z,r[10]=SP.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],k=r[8],S=r[12],E=r[1],T=r[5],A=r[9],M=r[13],C=r[2],I=r[6],R=r[10],N=r[14],P=r[3],D=r[7],L=r[11],O=r[15];return i[0]=a*x+o*E+s*C+u*P,i[4]=a*w+o*T+s*I+u*D,i[8]=a*k+o*A+s*R+u*L,i[12]=a*S+o*M+s*N+u*O,i[1]=c*x+l*E+h*C+f*P,i[5]=c*w+l*T+h*I+f*D,i[9]=c*k+l*A+h*R+f*L,i[13]=c*S+l*M+h*N+f*O,i[2]=d*x+p*E+v*C+m*P,i[6]=d*w+p*T+v*I+m*D,i[10]=d*k+p*A+v*R+m*L,i[14]=d*S+p*M+v*N+m*O,i[3]=g*x+y*E+_*C+b*P,i[7]=g*w+y*T+_*I+b*D,i[11]=g*k+y*A+_*R+b*L,i[15]=g*S+y*M+_*N+b*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+i*s*l-r*u*l-i*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*a*h-r*a*f+r*u*c-i*s*c)+e[11]*(+t*u*l-t*o*f-i*a*l+n*a*f+i*o*c-n*u*c)+e[15]*(-r*o*c-t*s*l+t*o*h+r*a*l-n*a*h+n*s*c)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=l*v*u-p*h*u+p*s*f-o*v*f-l*s*m+o*h*m,y=d*h*u-c*v*u-d*s*f+a*v*f+c*s*m-a*h*m,_=c*p*u-d*l*u+d*o*f-a*p*f-c*o*m+a*l*m,b=d*l*s-c*p*s-d*o*h+a*p*h+c*o*v-a*l*v,x=t*g+n*y+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return e[0]=g*w,e[1]=(p*h*i-l*v*i-p*r*f+n*v*f+l*r*m-n*h*m)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*w,e[3]=(l*s*i-o*h*i-l*r*u+n*h*u+o*r*f-n*s*f)*w,e[4]=y*w,e[5]=(c*v*i-d*h*i+d*r*f-t*v*f-c*r*m+t*h*m)*w,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*w,e[7]=(a*h*i-c*s*i+c*r*u-t*h*u-a*r*f+t*s*f)*w,e[8]=_*w,e[9]=(d*l*i-c*p*i-d*n*f+t*p*f+c*n*m-t*l*m)*w,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*w,e[11]=(c*o*i-a*l*i-c*n*u+t*l*u+a*n*f-t*o*f)*w,e[12]=b*w,e[13]=(c*p*r-d*l*r+d*n*h-t*p*h-c*n*v+t*l*v)*w,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*l*r-c*o*r+c*n*s-t*l*s-a*n*h+t*o*h)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,c=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,c*o+n,c*s-r*a,0,u*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,p=a*c,v=a*l,m=o*l,g=s*u,y=s*c,_=s*l,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+m))*b,r[1]=(f+_)*b,r[2]=(d-y)*b,r[3]=0,r[4]=(f-_)*x,r[5]=(1-(h+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=yP.set(r[0],r[1],r[2]).length(),a=yP.set(r[4],r[5],r[6]).length(),o=yP.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],_P.copy(this);var s=1/i,u=1/a,c=1/o;return _P.elements[0]*=s,_P.elements[1]*=s,_P.elements[2]*=s,_P.elements[4]*=u,_P.elements[5]*=u,_P.elements[6]*=u,_P.elements[8]*=c,_P.elements[9]*=c,_P.elements[10]*=c,t.setFromRotationMatrix(_P),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nN,c=this.elements,l=2*i/(t-e),h=2*i/(n-r),f=(t+e)/(t-e),d=(n+r)/(n-r);if(u===nN)o=-(a+i)/(a-i),s=-2*a*i/(a-i);else{if(u!==rN)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);o=-a/(a-i),s=-a*i/(a-i)}return c[0]=l,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=d,c[13]=0,c[2]=0,c[6]=0,c[10]=o,c[14]=s,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nN,c=this.elements,l=1/(t-e),h=1/(n-r),f=1/(a-i),d=(t+e)*l,p=(n+r)*h;if(u===nN)o=(a+i)*f,s=-2*f;else{if(u!==rN)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);o=i*f,s=-1*f}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-d,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=s,c[14]=-o,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),yP=new zN,_P=new gP,bP=new zN(0,0,0),xP=new zN(1,1,1),wP=new zN,kP=new zN,SP=new zN,EP=new gP,TP=new VN,AP=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;d(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return g(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],c=r[9],l=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(cN(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-cN(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,i),this._z=0);break;case"ZXY":this._x=Math.asin(cN(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-cN(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(cN(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-cN(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return EP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(EP,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return TP.setFromEuler(this),this.setFromQuaternion(TP,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();AP.DEFAULT_ORDER="XYZ";var MP=function(){function e(){d(this,e),this.mask=1}return g(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),CP=0,IP=new zN,RP=new VN,NP=new gP,PP=new zN,DP=new zN,LP=new zN,OP=new VN,UP=new zN(1,0,0),FP=new zN(0,1,0),BP=new zN(0,0,1),VP={type:"added"},zP={type:"removed"},jP={type:"childadded",child:null},HP={type:"childremoved",child:null},GP=function(e){_(n,e);var t=k(n);function n(){var e;d(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(w(e),"id",{value:CP++}),e.uuid=uN(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var r=new zN,i=new AP,a=new VN,o=new zN(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(w(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new gP},normalMatrix:{value:new vN}}),e.matrix=new gP,e.matrixWorld=new gP,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new MP,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return g(n,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return RP.setFromAxisAngle(e,t),this.quaternion.multiply(RP),this}},{key:"rotateOnWorldAxis",value:function(e,t){return RP.setFromAxisAngle(e,t),this.quaternion.premultiply(RP),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(UP,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(FP,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(BP,e)}},{key:"translateOnAxis",value:function(e,t){return IP.copy(e).applyQuaternion(this.quaternion),this.position.add(IP.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(UP,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(FP,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(BP,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(NP.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?PP.copy(e):PP.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),DP.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?NP.lookAt(DP,PP,this.up):NP.lookAt(PP,DP,this.up),this.quaternion.setFromRotationMatrix(NP),r&&(NP.extractRotation(r.matrixWorld),RP.setFromRotationMatrix(NP),this.quaternion.premultiply(RP.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(VP),jP.child=e,this.dispatchEvent(jP),jP.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(zP),HP.child=e,this.dispatchEvent(HP),HP.child=null),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,f(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),NP.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),NP.multiply(e.parent.matrixWorld)),e.applyMatrix4(NP),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(VP),jP.child=e,this.dispatchEvent(jP),jP.child=null,this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(DP,e,LP),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(DP,OP,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((function(e){return{boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var c=o[s];i(e.shapes,c)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],h=0,f=this.material.length;h<f;h++)l.push(i(e.materials,this.material[h]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),y=S(e.textures),_=S(e.images),b=S(e.shapes),x=S(e.skeletons),w=S(e.animations),k=S(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),w.length>0&&(n.animations=w),k.length>0&&(n.nodes=k)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(iN);GP.DEFAULT_UP=new zN(0,1,0),GP.DEFAULT_MATRIX_AUTO_UPDATE=!0,GP.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var WP=new zN,qP=new zN,XP=new zN,KP=new zN,YP=new zN,QP=new zN,JP=new zN,ZP=new zN,$P=new zN,eD=new zN,tD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zN,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zN;d(this,e),this.a=t,this.b=n,this.c=r}return g(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return WP.subVectors(this.c,this.b),qP.subVectors(this.a,this.b),.5*WP.cross(qP).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getInterpolation",value:function(t,n,r,i,a){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;YP.subVectors(a,i),QP.subVectors(o,i),ZP.subVectors(e,i);var s=YP.dot(ZP),u=QP.dot(ZP);if(s<=0&&u<=0)return t.copy(i);$P.subVectors(e,a);var c=YP.dot($P),l=QP.dot($P);if(c>=0&&l<=c)return t.copy(a);var h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(YP,n);eD.subVectors(e,o);var f=YP.dot(eD),d=QP.dot(eD);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(QP,r);var v=c*d-f*l;if(v<=0&&l-c>=0&&f-d>=0)return JP.subVectors(o,a),r=(l-c)/(l-c+(f-d)),t.copy(a).addScaledVector(JP,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(YP,n).addScaledVector(QP,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),WP.subVectors(e,t),r.cross(WP);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){WP.subVectors(r,t),qP.subVectors(n,t),XP.subVectors(e,t);var a=WP.dot(WP),o=WP.dot(qP),s=WP.dot(XP),u=qP.dot(qP),c=qP.dot(XP),l=a*u-o*o;if(0===l)return i.set(0,0,0),null;var h=1/l,f=(u*s-o*c)*h,d=(a*c-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,KP)&&(KP.x>=0&&KP.y>=0&&KP.x+KP.y<=1)}},{key:"getInterpolation",value:function(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,KP)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,KP.x),s.addScaledVector(a,KP.y),s.addScaledVector(o,KP.z),s)}},{key:"isFrontFacing",value:function(e,t,n,r){return WP.subVectors(n,t),qP.subVectors(e,t),WP.cross(qP).dot(r)<0}}]),e}(),nD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},rD={h:0,s:0,l:0},iD={h:0,s:0,l:0};function aD(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var oD=function(e){function t(e,n,r){return d(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}return g(t,[{key:"set",value:function(e,t,n){if(void 0===t&&void 0===n){var r=e;r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WR;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,TN.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TN.workingColorSpace;return this.r=e,this.g=t,this.b=n,TN.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TN.workingColorSpace;if(e=lN(e,1),t=cN(t,0,1),n=cN(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=aD(a,i,e+1/3),this.g=aD(a,i,e),this.b=aD(a,i,e-1/3)}return TN.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WR;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WR,n=nD[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=AN(e.r),this.g=AN(e.g),this.b=AN(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=MN(e.r),this.g=MN(e.g),this.b=MN(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WR;return TN.fromWorkingColorSpace(sD.copy(this),e),65536*Math.round(cN(255*sD.r,0,255))+256*Math.round(cN(255*sD.g,0,255))+Math.round(cN(255*sD.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WR;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TN.workingColorSpace;TN.fromWorkingColorSpace(sD.copy(this),t);var n,r,i=sD.r,a=sD.g,o=sD.b,s=Math.max(i,a,o),u=Math.min(i,a,o),c=(u+s)/2;if(u===s)n=0,r=0;else{var l=s-u;switch(r=c<=.5?l/(s+u):l/(2-s-u),s){case i:n=(a-o)/l+(a<o?6:0);break;case a:n=(o-i)/l+2;break;case o:n=(i-a)/l+4}n/=6}return e.h=n,e.s=r,e.l=c,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TN.workingColorSpace;return TN.fromWorkingColorSpace(sD.copy(this),t),e.r=sD.r,e.g=sD.g,e.b=sD.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WR;TN.fromWorkingColorSpace(sD.copy(this),e);var t=sD.r,n=sD.g,r=sD.b;return e!==WR?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(rD),this.setHSL(rD.h+e,rD.s+t,rD.l+n)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(rD),e.getHSL(iD);var n=hN(rD.h,iD.h,t),r=hN(rD.s,iD.s,t),i=hN(rD.l,iD.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:xt().mark((function e(){return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),sD=new oD;oD.NAMES=nD;var uD=0,cD=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(w(e),"id",{value:uD++}),e.uuid=uN(),e.name="",e.type="Material",e.blending=1,e.side=JI,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=$I,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new oD(0,0,0),e.blendAlpha=0,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=$R,e.stencilZFail=$R,e.stencilZPass=$R,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return g(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==JI&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==$I&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$R&&(n.stencilFail=this.stencilFail),this.stencilZFail!==$R&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==$R&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(iN),lD=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new oD(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new AP,r.combine=eR,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(cD);var hD=new zN,fD=new pN,dD=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(d(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=eN,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=AR,this.version=0}return g(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"updateRange",get:function(){return bN("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)fD.fromBufferAttribute(this,t),fD.applyMatrix3(e),this.setXY(t,fD.x,fD.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)hD.fromBufferAttribute(this,r),hD.applyMatrix3(e),this.setXYZ(r,hD.x,hD.y,hD.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)hD.fromBufferAttribute(this,t),hD.applyMatrix4(e),this.setXYZ(t,hD.x,hD.y,hD.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)hD.fromBufferAttribute(this,t),hD.applyNormalMatrix(e),this.setXYZ(t,hD.x,hD.y,hD.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)hD.fromBufferAttribute(this,t),hD.transformDirection(e),this.setXYZ(t,hD.x,hD.y,hD.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.itemSize+t];return this.normalized&&(n=fN(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=dN(n,this.array)),this.array[e*this.itemSize+t]=n,this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=fN(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=dN(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=fN(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=dN(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=fN(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=dN(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=fN(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=dN(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=dN(t,this.array),n=dN(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=dN(t,this.array),n=dN(n,this.array),r=dN(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=dN(t,this.array),n=dN(n,this.array),r=dN(r,this.array),i=dN(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==eN&&(e.usage=this.usage),e}}]),e}(),pD=function(e){_(n,e);var t=k(n);function n(e,r,i){return d(this,n),t.call(this,new Uint16Array(e),r,i)}return g(n)}(dD),vD=function(e){_(n,e);var t=k(n);function n(e,r,i){return d(this,n),t.call(this,new Uint32Array(e),r,i)}return g(n)}(dD),mD=function(e){_(n,e);var t=k(n);function n(e,r,i){return d(this,n),t.call(this,new Float32Array(e),r,i)}return g(n)}(dD),gD=0,yD=new gP,_D=new GP,bD=new zN,xD=new GN,wD=new GN,kD=new zN,SD=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(w(e),"id",{value:gD++}),e.uuid=uN(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return g(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(gN(e)?vD:pD)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new vN).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return yD.makeRotationFromQuaternion(e),this.applyMatrix4(yD),this}},{key:"rotateX",value:function(e){return yD.makeRotationX(e),this.applyMatrix4(yD),this}},{key:"rotateY",value:function(e){return yD.makeRotationY(e),this.applyMatrix4(yD),this}},{key:"rotateZ",value:function(e){return yD.makeRotationZ(e),this.applyMatrix4(yD),this}},{key:"translate",value:function(e,t,n){return yD.makeTranslation(e,t,n),this.applyMatrix4(yD),this}},{key:"scale",value:function(e,t,n){return yD.makeScale(e,t,n),this.applyMatrix4(yD),this}},{key:"lookAt",value:function(e){return _D.lookAt(e),_D.updateMatrix(),this.applyMatrix4(_D.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(bD).negate(),this.translate(bD.x,bD.y,bD.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new mD(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new GN);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new zN(-1/0,-1/0,-1/0),new zN(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];xD.setFromBufferAttribute(i),this.morphTargetsRelative?(kD.addVectors(this.boundingBox.min,xD.min),this.boundingBox.expandByPoint(kD),kD.addVectors(this.boundingBox.max,xD.max),this.boundingBox.expandByPoint(kD)):(this.boundingBox.expandByPoint(xD.min),this.boundingBox.expandByPoint(xD.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new uP);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new zN,1/0);if(e){var n=this.boundingSphere.center;if(xD.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];wD.setFromBufferAttribute(a),this.morphTargetsRelative?(kD.addVectors(xD.min,wD.min),xD.expandByPoint(kD),kD.addVectors(xD.max,wD.max),xD.expandByPoint(kD)):(xD.expandByPoint(wD.min),xD.expandByPoint(wD.max))}xD.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)kD.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(kD));if(t)for(var c=0,l=t.length;c<l;c++)for(var h=t[c],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)kD.fromBufferAttribute(h,d),f&&(bD.fromBufferAttribute(e,d),kD.add(bD)),o=Math.max(o,n.distanceToSquared(kD));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new dD(new Float32Array(4*n.count),4));for(var a=this.getAttribute("tangent"),o=[],s=[],u=0;u<n.count;u++)o[u]=new zN,s[u]=new zN;var c=new zN,l=new zN,h=new zN,f=new pN,d=new pN,p=new pN,v=new zN,m=new zN,g=this.groups;0===g.length&&(g=[{start:0,count:e.count}]);for(var y=0,_=g.length;y<_;++y)for(var b=g[y],x=b.start,w=x,k=x+b.count;w<k;w+=3)D(e.getX(w+0),e.getX(w+1),e.getX(w+2));for(var S=new zN,E=new zN,T=new zN,A=new zN,M=0,C=g.length;M<C;++M)for(var I=g[M],R=I.start,N=R,P=R+I.count;N<P;N+=3)L(e.getX(N+0)),L(e.getX(N+1)),L(e.getX(N+2))}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function D(e,t,r){c.fromBufferAttribute(n,e),l.fromBufferAttribute(n,t),h.fromBufferAttribute(n,r),f.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),l.sub(c),h.sub(c),d.sub(f),p.sub(f);var a=1/(d.x*p.y-p.x*d.y);isFinite(a)&&(v.copy(l).multiplyScalar(p.y).addScaledVector(h,-d.y).multiplyScalar(a),m.copy(h).multiplyScalar(d.x).addScaledVector(l,-p.x).multiplyScalar(a),o[e].add(v),o[t].add(v),o[r].add(v),s[e].add(m),s[t].add(m),s[r].add(m))}function L(e){T.fromBufferAttribute(r,e),A.copy(T);var t=o[e];S.copy(t),S.sub(T.multiplyScalar(T.dot(t))).normalize(),E.crossVectors(A,t);var n=E.dot(s[e])<0?-1:1;a.setXYZW(e,S.x,S.y,S.z,n)}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new dD(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new zN,o=new zN,s=new zN,u=new zN,c=new zN,l=new zN,h=new zN,f=new zN;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),u.add(h),c.add(h),l.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(g,l.x,l.y,l.z)}else for(var y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)kD.fromBufferAttribute(e,t),kD.normalize(),e.setXYZ(t,kD.x,kD.y,kD.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,c=t.length;u<c;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var l=0;l<r;l++)a[s++]=n[o++]}return new dD(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var c=[],l=s[u],h=0,f=l.length;h<f;h++){var d=e(l[h],r);c.push(d)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var c in this.morphAttributes){for(var l=this.morphAttributes[c],h=[],f=0,d=l.length;f<d;f++){var p=l[f];h.push(p.toJSON(e.data))}h.length>0&&(s[c]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],c=o[s],l=0,h=c.length;l<h;l++)u.push(c[l].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var v=f[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(iN),ED=new gP,TD=new mP,AD=new uP,MD=new zN,CD=new zN,ID=new zN,RD=new zN,ND=new zN,PD=new zN,DD=new pN,LD=new pN,OD=new pN,UD=new zN,FD=new zN,BD=new zN,VD=new zN,zD=new zN,jD=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SD,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lD;return d(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return g(n,[{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){PD.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var c=o[s],l=i[s];0!==c&&(ND.fromBufferAttribute(l,e),a?PD.addScaledVector(ND,c):PD.addScaledVector(ND.sub(t),c))}t.add(PD)}return t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),AD.copy(n.boundingSphere),AD.applyMatrix4(i),TD.copy(e.ray).recast(e.near),!1===AD.containsPoint(TD.origin)){if(null===TD.intersectSphere(AD,MD))return;if(TD.origin.distanceToSquared(MD)>Math.pow(e.far-e.near,2))return}ED.copy(i).invert(),TD.copy(e.ray).applyMatrix4(ED),null!==n.boundingBox&&!1===TD.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,TD)}}},{key:"_computeIntersections",value:function(e,t,n){var r,i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,u=i.attributes.uv,c=i.attributes.uv1,l=i.attributes.normal,h=i.groups,f=i.drawRange;if(null!==o)if(Array.isArray(a))for(var d=0,p=h.length;d<p;d++)for(var v=h[d],m=a[v.materialIndex],g=Math.max(v.start,f.start),y=Math.min(o.count,Math.min(v.start+v.count,f.start+f.count));g<y;g+=3){(r=HD(this,m,e,n,u,c,l,o.getX(g),o.getX(g+1),o.getX(g+2)))&&(r.faceIndex=Math.floor(g/3),r.face.materialIndex=v.materialIndex,t.push(r))}else for(var _=Math.max(0,f.start),b=Math.min(o.count,f.start+f.count);_<b;_+=3){(r=HD(this,a,e,n,u,c,l,o.getX(_),o.getX(_+1),o.getX(_+2)))&&(r.faceIndex=Math.floor(_/3),t.push(r))}else if(void 0!==s)if(Array.isArray(a))for(var x=0,w=h.length;x<w;x++)for(var k=h[x],S=a[k.materialIndex],E=Math.max(k.start,f.start),T=Math.min(s.count,Math.min(k.start+k.count,f.start+f.count));E<T;E+=3){(r=HD(this,S,e,n,u,c,l,E,E+1,E+2))&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=k.materialIndex,t.push(r))}else for(var A=Math.max(0,f.start),M=Math.min(s.count,f.start+f.count);A<M;A+=3){(r=HD(this,a,e,n,u,c,l,A,A+1,A+2))&&(r.faceIndex=Math.floor(A/3),t.push(r))}}}]),n}(GP);function HD(e,t,n,r,i,a,o,s,u,c){e.getVertexPosition(s,CD),e.getVertexPosition(u,ID),e.getVertexPosition(c,RD);var l=function(e,t,n,r,i,a,o,s){if(null===(t.side===ZI?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===JI,s)))return null;zD.copy(s),zD.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(zD);return u<n.near||u>n.far?null:{distance:u,point:zD.clone(),object:e}}(e,t,n,r,CD,ID,RD,VD);if(l){i&&(DD.fromBufferAttribute(i,s),LD.fromBufferAttribute(i,u),OD.fromBufferAttribute(i,c),l.uv=tD.getInterpolation(VD,CD,ID,RD,DD,LD,OD,new pN)),a&&(DD.fromBufferAttribute(a,s),LD.fromBufferAttribute(a,u),OD.fromBufferAttribute(a,c),l.uv1=tD.getInterpolation(VD,CD,ID,RD,DD,LD,OD,new pN)),o&&(UD.fromBufferAttribute(o,s),FD.fromBufferAttribute(o,u),BD.fromBufferAttribute(o,c),l.normal=tD.getInterpolation(VD,CD,ID,RD,UD,FD,BD,new zN),l.normal.dot(r.direction)>0&&l.normal.multiplyScalar(-1));var h={a:s,b:u,c:c,normal:new zN,materialIndex:0};tD.getNormal(CD,ID,RD,h.normal),l.face=h}return l}var GD=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;d(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var c=w(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var l=[],h=[],f=[],p=[],v=0,m=0;function g(e,t,n,r,i,a,o,s,u,d,g){for(var y=a/u,_=o/d,b=a/2,x=o/2,w=s/2,k=u+1,S=d+1,E=0,T=0,A=new zN,M=0;M<S;M++)for(var C=M*_-x,I=0;I<k;I++){var R=I*y-b;A[e]=R*r,A[t]=C*i,A[n]=w,h.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=s>0?1:-1,f.push(A.x,A.y,A.z),p.push(I/u),p.push(1-M/d),E+=1}for(var N=0;N<d;N++)for(var P=0;P<u;P++){var D=v+P+k*N,L=v+P+k*(N+1),O=v+(P+1)+k*(N+1),U=v+(P+1)+k*N;l.push(D,L,U),l.push(L,O,U),T+=6}c.addGroup(m,T,g),m+=T,v+=E}return g("z","y","x",-1,-1,a,i,r,u,s,0),g("z","y","x",1,-1,a,i,-r,u,s,1),g("x","z","y",1,1,r,a,i,o,u,2),g("x","z","y",1,-1,r,a,-i,o,u,3),g("x","y","z",1,-1,r,i,a,o,s,4),g("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(l),e.setAttribute("position",new mD(h,3)),e.setAttribute("normal",new mD(f,3)),e.setAttribute("uv",new mD(p,2)),e}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(SD);function WD(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function qD(e){for(var t={},n=0;n<e.length;n++){var r=WD(e[n]);for(var i in r)t[i]=r[i]}return t}function XD(e){var t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:TN.workingColorSpace}var KD={clone:WD,merge:qD},YD=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.forceSinglePass=!0,r.extensions={clipCullDistance:!1,multiDraw:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=WD(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=er(b(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(cD),QD=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new gP,e.projectionMatrix=new gP,e.projectionMatrixInverse=new gP,e.coordinateSystem=nN,e}return g(n,[{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return er(b(n.prototype),"getWorldDirection",this).call(this,e).negate()}},{key:"updateMatrixWorld",value:function(e){er(b(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){er(b(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(GP),JD=new zN,ZD=new pN,$D=new pN,eL=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return d(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return g(n,[{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*sN*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*oN*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*sN*Math.atan(Math.tan(.5*oN*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,t,n){JD.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(JD.x,JD.y).multiplyScalar(-e/JD.z),JD.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(JD.x,JD.y).multiplyScalar(-e/JD.z)}},{key:"getViewSize",value:function(e,t){return this.getViewBounds(e,ZD,$D),t.subVectors($D,ZD)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*oN*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=er(b(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(QD),tL=-90,nL=function(e){_(n,e);var t=k(n);function n(e,r,i){var a;d(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i,a.coordinateSystem=null,a.activeMipmapLevel=0;var o=new eL(tL,1,e,r);o.layers=a.layers,a.add(o);var s=new eL(tL,1,e,r);s.layers=a.layers,a.add(s);var u=new eL(tL,1,e,r);u.layers=a.layers,a.add(u);var c=new eL(tL,1,e,r);c.layers=a.layers,a.add(c);var l=new eL(tL,1,e,r);l.layers=a.layers,a.add(l);var h=new eL(tL,1,e,r);return h.layers=a.layers,a.add(h),a}return g(n,[{key:"updateCoordinateSystem",value:function(){var e,t=this.coordinateSystem,n=this.children.concat(),r=l(n,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],h=A(n);try{for(h.s();!(e=h.n()).done;){var f=e.value;this.remove(f)}}catch(m){h.e(m)}finally{h.f()}if(t===nN)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(t!==rN)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}var d,p=A(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;this.add(v),v.updateMatrixWorld()}}catch(m){p.e(m)}finally{p.f()}}},{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var i=l(this.children,6),a=i[0],o=i[1],s=i[2],u=i[3],c=i[4],h=i[5],f=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;var m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,a),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,r),e.render(t,h),e.setRenderTarget(f,d,p),e.xr.enabled=v,n.texture.needsPMREMUpdate=!0}}]),n}(GP),rL=function(e){_(n,e);var t=k(n);function n(e,r,i,a,o,s,u,c,l,h){var f;return d(this,n),e=void 0!==e?e:[],r=void 0!==r?r:hR,(f=t.call(this,e,r,i,a,o,s,u,c,l,h)).isCubeTexture=!0,f.flipY=!1,f}return g(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(DN),iL=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new rL(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:xR,e}return g(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new GD(5,5,5),o=new YD({name:"CubemapFromEquirect",uniforms:WD(n),vertexShader:r,fragmentShader:i,side:ZI,blending:0});o.uniforms.tEquirect.value=t;var s=new jD(a,o),u=t.minFilter;return t.minFilter===kR&&(t.minFilter=xR),new nL(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(UN),aL=new zN,oL=new zN,sL=new vN,uL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zN(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return g(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=aL.subVectors(n,t).cross(oL.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(aL),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||sL.getNormalMatrix(e),r=this.coplanarPoint(aL).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),cL=new uP,lL=new zN,hL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uL,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new uL,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new uL,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new uL;d(this,e),this.planes=[t,n,r,i,a,o]}return g(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nN,n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],d=r[9],p=r[10],v=r[11],m=r[12],g=r[13],y=r[14],_=r[15];if(n[0].setComponents(s-i,h-u,v-f,_-m).normalize(),n[1].setComponents(s+i,h+u,v+f,_+m).normalize(),n[2].setComponents(s+a,h+c,v+d,_+g).normalize(),n[3].setComponents(s-a,h-c,v-d,_-g).normalize(),n[4].setComponents(s-o,h-l,v-p,_-y).normalize(),t===nN)n[5].setComponents(s+o,h+l,v+p,_+y).normalize();else{if(t!==rN)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,l,p,y).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),cL.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),cL.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(cL)}},{key:"intersectsSprite",value:function(e){return cL.center.set(0,0,0),cL.radius=.7071067811865476,cL.applyMatrix4(e.matrixWorld),this.intersectsSphere(cL)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(lL.x=r.normal.x>0?e.max.x:e.min.x,lL.y=r.normal.y>0?e.max.y:e.min.y,lL.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(lL)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function fL(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function dL(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isGLBufferAttribute){var i=t.get(n);(!i||i.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version})}else{n.isInterleavedBufferAttribute&&(n=n.data);var a=t.get(n);if(void 0===a)t.set(n,function(t,n){var r,i=t.array,a=t.usage,o=i.byteLength,s=e.createBuffer();if(e.bindBuffer(n,s),e.bufferData(n,i,a),t.onUploadCallback(),i instanceof Float32Array)r=e.FLOAT;else if(i instanceof Uint16Array)r=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)r=e.SHORT;else if(i instanceof Uint32Array)r=e.UNSIGNED_INT;else if(i instanceof Int32Array)r=e.INT;else if(i instanceof Int8Array)r=e.BYTE;else if(i instanceof Uint8Array)r=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);r=e.UNSIGNED_BYTE}return{buffer:s,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,r));else if(a.version<n.version){if(a.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){var i=n.array,a=n._updateRange,o=n.updateRanges;if(e.bindBuffer(r,t),-1===a.count&&0===o.length&&e.bufferSubData(r,0,i),0!==o.length){for(var s=0,u=o.length;s<u;s++){var c=o[s];e.bufferSubData(r,c.start*i.BYTES_PER_ELEMENT,i,c.start,c.count)}n.clearUpdateRanges()}-1!==a.count&&(e.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i,a.offset,a.count),a.count=-1),n.onUploadCallback()}(a.buffer,n,r),a.version=n.version}}}}}var pL=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,c=Math.floor(a),l=Math.floor(o),h=c+1,f=l+1,p=r/c,v=i/l,m=[],g=[],y=[],_=[],b=0;b<f;b++)for(var x=b*v-u,w=0;w<h;w++){var k=w*p-s;g.push(k,-x,0),y.push(0,0,1),_.push(w/c),_.push(1-b/l)}for(var S=0;S<l;S++)for(var E=0;E<c;E++){var T=E+h*S,A=E+h*(S+1),M=E+1+h*(S+1),C=E+1+h*S;m.push(T,A,C),m.push(A,M,C)}return e.setIndex(m),e.setAttribute("position",new mD(g,3)),e.setAttribute("normal",new mD(y,3)),e.setAttribute("uv",new mD(_,2)),e}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(SD),vL={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},mL={common:{diffuse:{value:new oD(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vN},alphaMap:{value:null},alphaMapTransform:{value:new vN},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vN}},envmap:{envMap:{value:null},envMapRotation:{value:new vN},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vN}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vN}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vN},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vN},normalScale:{value:new pN(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vN},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vN}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vN}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vN}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oD(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new oD(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vN},alphaTest:{value:0},uvTransform:{value:new vN}},sprite:{diffuse:{value:new oD(16777215)},opacity:{value:1},center:{value:new pN(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vN},alphaMap:{value:null},alphaMapTransform:{value:new vN},alphaTest:{value:0}}},gL={basic:{uniforms:qD([mL.common,mL.specularmap,mL.envmap,mL.aomap,mL.lightmap,mL.fog]),vertexShader:vL.meshbasic_vert,fragmentShader:vL.meshbasic_frag},lambert:{uniforms:qD([mL.common,mL.specularmap,mL.envmap,mL.aomap,mL.lightmap,mL.emissivemap,mL.bumpmap,mL.normalmap,mL.displacementmap,mL.fog,mL.lights,{emissive:{value:new oD(0)}}]),vertexShader:vL.meshlambert_vert,fragmentShader:vL.meshlambert_frag},phong:{uniforms:qD([mL.common,mL.specularmap,mL.envmap,mL.aomap,mL.lightmap,mL.emissivemap,mL.bumpmap,mL.normalmap,mL.displacementmap,mL.fog,mL.lights,{emissive:{value:new oD(0)},specular:{value:new oD(1118481)},shininess:{value:30}}]),vertexShader:vL.meshphong_vert,fragmentShader:vL.meshphong_frag},standard:{uniforms:qD([mL.common,mL.envmap,mL.aomap,mL.lightmap,mL.emissivemap,mL.bumpmap,mL.normalmap,mL.displacementmap,mL.roughnessmap,mL.metalnessmap,mL.fog,mL.lights,{emissive:{value:new oD(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vL.meshphysical_vert,fragmentShader:vL.meshphysical_frag},toon:{uniforms:qD([mL.common,mL.aomap,mL.lightmap,mL.emissivemap,mL.bumpmap,mL.normalmap,mL.displacementmap,mL.gradientmap,mL.fog,mL.lights,{emissive:{value:new oD(0)}}]),vertexShader:vL.meshtoon_vert,fragmentShader:vL.meshtoon_frag},matcap:{uniforms:qD([mL.common,mL.bumpmap,mL.normalmap,mL.displacementmap,mL.fog,{matcap:{value:null}}]),vertexShader:vL.meshmatcap_vert,fragmentShader:vL.meshmatcap_frag},points:{uniforms:qD([mL.points,mL.fog]),vertexShader:vL.points_vert,fragmentShader:vL.points_frag},dashed:{uniforms:qD([mL.common,mL.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vL.linedashed_vert,fragmentShader:vL.linedashed_frag},depth:{uniforms:qD([mL.common,mL.displacementmap]),vertexShader:vL.depth_vert,fragmentShader:vL.depth_frag},normal:{uniforms:qD([mL.common,mL.bumpmap,mL.normalmap,mL.displacementmap,{opacity:{value:1}}]),vertexShader:vL.meshnormal_vert,fragmentShader:vL.meshnormal_frag},sprite:{uniforms:qD([mL.sprite,mL.fog]),vertexShader:vL.sprite_vert,fragmentShader:vL.sprite_frag},background:{uniforms:{uvTransform:{value:new vN},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:vL.background_vert,fragmentShader:vL.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vN}},vertexShader:vL.backgroundCube_vert,fragmentShader:vL.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vL.cube_vert,fragmentShader:vL.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vL.equirect_vert,fragmentShader:vL.equirect_frag},distanceRGBA:{uniforms:qD([mL.common,mL.displacementmap,{referencePosition:{value:new zN},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vL.distanceRGBA_vert,fragmentShader:vL.distanceRGBA_frag},shadow:{uniforms:qD([mL.lights,mL.fog,{color:{value:new oD(0)},opacity:{value:1}}]),vertexShader:vL.shadow_vert,fragmentShader:vL.shadow_frag}};gL.physical={uniforms:qD([gL.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vN},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vN},clearcoatNormalScale:{value:new pN(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vN},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vN},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vN},sheen:{value:0},sheenColor:{value:new oD(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vN},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vN},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vN},transmissionSamplerSize:{value:new pN},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vN},attenuationDistance:{value:0},attenuationColor:{value:new oD(0)},specularColor:{value:new oD(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vN},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vN},anisotropyVector:{value:new pN},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vN}}]),vertexShader:vL.meshphysical_vert,fragmentShader:vL.meshphysical_frag};var yL={r:0,b:0,g:0},_L=new AP,bL=new gP;function xL(e,t,n,r,i,a,o){var s,u,c=new oD(0),l=!0===a?0:1,h=null,f=0,d=null;function p(e){var r=!0===e.isScene?e.background:null;r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r));return r}function v(t,n){t.getRGB(yL,XD(e)),r.buffers.color.setClear(yL.r,yL.g,yL.b,n,o)}return{getClearColor:function(){return c},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c.set(e),v(c,l=t)},getClearAlpha:function(){return l},setClearAlpha:function(e){v(c,l=e)},render:function(t){var n=!1,i=p(t);null===i?v(c,l):i&&i.isColor&&(v(i,1),n=!0);var a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||n)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)},addToRenderList:function(t,n){var r=p(n);r&&(r.isCubeTexture||r.mapping===vR)?(void 0===u&&((u=new jD(new GD(1,1,1),new YD({name:"BackgroundCubeMaterial",uniforms:WD(gL.backgroundCube.uniforms),vertexShader:gL.backgroundCube.vertexShader,fragmentShader:gL.backgroundCube.fragmentShader,side:ZI,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),_L.copy(n.backgroundRotation),_L.x*=-1,_L.y*=-1,_L.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(_L.y*=-1,_L.z*=-1),u.material.uniforms.envMap.value=r,u.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(bL.makeRotationFromEuler(_L)),u.material.toneMapped=TN.getTransfer(r.colorSpace)!==QR,h===r&&f===r.version&&d===e.toneMapping||(u.material.needsUpdate=!0,h=r,f=r.version,d=e.toneMapping),u.layers.enableAll(),t.unshift(u,u.geometry,u.material,0,0,null)):r&&r.isTexture&&(void 0===s&&((s=new jD(new pL(2,2),new YD({name:"BackgroundMaterial",uniforms:WD(gL.background.uniforms),vertexShader:gL.background.vertexShader,fragmentShader:gL.background.fragmentShader,side:JI,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=r,s.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,s.material.toneMapped=TN.getTransfer(r.colorSpace)!==QR,!0===r.matrixAutoUpdate&&r.updateMatrix(),s.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&f===r.version&&d===e.toneMapping||(s.material.needsUpdate=!0,h=r,f=r.version,d=e.toneMapping),s.layers.enableAll(),t.unshift(s,s.geometry,s.material,0,0,null))}}}function wL(e,t){var n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=c(null),a=i,o=!1;function s(t){return e.bindVertexArray(t)}function u(t){return e.deleteVertexArray(t)}function c(e){for(var t=[],r=[],i=[],a=0;a<n;a++)t[a]=0,r[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function l(){for(var e=a.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function h(e){f(e,0)}function f(t,n){var r=a.newAttributes,i=a.enabledAttributes,o=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function d(){for(var t=a.newAttributes,n=a.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function p(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function v(){m(),o=!0,a!==i&&s((a=i).object)}function m(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,u,v,m){var g,y=function(t,n,i){var a=!0===i.wireframe,o=r[t.id];void 0===o&&(o={},r[t.id]=o);var s=o[n.id];void 0===s&&(s={},o[n.id]=s);var u=s[a];void 0===u&&(u=c(e.createVertexArray()),s[a]=u);return u}(v,u,i);a!==y&&s((a=y).object),(g=function(e,t,n,r){var i=a.attributes,o=t.attributes,s=0,u=n.getAttributes();for(var c in u){if(u[c].location>=0){var l=i[c],h=o[c];if(void 0===h&&("instanceMatrix"===c&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===c&&e.instanceColor&&(h=e.instanceColor)),void 0===l)return!0;if(l.attribute!==h)return!0;if(h&&l.data!==h.data)return!0;s++}}return a.attributesNum!==s||a.index!==r}(n,v,u,m))&&function(e,t,n,r){var i={},o=t.attributes,s=0,u=n.getAttributes();for(var c in u){if(u[c].location>=0){var l=o[c];void 0===l&&("instanceMatrix"===c&&e.instanceMatrix&&(l=e.instanceMatrix),"instanceColor"===c&&e.instanceColor&&(l=e.instanceColor));var h={};h.attribute=l,l&&l.data&&(h.data=l.data),i[c]=h,s++}}a.attributes=i,a.attributesNum=s,a.index=r}(n,v,u,m),null!==m&&t.update(m,e.ELEMENT_ARRAY_BUFFER),(g||o)&&(o=!1,function(n,r,i,a){l();var o=a.attributes,s=i.getAttributes(),u=r.defaultAttributeValues;for(var c in s){var v=s[c];if(v.location>=0){var m=o[c];if(void 0===m&&("instanceMatrix"===c&&n.instanceMatrix&&(m=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(m=n.instanceColor)),void 0!==m){var g=m.normalized,y=m.itemSize,_=t.get(m);if(void 0===_)continue;var b=_.buffer,x=_.type,w=_.bytesPerElement,k=x===e.INT||x===e.UNSIGNED_INT||m.gpuType===ER;if(m.isInterleavedBufferAttribute){var S=m.data,E=S.stride,T=m.offset;if(S.isInstancedInterleavedBuffer){for(var A=0;A<v.locationSize;A++)f(v.location+A,S.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=S.meshPerAttribute*S.count)}else for(var M=0;M<v.locationSize;M++)h(v.location+M);e.bindBuffer(e.ARRAY_BUFFER,b);for(var C=0;C<v.locationSize;C++)p(v.location+C,y/v.locationSize,x,g,E*w,(T+y/v.locationSize*C)*w,k)}else{if(m.isInstancedBufferAttribute){for(var I=0;I<v.locationSize;I++)f(v.location+I,m.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=m.meshPerAttribute*m.count)}else for(var R=0;R<v.locationSize;R++)h(v.location+R);e.bindBuffer(e.ARRAY_BUFFER,b);for(var N=0;N<v.locationSize;N++)p(v.location+N,y/v.locationSize,x,g,y*w,y/v.locationSize*N*w,k)}}else if(void 0!==u){var P=u[c];if(void 0!==P)switch(P.length){case 2:e.vertexAttrib2fv(v.location,P);break;case 3:e.vertexAttrib3fv(v.location,P);break;case 4:e.vertexAttrib4fv(v.location,P);break;default:e.vertexAttrib1fv(v.location,P)}}}}d()}(n,i,u,v),null!==m&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(m).buffer))},reset:v,resetDefaultState:m,dispose:function(){for(var e in v(),r){var t=r[e];for(var n in t){var i=t[n];for(var a in i)u(i[a].object),delete i[a];delete t[n]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0!==r[e.id]){var t=r[e.id];for(var n in t){var i=t[n];for(var a in i)u(i[a].object),delete i[a];delete t[n]}delete r[e.id]}},releaseStatesOfProgram:function(e){for(var t in r){var n=r[t];if(void 0!==n[e.id]){var i=n[e.id];for(var a in i)u(i[a].object),delete i[a];delete n[e.id]}}},initAttributes:l,enableAttribute:h,disableUnusedAttributes:d}}function kL(e,t,n){var r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0!==a){var o=t.get("WEBGL_multi_draw");if(null===o)for(var s=0;s<a;s++)this.render(e[s],i[s]);else{o.multiDrawArraysWEBGL(r,e,0,i,0,a);for(var u=0,c=0;c<a;c++)u+=i[c];n.update(u,r,1)}}},this.renderMultiDrawInstances=function(e,a,o,s){if(0!==o){var u=t.get("WEBGL_multi_draw");if(null===u)for(var c=0;c<e.length;c++)i(e[c],a[c],s[c]);else{u.multiDrawArraysInstancedWEBGL(r,e,0,a,0,s,0,o);for(var l=0,h=0;h<o;h++)l+=a[h];for(var f=0;f<s.length;f++)n.update(l,r,s[f])}}}}function SL(e,t,n,r){var i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return t===IR||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){var i=n===MR&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==SR&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==AR&&!i)},precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:l>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function EL(e){var t=this,n=null,r=0,i=!1,a=!1,o=new uL,s=new vN,u={value:null,needsUpdate:!1};function c(e,n,r,i){var a=null!==e?e.length:0,c=null;if(0!==a){if(c=u.value,!0!==i||null===c){var l=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(c,d),c[d+3]=o.constant}u.value=c,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(o,s,l){var h=o.clippingPlanes,f=o.clipIntersection,d=o.clipShadows,p=e.get(o);if(!i||null===h||0===h.length||a&&!d)a?c(null):function(){u.value!==n&&(u.value=n,u.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(h,s,m,l);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function TL(e){var t=new WeakMap;function n(e,t){return t===dR?e.mapping=hR:t===pR&&(e.mapping=fR),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping;if(a===dR||a===pR){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new iL(o.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var AL=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return d(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return g(n,[{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=er(b(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(QD),ML=[.125,.215,.35,.446,.526,.582],CL=20,IL=new AL,RL=new oD,NL=null,PL=0,DL=0,LL=!1,OL=(1+Math.sqrt(5))/2,UL=1/OL,FL=[new zN(-OL,UL,0),new zN(OL,UL,0),new zN(-UL,0,OL),new zN(UL,0,OL),new zN(0,OL,-UL),new zN(0,OL,UL),new zN(-1,1,-1),new zN(1,1,-1),new zN(-1,1,1),new zN(1,1,1)],BL=function(){function e(t){d(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return g(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;NL=this._renderer.getRenderTarget(),PL=this._renderer.getActiveCubeFace(),DL=this._renderer.getActiveMipmapLevel(),LL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=HL(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=jL(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(NL,PL,DL),this._renderer.xr.enabled=LL,e.scissorTest=!1,zL(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===hR||e.mapping===fR?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),NL=this._renderer.getRenderTarget(),PL=this._renderer.getActiveCubeFace(),DL=this._renderer.getActiveMipmapLevel(),LL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:xR,minFilter:xR,generateMipmaps:!1,type:MR,format:IR,colorSpace:qR,depthBuffer:!1},r=VL(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=VL(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+ML.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var u=1/s;o>e-4?u=ML[o-e+4-1]:0===o&&(u=0),r.push(u);for(var c=1/(s-2),l=-c,h=1+c,f=[l,l,h,l,h,h,l,l,h,h,l,h],d=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*d),_=new Float32Array(m*p*d),b=new Float32Array(g*p*d),x=0;x<d;x++){var w=x%3*2/3-1,k=x>2?0:-1,S=[w,k,0,w+2/3,k,0,w+2/3,k+1,0,w,k,0,w+2/3,k+1,0,w,k+1,0];y.set(S,v*p*x),_.set(f,m*p*x);var E=[x,x,x,x,x,x];b.set(E,g*p*x)}var T=new SD;T.setAttribute("position",new dD(y,v)),T.setAttribute("uv",new dD(_,m)),T.setAttribute("faceIndex",new dD(b,g)),t.push(T),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(CL),i=new zN(0,1,0),a=new YD({name:"SphericalGaussianBlur",defines:{n:CL,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new jD(this._lodPlanes[0],e);this._renderer.compile(t,IL)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new eL(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,c=s.toneMapping;s.getClearColor(RL),s.toneMapping=rR,s.autoClear=!1;var l=new lD({name:"PMREM.Background",side:ZI,depthWrite:!1,depthTest:!1}),h=new jD(new GD,l),f=!1,d=e.background;d?d.isColor&&(l.color.copy(d),e.background=null,f=!0):(l.color.copy(RL),f=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var m=this._cubeSize;zL(r,v*m,p>2?m:0,m,m),s.setRenderTarget(r),f&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===hR||e.mapping===fR;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=HL()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=jL());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new jD(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;zL(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,IL)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=this._lodPlanes.length,i=1;i<r;i++){var a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=FL[(r-i-1)%FL.length];this._blur(e,i-1,i,a,o)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new jD(this._lodPlanes[r],u),l=u.uniforms,h=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):CL;p>CL&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(CL));for(var v=[],m=0,g=0;g<CL;++g){var y=g/d,_=Math.exp(-y*y/2);v.push(_),0===g?m+=_:g<p&&(m+=2*_)}for(var b=0;b<v.length;b++)v[b]=v[b]/m;l.envMap.value=e.texture,l.samples.value=p,l.weights.value=v,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o);var x=this._lodMax;l.dTheta.value=f,l.mipInt.value=x-n;var w=this._sizeLods[r];zL(t,3*w*(r>x-4?r-x+4:0),4*(this._cubeSize-w),3*w,2*w),s.setRenderTarget(t),s.render(c,IL)}}]),e}();function VL(e,t,n){var r=new UN(e,t,n);return r.texture.mapping=vR,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function zL(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function jL(){return new YD({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function HL(){return new YD({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function GL(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===dR||a===pR,s=a===hR||a===fR;if(o||s){var u=t.get(i),c=void 0!==u?u.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==c)return null===n&&(n=new BL(e)),(u=o?n.fromEquirectangular(i,u):n.fromCubemap(i,u)).texture.pmremVersion=i.pmremVersion,t.set(i,u),u.texture;if(void 0!==u)return u.texture;var l=i.image;return o&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new BL(e)),(u=o?n.fromEquirectangular(i):n.fromCubemap(i)).texture.pmremVersion=i.pmremVersion,t.set(i,u),i.addEventListener("dispose",r),u.texture):null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function WL(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function qL(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);for(var c in s.morphAttributes)for(var l=s.morphAttributes[c],h=0,f=l.length;h<f;h++)t.remove(l[h]);s.removeEventListener("dispose",o),delete i[s.id];var d=a.get(s);d&&(t.remove(d),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],h=s[u+1],f=s[u+2];n.push(l,h,h,f,f,l)}}else{if(void 0===i)return;var d=i.array;o=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(gN(n)?vD:pD)(n,1);_.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,_)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){var r=n.attributes;for(var i in r)t.update(r[i],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,c=s.length;u<c;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function XL(e,t,n){var r,i,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(r,o,i,t*a,s),n.update(o,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,o,s){if(0!==s){var u=t.get("WEBGL_multi_draw");if(null===u)for(var c=0;c<s;c++)this.render(e[c]/a,o[c]);else{u.multiDrawElementsWEBGL(r,o,0,i,e,0,s);for(var l=0,h=0;h<s;h++)l+=o[h];n.update(l,r,1)}}},this.renderMultiDrawInstances=function(e,s,u,c){if(0!==u){var l=t.get("WEBGL_multi_draw");if(null===l)for(var h=0;h<e.length;h++)o(e[h]/a,s[h],c[h]);else{l.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,c,0,u);for(var f=0,d=0;d<u;d++)f+=s[d];for(var p=0;p<c.length;p++)n.update(f,r,c[p])}}}}function KL(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function YL(e,t,n){var r=new WeakMap,i=new LN;return{update:function(a,o,s){var u=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,l=void 0!==c?c.length:0,h=r.get(o);if(void 0===h||h.count!==l){void 0!==h&&h.texture.dispose();var f=void 0!==o.morphAttributes.position,d=void 0!==o.morphAttributes.normal,p=void 0!==o.morphAttributes.color,v=o.morphAttributes.position||[],m=o.morphAttributes.normal||[],g=o.morphAttributes.color||[],y=0;!0===f&&(y=1),!0===d&&(y=2),!0===p&&(y=3);var _=o.attributes.position.count*y,b=1;_>t.maxTextureSize&&(b=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);var x=new Float32Array(_*b*4*l),w=new FN(x,_,b,l);w.type=AR,w.needsUpdate=!0;for(var k=4*y,S=0;S<l;S++)for(var E=v[S],T=m[S],A=g[S],M=_*b*4*S,C=0;C<E.count;C++){var I=C*k;!0===f&&(i.fromBufferAttribute(E,C),x[M+I+0]=i.x,x[M+I+1]=i.y,x[M+I+2]=i.z,x[M+I+3]=0),!0===d&&(i.fromBufferAttribute(T,C),x[M+I+4]=i.x,x[M+I+5]=i.y,x[M+I+6]=i.z,x[M+I+7]=0),!0===p&&(i.fromBufferAttribute(A,C),x[M+I+8]=i.x,x[M+I+9]=i.y,x[M+I+10]=i.z,x[M+I+11]=4===A.itemSize?i.w:1)}h={count:l,texture:w,size:new pN(_,b)},r.set(o,h),o.addEventListener("dispose",(function e(){w.dispose(),r.delete(o),o.removeEventListener("dispose",e)}))}if(!0===a.isInstancedMesh&&null!==a.morphTexture)s.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{for(var R=0,N=0;N<u.length;N++)R+=u[N];var P=o.morphTargetsRelative?1:1-R;s.getUniforms().setValue(e,"morphTargetBaseInfluence",P),s.getUniforms().setValue(e,"morphTargetInfluences",u)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function QL(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){var s=r.render.frame,u=o.geometry,c=t.get(o,u);if(i.get(c)!==s&&(t.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){var l=o.skeleton;i.get(l)!==s&&(l.update(),i.set(l,s))}return c},dispose:function(){i=new WeakMap}}}var JL=function(e){_(n,e);var t=k(n);function n(e,r,i,a,o,s,u,c,l,h){var f;if(d(this,n),(h=void 0!==h?h:RR)!==RR&&h!==NR)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&h===RR&&(i=TR),void 0===i&&h===NR&&(i=CR),(f=t.call(this,null,a,o,s,u,c,h,i,l)).isDepthTexture=!0,f.image={width:e,height:r},f.magFilter=void 0!==u?u:_R,f.minFilter=void 0!==c?c:_R,f.flipY=!1,f.generateMipmaps=!1,f.compareFunction=null,f}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var t=er(b(n.prototype),"toJSON",this).call(this,e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}]),n}(DN),ZL=new DN,$L=new JL(1,1);$L.compareFunction=515;var eO=new FN,tO=new BN,nO=new rL,rO=[],iO=[],aO=new Float32Array(16),oO=new Float32Array(9),sO=new Float32Array(4);function uO(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=rO[i];if(void 0===a&&(a=new Float32Array(i),rO[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function cO(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function lO(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function hO(e,t){var n=iO[t];void 0===n&&(n=new Int32Array(t),iO[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function fO(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function dO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(cO(n,t))return;e.uniform2fv(this.addr,t),lO(n,t)}}function pO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(cO(n,t))return;e.uniform3fv(this.addr,t),lO(n,t)}}function vO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(cO(n,t))return;e.uniform4fv(this.addr,t),lO(n,t)}}function mO(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(cO(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),lO(n,t)}else{if(cO(n,r))return;sO.set(r),e.uniformMatrix2fv(this.addr,!1,sO),lO(n,r)}}function gO(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(cO(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),lO(n,t)}else{if(cO(n,r))return;oO.set(r),e.uniformMatrix3fv(this.addr,!1,oO),lO(n,r)}}function yO(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(cO(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),lO(n,t)}else{if(cO(n,r))return;aO.set(r),e.uniformMatrix4fv(this.addr,!1,aO),lO(n,r)}}function _O(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function bO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(cO(n,t))return;e.uniform2iv(this.addr,t),lO(n,t)}}function xO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(cO(n,t))return;e.uniform3iv(this.addr,t),lO(n,t)}}function wO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(cO(n,t))return;e.uniform4iv(this.addr,t),lO(n,t)}}function kO(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function SO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(cO(n,t))return;e.uniform2uiv(this.addr,t),lO(n,t)}}function EO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(cO(n,t))return;e.uniform3uiv(this.addr,t),lO(n,t)}}function TO(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(cO(n,t))return;e.uniform4uiv(this.addr,t),lO(n,t)}}function AO(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);var a=this.type===e.SAMPLER_2D_SHADOW?$L:ZL;n.setTexture2D(t||a,i)}function MO(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||tO,i)}function CO(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||nO,i)}function IO(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||eO,i)}function RO(e,t){e.uniform1fv(this.addr,t)}function NO(e,t){var n=uO(t,this.size,2);e.uniform2fv(this.addr,n)}function PO(e,t){var n=uO(t,this.size,3);e.uniform3fv(this.addr,n)}function DO(e,t){var n=uO(t,this.size,4);e.uniform4fv(this.addr,n)}function LO(e,t){var n=uO(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function OO(e,t){var n=uO(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function UO(e,t){var n=uO(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function FO(e,t){e.uniform1iv(this.addr,t)}function BO(e,t){e.uniform2iv(this.addr,t)}function VO(e,t){e.uniform3iv(this.addr,t)}function zO(e,t){e.uniform4iv(this.addr,t)}function jO(e,t){e.uniform1uiv(this.addr,t)}function HO(e,t){e.uniform2uiv(this.addr,t)}function GO(e,t){e.uniform3uiv(this.addr,t)}function WO(e,t){e.uniform4uiv(this.addr,t)}function qO(e,t,n){var r=this.cache,i=t.length,a=hO(n,i);cO(r,a)||(e.uniform1iv(this.addr,a),lO(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||ZL,a[o])}function XO(e,t,n){var r=this.cache,i=t.length,a=hO(n,i);cO(r,a)||(e.uniform1iv(this.addr,a),lO(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||tO,a[o])}function KO(e,t,n){var r=this.cache,i=t.length,a=hO(n,i);cO(r,a)||(e.uniform1iv(this.addr,a),lO(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||nO,a[o])}function YO(e,t,n){var r=this.cache,i=t.length,a=hO(n,i);cO(r,a)||(e.uniform1iv(this.addr,a),lO(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||eO,a[o])}var QO=g((function e(t,n,r){d(this,e),this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=function(e){switch(e){case 5126:return fO;case 35664:return dO;case 35665:return pO;case 35666:return vO;case 35674:return mO;case 35675:return gO;case 35676:return yO;case 5124:case 35670:return _O;case 35667:case 35671:return bO;case 35668:case 35672:return xO;case 35669:case 35673:return wO;case 5125:return kO;case 36294:return SO;case 36295:return EO;case 36296:return TO;case 35678:case 36198:case 36298:case 36306:case 35682:return AO;case 35679:case 36299:case 36307:return MO;case 35680:case 36300:case 36308:case 36293:return CO;case 36289:case 36303:case 36311:case 36292:return IO}}(n.type)})),JO=g((function e(t,n,r){d(this,e),this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function(e){switch(e){case 5126:return RO;case 35664:return NO;case 35665:return PO;case 35666:return DO;case 35674:return LO;case 35675:return OO;case 35676:return UO;case 5124:case 35670:return FO;case 35667:case 35671:return BO;case 35668:case 35672:return VO;case 35669:case 35673:return zO;case 5125:return jO;case 36294:return HO;case 36295:return GO;case 36296:return WO;case 35678:case 36198:case 36298:case 36306:case 35682:return qO;case 35679:case 36299:case 36307:return XO;case 35680:case 36300:case 36308:case 36293:return KO;case 36289:case 36303:case 36311:case 36292:return YO}}(n.type)})),ZO=function(){function e(t){d(this,e),this.id=t,this.seq=[],this.map={}}return g(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),$O=/(\w+)(\])?(\[|\.)?/g;function eU(e,t){e.seq.push(t),e.map[t.id]=t}function tU(e,t,n){var r=e.name,i=r.length;for($O.lastIndex=0;;){var a=$O.exec(r),o=$O.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u&&(s|=0),void 0===c||"["===c&&o+2===i){eU(n,void 0===c?new QO(s,e,t):new JO(s,e,t));break}var l=n.map[s];void 0===l&&eU(n,l=new ZO(s)),n=l}}var nU=function(){function e(t,n){d(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=t.getActiveUniform(n,i);tU(a,t.getUniformLocation(n,a.name),this)}}return g(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function rU(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var iU=37297,aU=0;function oU(e,t,n){var r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function sU(e,t){var n=function(e){var t,n=TN.getPrimaries(TN.workingColorSpace),r=TN.getPrimaries(e);switch(n===r?t="":n===ZR&&r===JR?t="LinearDisplayP3ToLinearSRGB":n===JR&&r===ZR&&(t="LinearSRGBToLinearDisplayP3"),e){case qR:case KR:return[t,"LinearTransferOETF"];case WR:case XR:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[t,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function uU(e,t){var n;switch(t){case iR:n="Linear";break;case aR:n="Reinhard";break;case oR:n="OptimizedCineon";break;case sR:n="ACESFilmic";break;case cR:n="AgX";break;case lR:n="Neutral";break;case uR:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function cU(e){return""!==e}function lU(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function hU(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var fU=/^[ \t]*#include +<([\w\d./]+)>/gm;function dU(e){return e.replace(fU,vU)}var pU=new Map;function vU(e,t){var n=vL[t];if(void 0===n){var r=pU.get(t);if(void 0===r)throw new Error("Can not resolve #include <"+t+">");n=vL[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r)}return dU(n)}var mU=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gU(e){return e.replace(mU,yU)}function yU(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function _U(e){var t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function bU(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,c=n.fragmentShader,l=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===KI?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===YI?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===QI&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case hR:case fR:t="ENVMAP_TYPE_CUBE";break;case vR:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),f=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===fR&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case eR:t="ENVMAP_BLENDING_MULTIPLY";break;case tR:t="ENVMAP_BLENDING_MIX";break;case nR:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cU).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(cU).join("\n")).length>0&&(i+="\n"),(a=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(cU).join("\n")).length>0&&(a+="\n")):(i=[_U(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(cU).join("\n"),a=[_U(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==rR?"#define TONE_MAPPING":"",n.toneMapping!==rR?vL.tonemapping_pars_fragment:"",n.toneMapping!==rR?uU("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",vL.colorspace_pars_fragment,sU("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(cU).join("\n")),u=hU(u=lU(u=dU(u),n),n),c=hU(c=lU(c=dU(c),n),n),u=gU(u),c=gU(c),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=[v,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===tN?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,b,x=y+i+u,w=y+a+c,k=rU(o,o.VERTEX_SHADER,x),S=rU(o,o.FRAGMENT_SHADER,w);function E(t){if(e.debug.checkShaderErrors){var n=o.getProgramInfoLog(g).trim(),r=o.getShaderInfoLog(k).trim(),s=o.getShaderInfoLog(S).trim(),u=!0,c=!0;if(!1===o.getProgramParameter(g,o.LINK_STATUS))if(u=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(o,g,k,S);else{var l=oU(o,k,"vertex"),h=oU(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,o.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+l+"\n"+h)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==s||(c=!1);c&&(t.diagnostics={runnable:u,programLog:n,vertexShader:{log:r,prefix:i},fragmentShader:{log:s,prefix:a}})}o.deleteShader(k),o.deleteShader(S),_=new nU(o,g),b=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;a.type===e.FLOAT_MAT2&&(s=2),a.type===e.FLOAT_MAT3&&(s=3),a.type===e.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)}o.attachShader(g,k),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),this.getUniforms=function(){return void 0===_&&E(this),_},this.getAttributes=function(){return void 0===b&&E(this),b};var T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=o.getProgramParameter(g,iU)),T},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=aU++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=k,this.fragmentShader=S,this}var xU=0,wU=function(){function e(){d(this,e),this.shaderCache=new Map,this.materialCache=new Map}return g(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=A(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(i){n.e(i)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new kU(e),t.set(e,n)),n}}]),e}(),kU=g((function e(t){d(this,e),this.id=xU++,this.code=t,this.usedTimes=0}));function SU(e,t,n,r,i,a,o){var s=new MP,u=new wU,c=new Set,l=[],h=i.logarithmicDepthBuffer,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(a,s,l,m,g){var y=m.fog,_=g.geometry,b=a.isMeshStandardMaterial?m.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),w=x&&x.mapping===vR?x.image.height:null,k=p[a.type];null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");var S,E,T,A,M=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,C=void 0!==M?M.length:0,I=0;if(void 0!==_.morphAttributes.position&&(I=1),void 0!==_.morphAttributes.normal&&(I=2),void 0!==_.morphAttributes.color&&(I=3),k){var R=gL[k];S=R.vertexShader,E=R.fragmentShader}else S=a.vertexShader,E=a.fragmentShader,u.update(a),T=u.getVertexShaderID(a),A=u.getFragmentShaderID(a);var N=e.getRenderTarget(),P=!0===g.isInstancedMesh,D=!0===g.isBatchedMesh,L=!!a.map,O=!!a.matcap,U=!!x,F=!!a.aoMap,B=!!a.lightMap,V=!!a.bumpMap,z=!!a.normalMap,j=!!a.displacementMap,H=!!a.emissiveMap,G=!!a.metalnessMap,W=!!a.roughnessMap,q=a.anisotropy>0,X=a.clearcoat>0,K=a.dispersion>0,Y=a.iridescence>0,Q=a.sheen>0,J=a.transmission>0,Z=q&&!!a.anisotropyMap,$=X&&!!a.clearcoatMap,ee=X&&!!a.clearcoatNormalMap,te=X&&!!a.clearcoatRoughnessMap,ne=Y&&!!a.iridescenceMap,re=Y&&!!a.iridescenceThicknessMap,ie=Q&&!!a.sheenColorMap,ae=Q&&!!a.sheenRoughnessMap,oe=!!a.specularMap,se=!!a.specularColorMap,ue=!!a.specularIntensityMap,ce=J&&!!a.transmissionMap,le=J&&!!a.thicknessMap,he=!!a.gradientMap,fe=!!a.alphaMap,de=a.alphaTest>0,pe=!!a.alphaHash,ve=!!a.extensions,me=rR;a.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(me=e.toneMapping));var ge={shaderID:k,shaderType:a.type,shaderName:a.name,vertexShader:S,fragmentShader:E,defines:a.defines,customVertexShaderID:T,customFragmentShaderID:A,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,batching:D,instancing:P,instancingColor:P&&null!==g.instanceColor,instancingMorph:P&&null!==g.morphTexture,supportsVertexTextures:f,outputColorSpace:null===N?e.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:qR,alphaToCoverage:!!a.alphaToCoverage,map:L,matcap:O,envMap:U,envMapMode:U&&x.mapping,envMapCubeUVHeight:w,aoMap:F,lightMap:B,bumpMap:V,normalMap:z,displacementMap:f&&j,emissiveMap:H,normalMapObjectSpace:z&&1===a.normalMapType,normalMapTangentSpace:z&&0===a.normalMapType,metalnessMap:G,roughnessMap:W,anisotropy:q,anisotropyMap:Z,clearcoat:X,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:K,iridescence:Y,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:Q,sheenColorMap:ie,sheenRoughnessMap:ae,specularMap:oe,specularColorMap:se,specularIntensityMap:ue,transmission:J,transmissionMap:ce,thicknessMap:le,gradientMap:he,opaque:!1===a.transparent&&1===a.blending&&!1===a.alphaToCoverage,alphaMap:fe,alphaTest:de,alphaHash:pe,combine:a.combine,mapUv:L&&v(a.map.channel),aoMapUv:F&&v(a.aoMap.channel),lightMapUv:B&&v(a.lightMap.channel),bumpMapUv:V&&v(a.bumpMap.channel),normalMapUv:z&&v(a.normalMap.channel),displacementMapUv:j&&v(a.displacementMap.channel),emissiveMapUv:H&&v(a.emissiveMap.channel),metalnessMapUv:G&&v(a.metalnessMap.channel),roughnessMapUv:W&&v(a.roughnessMap.channel),anisotropyMapUv:Z&&v(a.anisotropyMap.channel),clearcoatMapUv:$&&v(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&v(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&v(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&v(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&v(a.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&v(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&v(a.sheenRoughnessMap.channel),specularMapUv:oe&&v(a.specularMap.channel),specularColorMapUv:se&&v(a.specularColorMap.channel),specularIntensityMapUv:ue&&v(a.specularIntensityMap.channel),transmissionMapUv:ce&&v(a.transmissionMap.channel),thicknessMapUv:le&&v(a.thicknessMap.channel),alphaMapUv:fe&&v(a.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(z||q),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,pointsUvs:!0===g.isPoints&&!!_.attributes.uv&&(L||fe),fog:!!y,useFog:!0===a.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:C,morphTextureStride:I,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:me,useLegacyLights:e._useLegacyLights,decodeVideoTexture:L&&!0===a.map.isVideoTexture&&TN.getTransfer(a.map.colorSpace)===QR,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:a.side===ZI,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:ve&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ve&&!0===a.extensions.multiDraw&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ge.vertexUv1s=c.has(1),ge.vertexUv2s=c.has(2),ge.vertexUv3s=c.has(3),c.clear(),ge},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0);t.instancing&&s.enable(1);t.instancingColor&&s.enable(2);t.instancingMorph&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);t.dispersion&&s.enable(20);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.useLegacyLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);t.alphaToCoverage&&s.enable(20);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=gL[n];t=KD.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=l.length;i<o;i++){var s=l[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new bU(e,n,t,a),l.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:l,dispose:function(){u.dispose()}}}function EU(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function TU(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function AU(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function MU(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,u,c){var l=a(e,t,o,s,u,c);o.transmission>0?r.push(l):!0===o.transparent?i.push(l):n.push(l)},unshift:function(e,t,o,s,u,c){var l=a(e,t,o,s,u,c);o.transmission>0?r.unshift(l):!0===o.transparent?i.unshift(l):n.unshift(l)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||TU),r.length>1&&r.sort(t||AU),i.length>1&&i.sort(t||AU)}}}function CU(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new MU,e.set(t,[r])):n>=i.length?(r=new MU,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function IU(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new zN,color:new oD};break;case"SpotLight":n={position:new zN,direction:new zN,color:new oD,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new zN,color:new oD,distance:0,decay:0};break;case"HemisphereLight":n={direction:new zN,skyColor:new oD,groundColor:new oD};break;case"RectAreaLight":n={color:new oD,position:new zN,halfWidth:new zN,halfHeight:new zN}}return e[t.id]=n,n}}}var RU=0;function NU(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function PU(e){for(var t=new IU,n=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pN};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pN,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0},i=0;i<9;i++)r.probe.push(new zN);var a=new zN,o=new gP,s=new gP;return{setup:function(i,a){for(var o=0,s=0,u=0,c=0;c<9;c++)r.probe[c].set(0,0,0);var l=0,h=0,f=0,d=0,p=0,v=0,m=0,g=0,y=0,_=0,b=0;i.sort(NU);for(var x=!0===a?Math.PI:1,w=0,k=i.length;w<k;w++){var S=i[w],E=S.color,T=S.intensity,A=S.distance,M=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)o+=E.r*T*x,s+=E.g*T*x,u+=E.b*T*x;else if(S.isLightProbe){for(var C=0;C<9;C++)r.probe[C].addScaledVector(S.sh.coefficients[C],T);b++}else if(S.isDirectionalLight){var I=t.get(S);if(I.color.copy(S.color).multiplyScalar(S.intensity*x),S.castShadow){var R=S.shadow,N=n.get(S);N.shadowBias=R.bias,N.shadowNormalBias=R.normalBias,N.shadowRadius=R.radius,N.shadowMapSize=R.mapSize,r.directionalShadow[l]=N,r.directionalShadowMap[l]=M,r.directionalShadowMatrix[l]=S.shadow.matrix,v++}r.directional[l]=I,l++}else if(S.isSpotLight){var P=t.get(S);P.position.setFromMatrixPosition(S.matrixWorld),P.color.copy(E).multiplyScalar(T*x),P.distance=A,P.coneCos=Math.cos(S.angle),P.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),P.decay=S.decay,r.spot[f]=P;var D=S.shadow;if(S.map&&(r.spotLightMap[y]=S.map,y++,D.updateMatrices(S),S.castShadow&&_++),r.spotLightMatrix[f]=D.matrix,S.castShadow){var L=n.get(S);L.shadowBias=D.bias,L.shadowNormalBias=D.normalBias,L.shadowRadius=D.radius,L.shadowMapSize=D.mapSize,r.spotShadow[f]=L,r.spotShadowMap[f]=M,g++}f++}else if(S.isRectAreaLight){var O=t.get(S);O.color.copy(E).multiplyScalar(T),O.halfWidth.set(.5*S.width,0,0),O.halfHeight.set(0,.5*S.height,0),r.rectArea[d]=O,d++}else if(S.isPointLight){var U=t.get(S);if(U.color.copy(S.color).multiplyScalar(S.intensity*x),U.distance=S.distance,U.decay=S.decay,S.castShadow){var F=S.shadow,B=n.get(S);B.shadowBias=F.bias,B.shadowNormalBias=F.normalBias,B.shadowRadius=F.radius,B.shadowMapSize=F.mapSize,B.shadowCameraNear=F.camera.near,B.shadowCameraFar=F.camera.far,r.pointShadow[h]=B,r.pointShadowMap[h]=M,r.pointShadowMatrix[h]=S.shadow.matrix,m++}r.point[h]=U,h++}else if(S.isHemisphereLight){var V=t.get(S);V.skyColor.copy(S.color).multiplyScalar(T*x),V.groundColor.copy(S.groundColor).multiplyScalar(T*x),r.hemi[p]=V,p++}}d>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=mL.LTC_FLOAT_1,r.rectAreaLTC2=mL.LTC_FLOAT_2):(r.rectAreaLTC1=mL.LTC_HALF_1,r.rectAreaLTC2=mL.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=s,r.ambient[2]=u;var z=r.hash;z.directionalLength===l&&z.pointLength===h&&z.spotLength===f&&z.rectAreaLength===d&&z.hemiLength===p&&z.numDirectionalShadows===v&&z.numPointShadows===m&&z.numSpotShadows===g&&z.numSpotMaps===y&&z.numLightProbes===b||(r.directional.length=l,r.spot.length=f,r.rectArea.length=d,r.point.length=h,r.hemi.length=p,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=g+y-_,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=_,r.numLightProbes=b,z.directionalLength=l,z.pointLength=h,z.spotLength=f,z.rectAreaLength=d,z.hemiLength=p,z.numDirectionalShadows=v,z.numPointShadows=m,z.numSpotShadows=g,z.numSpotMaps=y,z.numLightProbes=b,r.version=RU++)},setupView:function(e,t){for(var n=0,i=0,u=0,c=0,l=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var v=r.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(a),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=r.spot[u];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(a),m.direction.transformDirection(h),u++}else if(p.isRectAreaLight){var g=r.rectArea[c];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),s.identity(),o.copy(p.matrixWorld),o.premultiply(h),s.extractRotation(o),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(s),g.halfHeight.applyMatrix4(s),c++}else if(p.isPointLight){var y=r.point[i];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),i++}else if(p.isHemisphereLight){var _=r.hemi[l];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(h),l++}}},state:r}}function DU(e){var t=new PU(e),n=[],r=[];var i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(e){t.setup(n,e)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function LU(e){var t=new WeakMap;return{get:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.get(n);return void 0===a?(r=new DU(e),t.set(n,[r])):i>=a.length?(r=new DU(e),a.push(r)):r=a[i],r},dispose:function(){t=new WeakMap}}}var OU=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(cD),UU=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(cD);function FU(e,t,n){var r,i=new hL,a=new pN,o=new pN,s=new LN,u=new OU({depthPacking:3201}),c=new UU,l={},h=n.maxTextureSize,f=(He(r={},JI,ZI),He(r,ZI,JI),He(r,2,2),r),d=new YD({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pN},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;var v=new SD;v.setAttribute("position",new dD(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new jD(v,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=KI;var y=this.type;function _(n,r){var i=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new UN(a.x,a.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,m,null)}function b(t,n,r,i){var a=null,o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?c:u,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var s=a.uuid,h=n.uuid,d=l[s];void 0===d&&(d={},l[s]=d);var p=d[h];void 0===p&&(p=a.clone(),d[h]=p,n.addEventListener("dispose",w)),a=p}(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===QI?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:f[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial)&&(e.properties.get(a).light=r);return a}function x(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===QI)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,h=0,f=l.length;h<f;h++){var d=l[h],p=c[d.materialIndex];if(p&&p.visible){var v=b(n,p,o,s);n.onBeforeShadow(e,n,r,a,u,v,d),e.renderBufferDirect(a,null,u,v,n,d),n.onAfterShadow(e,n,r,a,u,v,d)}}else if(c.visible){var m=b(n,c,o,s);n.onBeforeShadow(e,n,r,a,u,m,null),e.renderBufferDirect(a,null,u,m,n,null),n.onAfterShadow(e,n,r,a,u,m,null)}}for(var g=n.children,y=0,_=g.length;y<_;y++)x(g[y],r,a,o,s)}}function w(e){var t=e.target;for(var n in t.removeEventListener("dispose",w),l){var r=l[n],i=e.target.uuid;if(i in r)r[i].dispose(),delete r[i]}}this.render=function(t,n,r){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),l=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=y!==QI&&this.type===QI,p=y===QI&&this.type!==QI,v=0,m=t.length;v<m;v++){var b=t[v],w=b.shadow;if(void 0!==w){if(!1!==w.autoUpdate||!1!==w.needsUpdate){a.copy(w.mapSize);var k=w.getFrameExtents();if(a.multiply(k),o.copy(w.mapSize),(a.x>h||a.y>h)&&(a.x>h&&(o.x=Math.floor(h/k.x),a.x=o.x*k.x,w.mapSize.x=o.x),a.y>h&&(o.y=Math.floor(h/k.y),a.y=o.y*k.y,w.mapSize.y=o.y)),null===w.map||!0===d||!0===p){var S=this.type!==QI?{minFilter:_R,magFilter:_R}:{};null!==w.map&&w.map.dispose(),w.map=new UN(a.x,a.y,S),w.map.texture.name=b.name+".shadowMap",w.camera.updateProjectionMatrix()}e.setRenderTarget(w.map),e.clear();for(var E=w.getViewportCount(),T=0;T<E;T++){var A=w.getViewport(T);s.set(o.x*A.x,o.y*A.y,o.x*A.z,o.y*A.w),f.viewport(s),w.updateMatrices(b,T),i=w.getFrustum(),x(n,r,w.camera,b,this.type)}!0!==w.isPointLightShadow&&this.type===QI&&_(w,r),w.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}y=this.type,g.needsUpdate=!1,e.setRenderTarget(u,c,l)}}}function BU(e){var t,n;var r=new function(){var t=!1,n=new LN,r=null,i=new LN(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?z(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null}}},o=new WeakMap,s=new WeakMap,u={},c={},l=new WeakMap,h=[],f=null,d=!1,p=null,v=null,m=null,g=null,y=null,_=null,b=null,x=new oD(0,0,0),w=0,k=!1,S=null,E=null,T=null,A=null,M=null,C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),I=!1,R=0,N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(N)[1]),I=R>=1):-1!==N.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),I=R>=2);var P=null,D={},L=e.getParameter(e.SCISSOR_BOX),O=e.getParameter(e.VIEWPORT),U=(new LN).fromArray(L),F=(new LN).fromArray(O);function B(t,n,r,i){var a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<r;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}var V={};function z(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function j(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}V[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),V[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[e.TEXTURE_2D_ARRAY]=B(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),V[e.TEXTURE_3D]=B(e.TEXTURE_3D,e.TEXTURE_3D,1,1),r.setClear(0,0,0,1),i.setClear(1),a.setClear(0),z(e.DEPTH_TEST),i.setFunc(3),q(!1),X(1),z(e.CULL_FACE),W(0);var H=(He(t={},$I,e.FUNC_ADD),He(t,101,e.FUNC_SUBTRACT),He(t,102,e.FUNC_REVERSE_SUBTRACT),t);H[103]=e.MIN,H[104]=e.MAX;var G=(He(n={},200,e.ZERO),He(n,201,e.ONE),He(n,202,e.SRC_COLOR),He(n,204,e.SRC_ALPHA),He(n,210,e.SRC_ALPHA_SATURATE),He(n,208,e.DST_COLOR),He(n,206,e.DST_ALPHA),He(n,203,e.ONE_MINUS_SRC_COLOR),He(n,205,e.ONE_MINUS_SRC_ALPHA),He(n,209,e.ONE_MINUS_DST_COLOR),He(n,207,e.ONE_MINUS_DST_ALPHA),He(n,211,e.CONSTANT_COLOR),He(n,212,e.ONE_MINUS_CONSTANT_COLOR),He(n,213,e.CONSTANT_ALPHA),He(n,214,e.ONE_MINUS_CONSTANT_ALPHA),n);function W(t,n,r,i,a,o,s,u,c,l){if(0!==t){if(!1===d&&(z(e.BLEND),d=!0),5===t)a=a||n,o=o||r,s=s||i,n===v&&a===y||(e.blendEquationSeparate(H[n],H[a]),v=n,y=a),r===m&&i===g&&o===_&&s===b||(e.blendFuncSeparate(G[r],G[i],G[o],G[s]),m=r,g=i,_=o,b=s),!1!==u.equals(x)&&c===w||(e.blendColor(u.r,u.g,u.b,c),x.copy(u),w=c),p=t,k=!1;else if(t!==p||l!==k){if(v===$I&&y===$I||(e.blendEquation(e.FUNC_ADD),v=$I,y=$I),l)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,_=null,b=null,x.set(0,0,0),w=0,p=t,k=l}}else!0===d&&(j(e.BLEND),d=!1)}function q(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function X(t){0!==t?(z(e.CULL_FACE),t!==E&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),E=t}function K(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),A===n&&M===r||(e.polygonOffset(n,r),A=n,M=r)):j(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:i,stencil:a},enable:z,disable:j,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){var r=h,i=!1;if(t){void 0===(r=l.get(n))&&(r=[],l.set(n,r));var a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(var o=0,s=a.length;o<s;o++)r[o]=e.COLOR_ATTACHMENT0+o;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:W,setMaterial:function(t,n){2===t.side?j(e.CULL_FACE):z(e.CULL_FACE);var o=t.side===ZI;n&&(o=!o),q(o),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),r.setMask(t.colorWrite);var s=t.stencilWrite;a.setTest(s),s&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),K(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:X,setLineWidth:function(t){t!==T&&(I&&e.lineWidth(t),T=t)},setPolygonOffset:K,setScissorTest:function(t){t?z(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),P!==t&&(e.activeTexture(t),P=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===P?e.TEXTURE0+C-1:P);var i=D[r];void 0===i&&(i={type:void 0,texture:void 0},D[r]=i),i.type===t&&i.texture===n||(P!==r&&(e.activeTexture(r),P=r),e.bindTexture(t,n||V[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=D[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=s.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},P=null,D={},c={},l=new WeakMap,h=[],f=null,d=!1,p=null,v=null,m=null,g=null,y=null,_=null,b=null,x=new oD(0,0,0),w=0,k=!1,S=null,E=null,T=null,A=null,M=null,U.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),r.reset(),i.reset(),a.reset()}}}function VU(e,t,n,r,i,a,o){var s,u,c,l,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new pN,p=new WeakMap,v=new WeakMap,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(H){}function g(e,t){return m?new OffscreenCanvas(e,t):yN("canvas")}function y(e,t,n){var r=1,i=j(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){var a=Math.floor(r*i.width),o=Math.floor(r*i.height);void 0===l&&(l=g(a,o));var s=t?g(a,o):l;return s.width=a,s.height=o,s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function _(e){return e.generateMipmaps&&e.minFilter!==_R&&e.minFilter!==xR}function b(t){e.generateMipmap(t)}function x(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RG8UI),i===e.UNSIGNED_SHORT&&(s=e.RG16UI),i===e.UNSIGNED_INT&&(s=e.RG32UI),i===e.BYTE&&(s=e.RG8I),i===e.SHORT&&(s=e.RG16I),i===e.INT&&(s=e.RG32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),r===e.RGBA){var u=o?YR:TN.getTransfer(a);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=u===QR?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function w(e,t){return!0===_(e)||e.isFramebufferTexture&&e.minFilter!==_R&&e.minFilter!==xR?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(e){var t=e.target;t.removeEventListener("dispose",k),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=v.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&E(e),0===Object.keys(i).length&&v.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=r.get(t);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(var a=0;a<n.__webglFramebuffer[i].length;a++)e.deleteFramebuffer(n.__webglFramebuffer[i][a]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(var s=0;s<n.__webglFramebuffer.length;s++)e.deleteFramebuffer(n.__webglFramebuffer[s]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(var u=0;u<n.__webglColorRenderbuffer.length;u++)n.__webglColorRenderbuffer[u]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[u]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}for(var c=t.textures,l=0,h=c.length;l<h;l++){var f=r.get(c[l]);f.__webglTexture&&(e.deleteTexture(f.__webglTexture),o.memory.textures--),r.remove(c[l])}r.remove(t)}(n)}function E(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete v.get(i)[n.__cacheKey],o.memory.textures--}var T=0;function A(t,i){var a=r.get(t);if(t.isVideoTexture&&function(e){var t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){var s=t.image;if(null===s)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==s.complete)return void P(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}var M=(He(s={},mR,e.REPEAT),He(s,gR,e.CLAMP_TO_EDGE),He(s,yR,e.MIRRORED_REPEAT),s),C=(He(u={},_R,e.NEAREST),He(u,1004,e.NEAREST_MIPMAP_NEAREST),He(u,bR,e.NEAREST_MIPMAP_LINEAR),He(u,xR,e.LINEAR),He(u,wR,e.LINEAR_MIPMAP_NEAREST),He(u,kR,e.LINEAR_MIPMAP_LINEAR),u),I=(He(c={},512,e.NEVER),He(c,519,e.ALWAYS),He(c,513,e.LESS),He(c,515,e.LEQUAL),He(c,514,e.EQUAL),He(c,518,e.GEQUAL),He(c,516,e.GREATER),He(c,517,e.NOTEQUAL),c);function R(n,a){if(a.type!==AR||!1!==t.has("OES_texture_float_linear")||a.magFilter!==xR&&a.magFilter!==wR&&a.magFilter!==bR&&a.magFilter!==kR&&a.minFilter!==xR&&a.minFilter!==wR&&a.minFilter!==bR&&a.minFilter!==kR||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,M[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,M[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,M[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,I[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===_R)return;if(a.minFilter!==bR&&a.minFilter!==kR)return;if(a.type===AR&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||r.get(a).__currentAnisotropy){var o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}}function N(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",k));var i=n.source,a=v.get(i);void 0===a&&(a={},v.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var u=a[t.__cacheKey];void 0!==u&&(a[t.__cacheKey].usedTimes--,0===u.usedTimes&&E(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function P(t,o,s){var u=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(u=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(u=e.TEXTURE_3D);var c=N(t,o),l=o.source;n.bindTexture(u,t.__webglTexture,e.TEXTURE0+s);var h=r.get(l);if(l.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);var f=TN.getPrimaries(TN.workingColorSpace),d=o.colorSpace===GR?null:TN.getPrimaries(o.colorSpace),p=o.colorSpace===GR||f===d?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);var v=y(o.image,!1,i.maxTextureSize);v=z(o,v);var m,g=a.convert(o.format,o.colorSpace),k=a.convert(o.type),S=x(o.internalFormat,g,k,o.colorSpace,o.isVideoTexture);R(u,o);var E=o.mipmaps,T=!0!==o.isVideoTexture,A=void 0===h.__version||!0===c,M=l.dataReady,C=w(o,v);if(o.isDepthTexture)S=e.DEPTH_COMPONENT16,o.type===AR?S=e.DEPTH_COMPONENT32F:o.type===TR?S=e.DEPTH_COMPONENT24:o.type===CR&&(S=e.DEPTH24_STENCIL8),A&&(T?n.texStorage2D(e.TEXTURE_2D,1,S,v.width,v.height):n.texImage2D(e.TEXTURE_2D,0,S,v.width,v.height,0,g,k,null));else if(o.isDataTexture)if(E.length>0){T&&A&&n.texStorage2D(e.TEXTURE_2D,C,S,E[0].width,E[0].height);for(var I=0,P=E.length;I<P;I++)m=E[I],T?M&&n.texSubImage2D(e.TEXTURE_2D,I,0,0,m.width,m.height,g,k,m.data):n.texImage2D(e.TEXTURE_2D,I,S,m.width,m.height,0,g,k,m.data);o.generateMipmaps=!1}else T?(A&&n.texStorage2D(e.TEXTURE_2D,C,S,v.width,v.height),M&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,v.width,v.height,g,k,v.data)):n.texImage2D(e.TEXTURE_2D,0,S,v.width,v.height,0,g,k,v.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){T&&A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,S,E[0].width,E[0].height,v.depth);for(var D=0,L=E.length;D<L;D++)m=E[D],o.format!==IR?null!==g?T?M&&n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,D,0,0,0,m.width,m.height,v.depth,g,m.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,D,S,m.width,m.height,v.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?M&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,D,0,0,0,m.width,m.height,v.depth,g,k,m.data):n.texImage3D(e.TEXTURE_2D_ARRAY,D,S,m.width,m.height,v.depth,0,g,k,m.data)}else{T&&A&&n.texStorage2D(e.TEXTURE_2D,C,S,E[0].width,E[0].height);for(var O=0,U=E.length;O<U;O++)m=E[O],o.format!==IR?null!==g?T?M&&n.compressedTexSubImage2D(e.TEXTURE_2D,O,0,0,m.width,m.height,g,m.data):n.compressedTexImage2D(e.TEXTURE_2D,O,S,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?M&&n.texSubImage2D(e.TEXTURE_2D,O,0,0,m.width,m.height,g,k,m.data):n.texImage2D(e.TEXTURE_2D,O,S,m.width,m.height,0,g,k,m.data)}else if(o.isDataArrayTexture)T?(A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,S,v.width,v.height,v.depth),M&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,v.width,v.height,v.depth,g,k,v.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,S,v.width,v.height,v.depth,0,g,k,v.data);else if(o.isData3DTexture)T?(A&&n.texStorage3D(e.TEXTURE_3D,C,S,v.width,v.height,v.depth),M&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,v.width,v.height,v.depth,g,k,v.data)):n.texImage3D(e.TEXTURE_3D,0,S,v.width,v.height,v.depth,0,g,k,v.data);else if(o.isFramebufferTexture){if(A)if(T)n.texStorage2D(e.TEXTURE_2D,C,S,v.width,v.height);else for(var F=v.width,B=v.height,V=0;V<C;V++)n.texImage2D(e.TEXTURE_2D,V,S,F,B,0,g,k,null),F>>=1,B>>=1}else if(E.length>0){if(T&&A){var H=j(E[0]);n.texStorage2D(e.TEXTURE_2D,C,S,H.width,H.height)}for(var G=0,W=E.length;G<W;G++)m=E[G],T?M&&n.texSubImage2D(e.TEXTURE_2D,G,0,0,g,k,m):n.texImage2D(e.TEXTURE_2D,G,S,g,k,m);o.generateMipmaps=!1}else if(T){if(A){var q=j(v);n.texStorage2D(e.TEXTURE_2D,C,S,q.width,q.height)}M&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,g,k,v)}else n.texImage2D(e.TEXTURE_2D,0,S,g,k,v);_(o)&&b(u),h.__version=l.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function D(t,i,o,s,u,c){var l=a.convert(o.format,o.colorSpace),f=a.convert(o.type),d=x(o.internalFormat,l,f,o.colorSpace);if(!r.get(i).__hasExternalTextures){var p=Math.max(1,i.width>>c),v=Math.max(1,i.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,c,d,p,v,i.depth,0,l,f,null):n.texImage2D(u,c,d,p,v,0,l,f,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),V(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,u,r.get(o).__webglTexture,0,B(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,u,r.get(o).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function L(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){var i=e.DEPTH_COMPONENT24;if(r||V(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===AR?i=e.DEPTH_COMPONENT32F:o.type===TR&&(i=e.DEPTH_COMPONENT24));var s=B(n);V(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,s,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,s,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=B(n);r&&!1===V(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,e.DEPTH24_STENCIL8,n.width,n.height):V(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else for(var c=n.textures,l=0;l<c.length;l++){var f=c[l],d=a.convert(f.format,f.colorSpace),p=a.convert(f.type),v=x(f.internalFormat,d,p,f.colorSpace),m=B(n);r&&!1===V(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,m,v,n.width,n.height):V(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,m,v,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,v,n.width,n.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=B(i);if(i.depthTexture.format===RR)V(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==NR)throw new Error("Unknown depthTexture format");V(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),L(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),L(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}var U=[],F=[];function B(e){return Math.min(i.maxSamples,e.samples)}function V(e){var n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(e,t){var n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==qR&&n!==GR&&(TN.getTransfer(n)===QR?r===IR&&i===SR||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function j(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(d.width=e.naturalWidth||e.width,d.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(d.width=e.displayWidth,d.height=e.displayHeight):(d.width=e.width,d.height=e.height),d}this.allocateTextureUnit=function(){var e=T;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=A,this.setTexture2DArray=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?P(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?P(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){var s=r.get(t);t.version>0&&s.__version!==t.version?function(t,o,s){if(6!==o.image.length)return;var u=N(t,o),c=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);var l=r.get(c);if(c.version!==l.__version||!0===u){n.activeTexture(e.TEXTURE0+s);var h=TN.getPrimaries(TN.workingColorSpace),f=o.colorSpace===GR?null:TN.getPrimaries(o.colorSpace),d=o.colorSpace===GR||h===f?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);for(var p=o.isCompressedTexture||o.image[0].isCompressedTexture,v=o.image[0]&&o.image[0].isDataTexture,m=[],g=0;g<6;g++)m[g]=p||v?v?o.image[g].image:o.image[g]:y(o.image[g],!0,i.maxCubemapSize),m[g]=z(o,m[g]);var k,S=m[0],E=a.convert(o.format,o.colorSpace),T=a.convert(o.type),A=x(o.internalFormat,E,T,o.colorSpace),M=!0!==o.isVideoTexture,C=void 0===l.__version||!0===u,I=c.dataReady,P=w(o,S);if(R(e.TEXTURE_CUBE_MAP,o),p){M&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,P,A,S.width,S.height);for(var D=0;D<6;D++){k=m[D].mipmaps;for(var L=0;L<k.length;L++){var O=k[L];o.format!==IR?null!==E?M?I&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+D,L,0,0,O.width,O.height,E,O.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+D,L,A,O.width,O.height,0,O.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?I&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+D,L,0,0,O.width,O.height,E,T,O.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+D,L,A,O.width,O.height,0,E,T,O.data)}}}else{if(k=o.mipmaps,M&&C){k.length>0&&P++;var U=j(m[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,P,A,U.width,U.height)}for(var F=0;F<6;F++)if(v){M?I&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,0,0,m[F].width,m[F].height,E,T,m[F].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,A,m[F].width,m[F].height,0,E,T,m[F].data);for(var B=0;B<k.length;B++){var V=k[B].image[F].image;M?I&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,B+1,0,0,V.width,V.height,E,T,V.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,B+1,A,V.width,V.height,0,E,T,V.data)}}else{M?I&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,0,0,E,T,m[F]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,A,E,T,m[F]);for(var H=0;H<k.length;H++){var G=k[H];M?I&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,H+1,0,0,E,T,G.image[F]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,H+1,A,E,T,G.image[F])}}}_(o)&&b(e.TEXTURE_CUBE_MAP),l.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(s,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){var a=r.get(t);void 0!==n&&D(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){var i=t.texture,s=r.get(t),u=r.get(i);t.addEventListener("dispose",S);var c=t.textures,l=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=i.version,o.memory.textures++),l){s.__webglFramebuffer=[];for(var f=0;f<6;f++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[f]=[];for(var d=0;d<i.mipmaps.length;d++)s.__webglFramebuffer[f][d]=e.createFramebuffer()}else s.__webglFramebuffer[f]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(var p=0;p<i.mipmaps.length;p++)s.__webglFramebuffer[p]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(var v=0,m=c.length;v<m;v++){var g=r.get(c[v]);void 0===g.__webglTexture&&(g.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===V(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(var y=0;y<c.length;y++){var w=c[y];s.__webglColorRenderbuffer[y]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[y]);var k=a.convert(w.format,w.colorSpace),E=a.convert(w.type),T=x(w.internalFormat,k,E,w.colorSpace,!0===t.isXRRenderTarget),A=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,A,T,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+y,e.RENDERBUFFER,s.__webglColorRenderbuffer[y])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),L(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(l){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),R(e.TEXTURE_CUBE_MAP,i);for(var M=0;M<6;M++)if(i.mipmaps&&i.mipmaps.length>0)for(var C=0;C<i.mipmaps.length;C++)D(s.__webglFramebuffer[M][C],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+M,C);else D(s.__webglFramebuffer[M],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+M,0);_(i)&&b(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(var I=0,N=c.length;I<N;I++){var P=c[I],U=r.get(P);n.bindTexture(e.TEXTURE_2D,U.__webglTexture),R(e.TEXTURE_2D,P),D(s.__webglFramebuffer,t,P,e.COLOR_ATTACHMENT0+I,e.TEXTURE_2D,0),_(P)&&b(e.TEXTURE_2D)}n.unbindTexture()}else{var F=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(F=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(F,u.__webglTexture),R(F,i),i.mipmaps&&i.mipmaps.length>0)for(var z=0;z<i.mipmaps.length;z++)D(s.__webglFramebuffer[z],t,i,e.COLOR_ATTACHMENT0,F,z);else D(s.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,F,0);_(i)&&b(F),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){for(var i=t.textures,a=0,o=i.length;a<o;a++){var s=i[a];if(_(s)){var u=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,c=r.get(s).__webglTexture;n.bindTexture(u,c),b(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===V(t)){var i=t.textures,a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=r.get(t),l=i.length>1;if(l)for(var h=0;h<i.length;h++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(var d=0;d<i.length;d++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),l){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[d]);var p=r.get(i[d]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===f&&(U.length=0,F.length=0,U.push(e.COLOR_ATTACHMENT0+d),t.depthBuffer&&!1===t.resolveDepthBuffer&&(U.push(u),F.push(u),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,F)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,U))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),l)for(var v=0;v<i.length;v++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+v,e.RENDERBUFFER,c.__webglColorRenderbuffer[v]);var m=r.get(i[v]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+v,e.TEXTURE_2D,m,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&f){var g=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[g])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=D,this.useMultisampledRTT=V}function zU(e,t){return{convert:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GR,a=TN.getTransfer(i);if(n===SR)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===n)return e.UNSIGNED_INT_5_9_9_9_REV;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(n===ER)return e.INT;if(n===TR)return e.UNSIGNED_INT;if(n===AR)return e.FLOAT;if(n===MR)return e.HALF_FLOAT;if(1021===n)return e.ALPHA;if(1022===n)return e.RGB;if(n===IR)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===RR)return e.DEPTH_COMPONENT;if(n===NR)return e.DEPTH_STENCIL;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===PR||n===DR||n===LR||n===OR)if(a===QR){if(null===(r=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===PR)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===DR)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===LR)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===OR)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===PR)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===DR)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===LR)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===OR)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===n)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n||37492===n||37496===n){if(null===(r=t.get("WEBGL_compressed_texture_etc")))return null;if(36196===n||37492===n)return a===QR?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(37496===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(null===(r=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return a===QR?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===UR||36494===n||36495===n){if(null===(r=t.get("EXT_texture_compression_bptc")))return null;if(n===UR)return a===QR?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(null===(r=t.get("EXT_texture_compression_rgtc")))return null;if(n===UR)return r.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===CR?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}var jU=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return g(n)}(eL),HU=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return g(n)}(GP),GU={type:"move"},WU=function(){function e(){d(this,e),this._targetRay=null,this._grip=null,this._hand=null}return g(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new HU,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new HU,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new zN,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new zN),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new HU,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new zN,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new zN),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=A(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(a){r.e(a)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var c,l=A(e.hand.values());try{for(l.s();!(c=l.n()).done;){var h=c.value,f=t.getJointPose(h,n),d=this._getHandJoint(u,h);null!==f&&(d.matrix.fromArray(f.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,d.jointRadius=f.radius),d.visible=null!==f}}catch(g){l.e(g)}finally{l.f()}var p=u.joints["index-finger-tip"],v=u.joints["thumb-tip"],m=p.position.distanceTo(v.position);u.inputState.pinching&&m>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(GU)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new HU;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),qU=function(){function e(){d(this,e),this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}return g(e,[{key:"init",value:function(e,t,n){if(null===this.texture){var r=new DN;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}},{key:"render",value:function(e,t){if(null!==this.texture){if(null===this.mesh){var n=t.cameras[0].viewport,r=new YD({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new jD(new pL(20,20),r)}e.render(this.mesh,t)}}},{key:"reset",value:function(){this.texture=null,this.mesh=null}}]),e}(),XU=function(e){_(n,e);var t=k(n);function n(e,r){var i;d(this,n);var a=w(i=t.call(this)),o=null,s=1,u=null,c="local-floor",l=1,h=null,f=null,p=null,v=null,m=null,g=null,y=new qU,_=r.getContextAttributes(),b=null,x=null,k=[],S=[],E=new pN,T=null,A=new eL;A.layers.enable(1),A.viewport=new LN;var M=new eL;M.layers.enable(2),M.viewport=new LN;var C=[A,M],I=new jU;I.layers.enable(1),I.layers.enable(2);var R=null,N=null;function P(e){var t=S.indexOf(e.inputSource);if(-1!==t){var n=k[t];void 0!==n&&(n.update(e.inputSource,e.frame,h||u),n.dispatchEvent({type:e.type,data:e.inputSource}))}}function D(){o.removeEventListener("select",P),o.removeEventListener("selectstart",P),o.removeEventListener("selectend",P),o.removeEventListener("squeeze",P),o.removeEventListener("squeezestart",P),o.removeEventListener("squeezeend",P),o.removeEventListener("end",D),o.removeEventListener("inputsourceschange",L);for(var t=0;t<k.length;t++){var n=S[t];null!==n&&(S[t]=null,k[t].disconnect(n))}R=null,N=null,y.reset(),e.setRenderTarget(b),m=null,v=null,p=null,o=null,x=null,V.stop(),a.isPresenting=!1,e.setPixelRatio(T),e.setSize(E.width,E.height,!1),a.dispatchEvent({type:"sessionend"})}function L(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=S.indexOf(n);r>=0&&(S[r]=null,k[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=S.indexOf(a);if(-1===o){for(var s=0;s<k.length;s++){if(s>=S.length){S.push(a),o=s;break}if(null===S[s]){S[s]=a,o=s;break}}if(-1===o)break}var u=k[o];u&&u.connect(a)}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=k[e];return void 0===t&&(t=new WU,k[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=k[e];return void 0===t&&(t=new WU,k[e]=t),t.getGripSpace()},i.getHand=function(e){var t=k[e];return void 0===t&&(t=new WU,k[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){c=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return h||u},i.setReferenceSpace=function(e){h=e},i.getBaseLayer=function(){return null!==v?v:m},i.getBinding=function(){return p},i.getFrame=function(){return g},i.getSession=function(){return o},i.setSession=function(){var t=kt(xt().mark((function t(n){var i,f,d,g,y;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=27;break}if(b=e.getRenderTarget(),o.addEventListener("select",P),o.addEventListener("selectstart",P),o.addEventListener("selectend",P),o.addEventListener("squeeze",P),o.addEventListener("squeezestart",P),o.addEventListener("squeezeend",P),o.addEventListener("end",D),o.addEventListener("inputsourceschange",L),!0===_.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return T=e.getPixelRatio(),e.getSize(E),void 0===o.renderState.layers?(i={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s},m=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),x=new UN(m.framebufferWidth,m.framebufferHeight,{format:IR,type:SR,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})):(f=null,d=null,g=null,_.depth&&(g=_.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,f=_.stencil?NR:RR,d=_.stencil?CR:TR),y={colorFormat:r.RGBA8,depthFormat:g,scaleFactor:s},p=new XRWebGLBinding(o,r),v=p.createProjectionLayer(y),o.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),x=new UN(v.textureWidth,v.textureHeight,{format:IR,type:SR,depthTexture:new JL(v.textureWidth,v.textureHeight,d,void 0,void 0,void 0,void 0,void 0,void 0,f),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:!1===v.ignoreDepthValues})),x.isXRRenderTarget=!0,this.setFoveation(l),h=null,t.next=22,o.requestReferenceSpace(c);case 22:u=t.sent,V.setContext(o),V.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.getEnvironmentBlendMode=function(){if(null!==o)return o.environmentBlendMode};var O=new zN,U=new zN;function F(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){null!==y.texture&&(e.near=y.depthNear,e.far=y.depthFar),I.near=M.near=A.near=e.near,I.far=M.far=A.far=e.far,R===I.near&&N===I.far||(o.updateRenderState({depthNear:I.near,depthFar:I.far}),R=I.near,N=I.far,A.near=R,A.far=N,M.near=R,M.far=N,A.updateProjectionMatrix(),M.updateProjectionMatrix(),e.updateProjectionMatrix());var t=e.parent,n=I.cameras;F(I,t);for(var r=0;r<n.length;r++)F(n[r],t);2===n.length?function(e,t,n){O.setFromMatrixPosition(t.matrixWorld),U.setFromMatrixPosition(n.matrixWorld);var r=O.distanceTo(U),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*l,d=o*h,p=r/(-l+h),v=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=f-v,_=d+(r-v),b=u*s/g*m,x=c*s/g*m;e.projectionMatrix.makePerspective(y,_,b,x,m,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(I,A,M):I.projectionMatrix.copy(A.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*sN*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,I,t)}},i.getCamera=function(){return I},i.getFoveation=function(){if(null!==v||null!==m)return l},i.setFoveation=function(e){l=e,null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)},i.hasDepthSensing=function(){return null!==y.texture};var B=null;var V=new fL;return V.setAnimationLoop((function(t,n){if(f=n.getViewerPose(h||u),g=n,null!==f){var r=f.views;null!==m&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));var i=!1;r.length!==I.cameras.length&&(I.cameras.length=0,i=!0);for(var s=0;s<r.length;s++){var c=r[s],l=null;if(null!==m)l=m.getViewport(c);else{var d=p.getViewSubImage(v,c);l=d.viewport,0===s&&(e.setRenderTargetTextures(x,d.colorTexture,v.ignoreDepthValues?void 0:d.depthStencilTexture),e.setRenderTarget(x))}var _=C[s];void 0===_&&((_=new eL).layers.enable(s),_.viewport=new LN,C[s]=_),_.matrix.fromArray(c.transform.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale),_.projectionMatrix.fromArray(c.projectionMatrix),_.projectionMatrixInverse.copy(_.projectionMatrix).invert(),_.viewport.set(l.x,l.y,l.width,l.height),0===s&&(I.matrix.copy(_.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),!0===i&&I.cameras.push(_)}var b=o.enabledFeatures;if(b&&b.includes("depth-sensing")){var w=p.getDepthInformation(r[0]);w&&w.isValid&&w.texture&&y.init(e,w,o.renderState)}}for(var E=0;E<k.length;E++){var T=S[E],A=k[E];null!==T&&void 0!==A&&A.update(T,n,h||u)}y.render(e,I),B&&B(t,n),n.detectedPlanes&&a.dispatchEvent({type:"planesdetected",data:n}),g=null})),i.setAnimationLoop=function(e){B=e},i.dispose=function(){},i}return g(n)}(iN),KU=new AP,YU=new gP;function QU(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===ZI&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===ZI&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);var a=t.get(i),o=a.envMap,s=a.envMapRotation;if(o&&(r.envMap.value=o,KU.copy(s),KU.x*=-1,KU.y*=-1,KU.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(KU.y*=-1,KU.z*=-1),r.envMapRotation.value.setFromMatrix4(YU.makeRotationFromEuler(KU)),r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;var u=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*u,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,XD(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===ZI&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){var r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function JU(e,t,n,r){var i={},a={},o=[],s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function u(e,t,n,r){var i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;var o=r[a];if("number"===typeof i||"boolean"===typeof i){if(o!==i)return r[a]=i,!0}else if(!1===o.equals(i))return o.copy(i),!0;return!1}function c(e){var t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function l(t){var n=t.target;n.removeEventListener("dispose",l);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){var f=i[n.id];void 0===f&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=t.length;i<a;i++)for(var o=Array.isArray(t[i])?t[i]:[t[i]],s=0,u=o.length;s<u;s++)for(var l=o[s],h=Array.isArray(l.value)?l.value:[l.value],f=0,d=h.length;f<d;f++){var p=c(h[f]),v=n%r;0!==v&&r-v<p.boundary&&(n+=r-v),l.__data=new Float32Array(p.storage/Float32Array.BYTES_PER_ELEMENT),l.__offset=n,n+=p.storage}var m=n%r;m>0&&(n+=r-m);e.__size=n,e.__cache={}}(n),f=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",l));var d=h.program;r.updateUBOMapping(n,d);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(var o=0,s=r.length;o<s;o++)for(var l=Array.isArray(r[o])?r[o]:[r[o]],h=0,f=l.length;h<f;h++){var d=l[h];if(!0===u(d,o,h,a)){for(var p=d.__offset,v=Array.isArray(d.value)?d.value:[d.value],m=0,g=0;g<v.length;g++){var y=v[g],_=c(y);"number"===typeof y||"boolean"===typeof y?(d.__data[0]=y,e.bufferSubData(e.UNIFORM_BUFFER,p+m,d.__data)):y.isMatrix3?(d.__data[0]=y.elements[0],d.__data[1]=y.elements[1],d.__data[2]=y.elements[2],d.__data[3]=0,d.__data[4]=y.elements[3],d.__data[5]=y.elements[4],d.__data[6]=y.elements[5],d.__data[7]=0,d.__data[8]=y.elements[6],d.__data[9]=y.elements[7],d.__data[10]=y.elements[8],d.__data[11]=0):(y.toArray(d.__data,m),m+=_.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,p,d.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}var ZU=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e);var n,r=t.canvas,i=void 0===r?function(){var e=yN("canvas");return e.style.display="block",e}():r,a=t.context,o=void 0===a?null:a,s=t.depth,u=void 0===s||s,c=t.stencil,l=void 0!==c&&c,h=t.alpha,f=void 0!==h&&h,p=t.antialias,v=void 0!==p&&p,m=t.premultipliedAlpha,g=void 0===m||m,y=t.preserveDrawingBuffer,_=void 0!==y&&y,b=t.powerPreference,x=void 0===b?"default":b,w=t.failIfMajorPerformanceCaveat,k=void 0!==w&&w;if(this.isWebGLRenderer=!0,null!==o){if("undefined"!==typeof WebGLRenderingContext&&o instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");n=o.getContextAttributes().alpha}else n=f;var S=new Uint32Array(4),E=new Int32Array(4),T=null,A=null,M=[],C=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=WR,this._useLegacyLights=!1,this.toneMapping=rR,this.toneMappingExposure=1;var I=this,R=!1,N=0,P=0,D=null,L=-1,O=null,U=new LN,F=new LN,B=null,V=new oD(0),z=0,j=i.width,H=i.height,G=1,W=null,q=null,X=new LN(0,0,j,H),K=new LN(0,0,j,H),Y=!1,Q=new hL,J=!1,Z=!1,$=new gP,ee=new zN,te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ne(){return null===D?G:1}var re,ie,ae,oe,se,ue,ce,le,he,fe,de,pe,ve,me,ge,ye,_e,be,xe,we,ke,Se,Ee,Te,Ae=o;function Me(e,t){return i.getContext(e,t)}try{var Ce={alpha:!0,depth:u,stencil:l,antialias:v,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:x,failIfMajorPerformanceCaveat:k};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(XI)),i.addEventListener("webglcontextlost",Pe,!1),i.addEventListener("webglcontextrestored",De,!1),i.addEventListener("webglcontextcreationerror",Le,!1),null===Ae){var Ie="webgl2";if(null===(Ae=Me(Ie,Ce)))throw Me(Ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Qe){throw console.error("THREE.WebGLRenderer: "+Qe.message),Qe}function Re(){(re=new WL(Ae)).init(),Se=new zU(Ae,re),ie=new SL(Ae,re,t,Se),ae=new BU(Ae),oe=new KL(Ae),se=new EU,ue=new VU(Ae,re,ae,se,ie,Se,oe),ce=new TL(I),le=new GL(I),he=new dL(Ae),Ee=new wL(Ae,he),fe=new qL(Ae,he,oe,Ee),de=new QL(Ae,fe,he,oe),xe=new YL(Ae,ie,ue),ye=new EL(se),pe=new SU(I,ce,le,re,ie,Ee,ye),ve=new QU(I,se),me=new CU,ge=new LU(re),be=new xL(I,ce,le,ae,de,n,g),_e=new FU(I,de,ie),Te=new JU(Ae,oe,ie,ae),we=new kL(Ae,re,oe),ke=new XL(Ae,re,oe),oe.programs=pe.programs,I.capabilities=ie,I.extensions=re,I.properties=se,I.renderLists=me,I.shadowMap=_e,I.state=ae,I.info=oe}Re();var Ne=new XU(I,Ae);function Pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function De(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;var e=oe.autoReset,t=_e.enabled,n=_e.autoUpdate,r=_e.needsUpdate,i=_e.type;Re(),oe.autoReset=e,_e.enabled=t,_e.autoUpdate=n,_e.needsUpdate=r,_e.type=i}function Le(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Oe(e){var t=e.target;t.removeEventListener("dispose",Oe),function(e){(function(e){var t=se.get(e).programs;void 0!==t&&(t.forEach((function(e){pe.releaseProgram(e)})),e.isShaderMaterial&&pe.releaseShaderCache(e))})(e),se.remove(e)}(t)}function Ue(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=ZI,e.needsUpdate=!0,Xe(e,t,n),e.side=JI,e.needsUpdate=!0,Xe(e,t,n),e.side=2):Xe(e,t,n)}this.xr=Ne,this.getContext=function(){return Ae},this.getContextAttributes=function(){return Ae.getContextAttributes()},this.forceContextLoss=function(){var e=re.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=re.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(e){void 0!==e&&(G=e,this.setSize(j,H,!1))},this.getSize=function(e){return e.set(j,H)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ne.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(j=e,H=t,i.width=Math.floor(e*G),i.height=Math.floor(t*G),!0===n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(j*G,H*G).floor()},this.setDrawingBufferSize=function(e,t,n){j=e,H=t,G=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(U)},this.getViewport=function(e){return e.copy(X)},this.setViewport=function(e,t,n,r){e.isVector4?X.set(e.x,e.y,e.z,e.w):X.set(e,t,n,r),ae.viewport(U.copy(X).multiplyScalar(G).round())},this.getScissor=function(e){return e.copy(K)},this.setScissor=function(e,t,n,r){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,r),ae.scissor(F.copy(K).multiplyScalar(G).round())},this.getScissorTest=function(){return Y},this.setScissorTest=function(e){ae.setScissorTest(Y=e)},this.setOpaqueSort=function(e){W=e},this.setTransparentSort=function(e){q=e},this.getClearColor=function(e){return e.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var r=!1;if(null!==D){var i=D.texture.format;r=1033===i||1031===i||1029===i}if(r){var a=D.texture.type,o=a===SR||a===TR||1012===a||a===CR||1017===a||1018===a,s=be.getClearColor(),u=be.getClearAlpha(),c=s.r,l=s.g,h=s.b;o?(S[0]=c,S[1]=l,S[2]=h,S[3]=u,Ae.clearBufferuiv(Ae.COLOR,0,S)):(E[0]=c,E[1]=l,E[2]=h,E[3]=u,Ae.clearBufferiv(Ae.COLOR,0,E))}else n|=Ae.COLOR_BUFFER_BIT}e&&(n|=Ae.DEPTH_BUFFER_BIT),t&&(n|=Ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ae.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Pe,!1),i.removeEventListener("webglcontextrestored",De,!1),i.removeEventListener("webglcontextcreationerror",Le,!1),me.dispose(),ge.dispose(),se.dispose(),ce.dispose(),le.dispose(),de.dispose(),Ee.dispose(),Te.dispose(),pe.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",Be),Ne.removeEventListener("sessionend",Ve),ze.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=te);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=te);ue.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===D?I.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:qR,u=(r.isMeshStandardMaterial?le:ce).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,l=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,p=rR;r.toneMapped&&(null!==D&&!0!==D.isXRRenderTarget||(p=I.toneMapping));var v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,m=void 0!==v?v.length:0,g=se.get(r),y=A.state.lights;if(!0===J&&(!0===Z||e!==O)){var _=e===O&&r.id===L;ye.setState(r,e,_)}var b=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==y.state.version||g.outputColorSpace!==s||i.isBatchedMesh&&!1===g.batching?b=!0:i.isBatchedMesh||!0!==g.batching?i.isInstancedMesh&&!1===g.instancing?b=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?b=!0:i.isSkinnedMesh||!0!==g.skinning?i.isInstancedMesh&&!0===g.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===g.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===g.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===g.instancingMorph&&null!==i.morphTexture||g.envMap!==u||!0===r.fog&&g.fog!==a?b=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===ye.numPlanes&&g.numIntersection===ye.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==l||g.morphTargets!==h||g.morphNormals!==f||g.morphColors!==d||g.toneMapping!==p||g.morphTargetsCount!==m)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,g.__version=r.version);var x=g.currentProgram;!0===b&&(x=Xe(r,t,i));var w=!1,k=!1,S=!1,E=x.getUniforms(),T=g.uniforms;ae.useProgram(x.program)&&(w=!0,k=!0,S=!0);r.id!==L&&(L=r.id,k=!0);if(w||O!==e){E.setValue(Ae,"projectionMatrix",e.projectionMatrix),E.setValue(Ae,"viewMatrix",e.matrixWorldInverse);var M=E.map.cameraPosition;void 0!==M&&M.setValue(Ae,ee.setFromMatrixPosition(e.matrixWorld)),ie.logarithmicDepthBuffer&&E.setValue(Ae,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&E.setValue(Ae,"isOrthographic",!0===e.isOrthographicCamera),O!==e&&(O=e,k=!0,S=!0)}if(i.isSkinnedMesh){E.setOptional(Ae,i,"bindMatrix"),E.setOptional(Ae,i,"bindMatrixInverse");var C=i.skeleton;C&&(null===C.boneTexture&&C.computeBoneTexture(),E.setValue(Ae,"boneTexture",C.boneTexture,ue))}i.isBatchedMesh&&(E.setOptional(Ae,i,"batchingTexture"),E.setValue(Ae,"batchingTexture",i._matricesTexture,ue));var R=n.morphAttributes;void 0===R.position&&void 0===R.normal&&void 0===R.color||xe.update(i,n,x);(k||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,E.setValue(Ae,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(T.envMap.value=u,T.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(T.envMapIntensity.value=t.environmentIntensity);k&&(E.setValue(Ae,"toneMappingExposure",I.toneMappingExposure),g.needsLights&&(P=S,(N=T).ambientLightColor.needsUpdate=P,N.lightProbe.needsUpdate=P,N.directionalLights.needsUpdate=P,N.directionalLightShadows.needsUpdate=P,N.pointLights.needsUpdate=P,N.pointLightShadows.needsUpdate=P,N.spotLights.needsUpdate=P,N.spotLightShadows.needsUpdate=P,N.rectAreaLights.needsUpdate=P,N.hemisphereLights.needsUpdate=P),a&&!0===r.fog&&ve.refreshFogUniforms(T,a),ve.refreshMaterialUniforms(T,r,G,H,A.state.transmissionRenderTarget[e.id]),nU.upload(Ae,Ke(g),T,ue));var N,P;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(nU.upload(Ae,Ke(g),T,ue),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&E.setValue(Ae,"center",i.center);if(E.setValue(Ae,"modelViewMatrix",i.modelViewMatrix),E.setValue(Ae,"normalMatrix",i.normalMatrix),E.setValue(Ae,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var U=r.uniformsGroups,F=0,B=U.length;F<B;F++){var V=U[F];Te.update(V,x),Te.bind(V,x)}return x}(e,t,n,r,i);ae.setMaterial(r,o);var u=n.index,c=1;if(!0===r.wireframe){if(void 0===(u=fe.getWireframeAttribute(n)))return;c=2}var l=n.drawRange,h=n.attributes.position,f=l.start*c,d=(l.start+l.count)*c;null!==a&&(f=Math.max(f,a.start*c),d=Math.min(d,(a.start+a.count)*c)),null!==u?(f=Math.max(f,0),d=Math.min(d,u.count)):void 0!==h&&null!==h&&(f=Math.max(f,0),d=Math.min(d,h.count));var p=d-f;if(!(p<0||p===1/0)){var v;Ee.setup(i,r,s,n,u);var m=we;if(null!==u&&(v=he.get(u),(m=ke).setIndex(v)),i.isMesh)!0===r.wireframe?(ae.setLineWidth(r.wireframeLinewidth*ne()),m.setMode(Ae.LINES)):m.setMode(Ae.TRIANGLES);else if(i.isLine){var g=r.linewidth;void 0===g&&(g=1),ae.setLineWidth(g*ne()),i.isLineSegments?m.setMode(Ae.LINES):i.isLineLoop?m.setMode(Ae.LINE_LOOP):m.setMode(Ae.LINE_STRIP)}else i.isPoints?m.setMode(Ae.POINTS):i.isSprite&&m.setMode(Ae.TRIANGLES);if(i.isBatchedMesh)null!==i._multiDrawInstances?m.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances):m.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)m.renderInstances(f,p,i.count);else if(n.isInstancedBufferGeometry){var y=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,_=Math.min(n.instanceCount,y);m.renderInstances(f,p,_)}else m.render(f,p)}},this.compile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),(A=ge.get(n)).init(t),C.push(A),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(A.pushLight(e),e.castShadow&&A.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(A.pushLight(e),e.castShadow&&A.pushShadow(e))})),A.setupLights(I._useLegacyLights);var r=new Set;return e.traverse((function(e){var t=e.material;if(t)if(Array.isArray(t))for(var i=0;i<t.length;i++){var a=t[i];Ue(a,n,e),r.add(a)}else Ue(t,n,e),r.add(t)})),C.pop(),A=null,r},this.compileAsync=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.compile(e,t,n);return new Promise((function(t){function n(){r.forEach((function(e){se.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==re.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};var Fe=null;function Be(){ze.stop()}function Ve(){ze.start()}var ze=new fL;function je(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)A.pushLight(e),e.castShadow&&A.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Q.intersectsSprite(e)){r&&ee.setFromMatrixPosition(e.matrixWorld).applyMatrix4($);var i=de.update(e),a=e.material;a.visible&&T.push(e,i,a,n,ee.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Q.intersectsObject(e))){var o=de.update(e),s=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),ee.copy(e.boundingSphere.center)):(null===o.boundingSphere&&o.computeBoundingSphere(),ee.copy(o.boundingSphere.center)),ee.applyMatrix4(e.matrixWorld).applyMatrix4($)),Array.isArray(s))for(var u=o.groups,c=0,l=u.length;c<l;c++){var h=u[c],f=s[h.materialIndex];f&&f.visible&&T.push(e,o,f,n,ee.z,h)}else s.visible&&T.push(e,o,s,n,ee.z,null)}for(var d=e.children,p=0,v=d.length;p<v;p++)je(d[p],t,n,r)}}function He(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;A.setupLightsView(n),!0===J&&ye.setGlobalState(I.clippingPlanes,n),r&&ae.viewport(U.copy(r)),i.length>0&&We(i,t,n),a.length>0&&We(a,t,n),o.length>0&&We(o,t,n),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function Ge(e,t,n,r){if(null===(!0===n.isScene?n.overrideMaterial:null)){void 0===A.state.transmissionRenderTarget[r.id]&&(A.state.transmissionRenderTarget[r.id]=new UN(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")||re.has("EXT_color_buffer_float")?MR:SR,minFilter:kR,samples:4,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));var i=A.state.transmissionRenderTarget[r.id],a=r.viewport||U;i.setSize(a.z,a.w);var o=I.getRenderTarget();I.setRenderTarget(i),I.getClearColor(V),(z=I.getClearAlpha())<1&&I.setClearColor(16777215,.5),I.clear();var s=I.toneMapping;I.toneMapping=rR;var u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),A.setupLightsView(r),!0===J&&ye.setGlobalState(I.clippingPlanes,r),We(e,n,r),ue.updateMultisampleRenderTarget(i),ue.updateRenderTargetMipmap(i),!1===re.has("WEBGL_multisampled_render_to_texture")){for(var c=!1,h=0,f=t.length;h<f;h++){var d=t[h],p=d.object,v=d.geometry,m=d.material,g=d.group;if(2===m.side&&p.layers.test(r.layers)){var y=m.side;m.side=ZI,m.needsUpdate=!0,qe(p,n,r,v,m,g),m.side=y,m.needsUpdate=!0,c=!0}}!0===c&&(ue.updateMultisampleRenderTarget(i),ue.updateRenderTargetMipmap(i))}I.setRenderTarget(o),I.setClearColor(V,z),void 0!==u&&(r.viewport=u),I.toneMapping=s}}function We(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,c=null===r?o.material:r,l=o.group;s.layers.test(n.layers)&&qe(s,t,n,u,c,l)}}function qe(e,t,n,r,i,a){e.onBeforeRender(I,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(I,t,n,r,e,a),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=ZI,i.needsUpdate=!0,I.renderBufferDirect(n,t,r,i,e,a),i.side=JI,i.needsUpdate=!0,I.renderBufferDirect(n,t,r,i,e,a),i.side=2):I.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(I,t,n,r,i,a)}function Xe(e,t,n){!0!==t.isScene&&(t=te);var r=se.get(e),i=A.state.lights,a=A.state.shadowsArray,o=i.state.version,s=pe.getParameters(e,i.state,a,t,n),u=pe.getProgramCacheKey(s),c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?le:ce).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Oe),c=new Map,r.programs=c);var l=c.get(u);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===o)return Ye(e,s),l}else s.uniforms=pe.getUniforms(e),e.onBuild(n,s,I),e.onBeforeCompile(s,I),l=pe.acquireProgram(s,u),c.set(u,l),r.uniforms=s.uniforms;var h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ye.uniform),Ye(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=l,r.uniformsList=null,l}function Ke(e){if(null===e.uniformsList){var t=e.currentProgram.getUniforms();e.uniformsList=nU.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ye(e,t){var n=se.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}ze.setAnimationLoop((function(e){Fe&&Fe(e)})),"undefined"!==typeof self&&ze.setContext(self),this.setAnimationLoop=function(e){Fe=e,Ne.setAnimationLoop(e),null===e?ze.stop():ze.start()},Ne.addEventListener("sessionstart",Be),Ne.addEventListener("sessionend",Ve),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==R){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ne.enabled&&!0===Ne.isPresenting&&(!0===Ne.cameraAutoUpdate&&Ne.updateCamera(t),t=Ne.getCamera()),!0===e.isScene&&e.onBeforeRender(I,e,t,D),(A=ge.get(e,C.length)).init(t),C.push(A),$.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Q.setFromProjectionMatrix($),Z=this.localClippingEnabled,J=ye.init(this.clippingPlanes,Z),(T=me.get(e,M.length)).init(),M.push(T),je(e,t,0,I.sortObjects),T.finish(),!0===I.sortObjects&&T.sort(W,q);var n=!1===Ne.enabled||!1===Ne.isPresenting||!1===Ne.hasDepthSensing();n&&be.addToRenderList(T,e),this.info.render.frame++,!0===J&&ye.beginShadows();var r=A.state.shadowsArray;_e.render(r,e,t),!0===J&&ye.endShadows(),!0===this.info.autoReset&&this.info.reset();var i=T.opaque,a=T.transmissive;if(A.setupLights(I._useLegacyLights),t.isArrayCamera){var o=t.cameras;if(a.length>0)for(var s=0,u=o.length;s<u;s++){Ge(i,a,e,o[s])}n&&be.render(e);for(var c=0,l=o.length;c<l;c++){var h=o[c];He(T,e,h,h.viewport)}}else a.length>0&&Ge(i,a,e,t),n&&be.render(e),He(T,e,t);null!==D&&(ue.updateMultisampleRenderTarget(D),ue.updateRenderTargetMipmap(D)),!0===e.isScene&&e.onAfterRender(I,e,t),Ee.resetDefaultState(),L=-1,O=null,C.pop(),C.length>0?(A=C[C.length-1],!0===J&&ye.setGlobalState(I.clippingPlanes,A.state.camera)):A=null,M.pop(),T=M.length>0?M[M.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(e,t,n){se.get(e.texture).__webglTexture=t,se.get(e.depthTexture).__webglTexture=n;var r=se.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===re.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){var n=se.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;D=e,N=t,P=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=se.get(e);void 0!==s.__useDefaultFramebuffer?(ae.bindFramebuffer(Ae.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?ue.setupRenderTarget(e):s.__hasExternalTextures&&ue.rebindTextures(e,se.get(e.texture).__webglTexture,se.get(e.depthTexture).__webglTexture);var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(o=!0);var c=se.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=e.samples>0&&!1===ue.useMultisampledRTT(e)?se.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,U.copy(e.viewport),F.copy(e.scissor),B=e.scissorTest}else U.copy(X).multiplyScalar(G).floor(),F.copy(K).multiplyScalar(G).floor(),B=Y;if(ae.bindFramebuffer(Ae.FRAMEBUFFER,i)&&r&&ae.drawBuffers(e,i),ae.viewport(U),ae.scissor(F),ae.setScissorTest(B),a){var l=se.get(e.texture);Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_CUBE_MAP_POSITIVE_X+t,l.__webglTexture,n)}else if(o){var h=se.get(e.texture),f=t||0;Ae.framebufferTextureLayer(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,h.__webglTexture,n||0,f)}L=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=se.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){ae.bindFramebuffer(Ae.FRAMEBUFFER,s);try{var u=e.texture,c=u.format,l=u.type;if(!ie.textureFormatReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ie.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Ae.readPixels(t,n,r,i,Se.convert(c),Se.convert(l),a)}finally{var h=null!==D?se.get(D).__webglFramebuffer:null;ae.bindFramebuffer(Ae.FRAMEBUFFER,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);ue.setTexture2D(t,0),Ae.copyTexSubImage2D(Ae.TEXTURE_2D,n,0,0,e.x,e.y,i,a),ae.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=Se.convert(n.format),s=Se.convert(n.type);ue.setTexture2D(n,0),Ae.pixelStorei(Ae.UNPACK_FLIP_Y_WEBGL,n.flipY),Ae.pixelStorei(Ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Ae.pixelStorei(Ae.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Ae.texSubImage2D(Ae.TEXTURE_2D,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?Ae.compressedTexSubImage2D(Ae.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ae.texSubImage2D(Ae.TEXTURE_2D,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&Ae.generateMipmap(Ae.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.max.x-e.min.x,s=e.max.y-e.min.y,u=e.max.z-e.min.z,c=Se.convert(r.format),l=Se.convert(r.type);if(r.isData3DTexture)ue.setTexture3D(r,0),i=Ae.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ue.setTexture2DArray(r,0),i=Ae.TEXTURE_2D_ARRAY}Ae.pixelStorei(Ae.UNPACK_FLIP_Y_WEBGL,r.flipY),Ae.pixelStorei(Ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Ae.pixelStorei(Ae.UNPACK_ALIGNMENT,r.unpackAlignment);var h=Ae.getParameter(Ae.UNPACK_ROW_LENGTH),f=Ae.getParameter(Ae.UNPACK_IMAGE_HEIGHT),d=Ae.getParameter(Ae.UNPACK_SKIP_PIXELS),p=Ae.getParameter(Ae.UNPACK_SKIP_ROWS),v=Ae.getParameter(Ae.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[a]:n.image;Ae.pixelStorei(Ae.UNPACK_ROW_LENGTH,m.width),Ae.pixelStorei(Ae.UNPACK_IMAGE_HEIGHT,m.height),Ae.pixelStorei(Ae.UNPACK_SKIP_PIXELS,e.min.x),Ae.pixelStorei(Ae.UNPACK_SKIP_ROWS,e.min.y),Ae.pixelStorei(Ae.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Ae.texSubImage3D(i,a,t.x,t.y,t.z,o,s,u,c,l,m.data):r.isCompressedArrayTexture?Ae.compressedTexSubImage3D(i,a,t.x,t.y,t.z,o,s,u,c,m.data):Ae.texSubImage3D(i,a,t.x,t.y,t.z,o,s,u,c,l,m),Ae.pixelStorei(Ae.UNPACK_ROW_LENGTH,h),Ae.pixelStorei(Ae.UNPACK_IMAGE_HEIGHT,f),Ae.pixelStorei(Ae.UNPACK_SKIP_PIXELS,d),Ae.pixelStorei(Ae.UNPACK_SKIP_ROWS,p),Ae.pixelStorei(Ae.UNPACK_SKIP_IMAGES,v),0===a&&r.generateMipmaps&&Ae.generateMipmap(i),ae.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?ue.setTextureCube(e,0):e.isData3DTexture?ue.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ue.setTexture2DArray(e,0):ue.setTexture2D(e,0),ae.unbindTexture()},this.resetState=function(){N=0,P=0,D=null,ae.reset(),Ee.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}return g(e,[{key:"coordinateSystem",get:function(){return nN}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e;var t=this.getContext();t.drawingBufferColorSpace=e===XR?"display-p3":"srgb",t.unpackColorSpace=TN.workingColorSpace===KR?"display-p3":"srgb"}},{key:"useLegacyLights",get:function(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}]),e}(),$U=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.backgroundRotation=new AP,e.environmentIntensity=1,e.environmentRotation=new AP,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:w(e)})),e}return g(n,[{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=er(b(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}]),n}(GP);var eF=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;d(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:l};var h=w(e);o=Math.floor(o),s=Math.floor(s);var f=[],p=[],v=[],m=[],g=0,y=[],_=a/2,b=0;function x(e){for(var t=g,n=new pN,a=new zN,s=0,u=!0===e?r:i,d=!0===e?1:-1,y=1;y<=o;y++)p.push(0,_*d,0),v.push(0,d,0),m.push(.5,.5),g++;for(var x=g,w=0;w<=o;w++){var k=w/o*l+c,S=Math.cos(k),E=Math.sin(k);a.x=u*E,a.y=_*d,a.z=u*S,p.push(a.x,a.y,a.z),v.push(0,d,0),n.x=.5*S+.5,n.y=.5*E*d+.5,m.push(n.x,n.y),g++}for(var T=0;T<o;T++){var A=t+T,M=x+T;!0===e?f.push(M,M+1,A):f.push(M+1,M,A),s+=3}h.addGroup(b,s,!0===e?1:2),b+=s}return function(){for(var e=new zN,t=new zN,n=0,u=(i-r)/a,d=0;d<=s;d++){for(var x=[],w=d/s,k=w*(i-r)+r,S=0;S<=o;S++){var E=S/o,T=E*l+c,A=Math.sin(T),M=Math.cos(T);t.x=k*A,t.y=-w*a+_,t.z=k*M,p.push(t.x,t.y,t.z),e.set(A,u,M).normalize(),v.push(e.x,e.y,e.z),m.push(E,1-w),x.push(g++)}y.push(x)}for(var C=0;C<o;C++)for(var I=0;I<s;I++){var R=y[I][C],N=y[I+1][C],P=y[I+1][C+1],D=y[I][C+1];f.push(R,N,D),f.push(N,P,D),n+=6}h.addGroup(b,n,0),b+=n}(),!1===u&&(r>0&&x(!0),i>0&&x(!1)),e.setIndex(f),e.setAttribute("position",new mD(p,3)),e.setAttribute("normal",new mD(v,3)),e.setAttribute("uv",new mD(m,2)),e}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(SD);var tF=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;d(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:u,thetaLength:c},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var l=Math.min(u+c,Math.PI),h=0,f=[],p=new zN,v=new zN,m=[],g=[],y=[],_=[],b=0;b<=a;b++){var x=[],w=b/a,k=0;0===b&&0===u?k=.5/i:b===a&&l===Math.PI&&(k=-.5/i);for(var S=0;S<=i;S++){var E=S/i;p.x=-r*Math.cos(o+E*s)*Math.sin(u+w*c),p.y=r*Math.cos(u+w*c),p.z=r*Math.sin(o+E*s)*Math.sin(u+w*c),g.push(p.x,p.y,p.z),v.copy(p).normalize(),y.push(v.x,v.y,v.z),_.push(E+k,1-w),x.push(h++)}f.push(x)}for(var T=0;T<a;T++)for(var A=0;A<i;A++){var M=f[T][A+1],C=f[T][A],I=f[T+1][A],R=f[T+1][A+1];(0!==T||u>0)&&m.push(M,C,R),(T!==a-1||l<Math.PI)&&m.push(C,I,R)}return e.setIndex(m),e.setAttribute("position",new mD(g,3)),e.setAttribute("normal",new mD(y,3)),e.setAttribute("uv",new mD(_,2)),e}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(SD),nF=function(e){_(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;d(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var u=[],c=[],l=[],h=[],f=new zN,p=new zN,v=new zN,m=0;m<=a;m++)for(var g=0;g<=o;g++){var y=g/o*s,_=m/a*Math.PI*2;p.x=(r+i*Math.cos(_))*Math.cos(y),p.y=(r+i*Math.cos(_))*Math.sin(y),p.z=i*Math.sin(_),c.push(p.x,p.y,p.z),f.x=r*Math.cos(y),f.y=r*Math.sin(y),v.subVectors(p,f).normalize(),l.push(v.x,v.y,v.z),h.push(g/o),h.push(m/a)}for(var b=1;b<=a;b++)for(var x=1;x<=o;x++){var w=(o+1)*b+x-1,k=(o+1)*(b-1)+x-1,S=(o+1)*(b-1)+x,E=(o+1)*b+x;u.push(w,k,E),u.push(k,S,E)}return e.setIndex(u),e.setAttribute("position",new mD(c,3)),e.setAttribute("normal",new mD(l,3)),e.setAttribute("uv",new mD(h,2)),e}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(SD);var rF=function(e){_(n,e);var t=k(n);function n(e){var r;return d(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new oD(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new oD(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new pN(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new AP,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return g(n,[{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(cD);function iF(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function aF(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var oF=function(){function e(t,n,r,i){d(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return g(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),sF=function(e){_(n,e);var t=k(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:zR,endingEnd:zR},o}return g(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case jR:i=e,o=2*t-n;break;case HR:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case jR:a=e,s=2*n-t;break;case HR:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,_=f*v-f*p,b=0;b!==o;++b)i[b]=m*a[c+b]+g*a[u+b]+y*a[s+b]+_*a[l+b];return i}}]),n}(oF),uF=function(e){_(n,e);var t=k(n);function n(e,r,i,a){return d(this,n),t.call(this,e,r,i,a)}return g(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(n-t)/(r-t),l=1-c,h=0;h!==o;++h)i[h]=a[u+h]*l+a[s+h]*c;return i}}]),n}(oF),cF=function(e){_(n,e);var t=k(n);function n(e,r,i,a){return d(this,n),t.call(this,e,r,i,a)}return g(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(oF),lF=function(){function e(t,n,r,i){if(d(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=iF(n,this.TimeBufferType),this.values=iF(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return g(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new cF(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new uF(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new sF(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case FR:t=this.InterpolantFactoryMethodDiscrete;break;case BR:t=this.InterpolantFactoryMethodLinear;break;case VR:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return FR;case this.InterpolantFactoryMethodLinear:return BR;case this.InterpolantFactoryMethodSmooth:return VR}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&aF(r))for(var u=0,c=r.length;u!==c;++u){var l=r[u];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===VR,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var c=o*n,l=c-n,h=c+n,f=0;f!==n;++f){var d=t[c+f];if(d!==t[l+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,_=0;_!==n;++_)t[y+_]=t[g+_];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:iF(e.times,Array),values:iF(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();lF.prototype.TimeBufferType=Float32Array,lF.prototype.ValueBufferType=Float32Array,lF.prototype.DefaultInterpolation=BR;var hF=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(lF);hF.prototype.ValueTypeName="bool",hF.prototype.ValueBufferType=Array,hF.prototype.DefaultInterpolation=FR,hF.prototype.InterpolantFactoryMethodLinear=void 0,hF.prototype.InterpolantFactoryMethodSmooth=void 0;var fF=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(lF);fF.prototype.ValueTypeName="color";var dF=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(lF);dF.prototype.ValueTypeName="number";var pF=function(e){_(n,e);var t=k(n);function n(e,r,i,a){return d(this,n),t.call(this,e,r,i,a)}return g(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,c=u+o;u!==c;u+=4)VN.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(oF),vF=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new pF(this.times,this.values,this.getValueSize(),e)}}]),n}(lF);vF.prototype.ValueTypeName="quaternion",vF.prototype.DefaultInterpolation=BR,vF.prototype.InterpolantFactoryMethodSmooth=void 0;var mF=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(lF);mF.prototype.ValueTypeName="string",mF.prototype.ValueBufferType=Array,mF.prototype.DefaultInterpolation=FR,mF.prototype.InterpolantFactoryMethodLinear=void 0,mF.prototype.InterpolantFactoryMethodSmooth=void 0;var gF=function(e){_(n,e);var t=k(n);function n(){return d(this,n),t.apply(this,arguments)}return g(n)}(lF);gF.prototype.ValueTypeName="vector";var yF=g((function e(t,n,r){d(this,e);var i=this,a=!1,o=0,s=0,u=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),_F=new yF,bF=function(){function e(t){d(this,e),this.manager=void 0!==t?t:_F,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return g(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();bF.DEFAULT_MATERIAL_NAME="__DEFAULT";var xF=function(e){_(n,e);var t=k(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return d(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new oD(e),r.intensity=i,r}return g(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=er(b(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(GP),wF=new gP,kF=new zN,SF=new zN,EF=function(){function e(t){d(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pN(512,512),this.map=null,this.mapPass=null,this.matrix=new gP,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hL,this._frameExtents=new pN(1,1),this._viewportCount=1,this._viewports=[new LN(0,0,1,1)]}return g(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;kF.setFromMatrixPosition(e.matrixWorld),t.position.copy(kF),SF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(SF),t.updateMatrixWorld(),wF.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wF),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(wF)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),TF=function(e){_(n,e);var t=k(n);function n(){var e;return d(this,n),(e=t.call(this,new eL(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return g(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*sN*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),er(b(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return er(b(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(EF),AF=function(e){_(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return d(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(GP.DEFAULT_UP),i.updateMatrix(),i.target=new GP,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.map=null,i.shadow=new TF,i}return g(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return er(b(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(xF),MF=function(e){_(n,e);var t=k(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return g(n)}(xF);var CF="\\[\\]\\.:\\/",IF=new RegExp("["+CF+"]","g"),RF="[^"+CF+"]",NF="[^"+CF.replace("\\.","")+"]",PF=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",RF)+/(WCOD+)?/.source.replace("WCOD",NF)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",RF)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",RF)+"$"),DF=["material","materials","bones","map"],LF=function(){function e(t,n,r){d(this,e);var i=r||OF.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return g(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),OF=function(){function e(t,n,r){d(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return g(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(IF,"")}},{key:"parseTrackName",value:function(e){var t=PF.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==DF.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();OF.Composite=LF,OF.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},OF.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},OF.prototype.GetterByBindingType=[OF.prototype._getValue_direct,OF.prototype._getValue_array,OF.prototype._getValue_arrayElement,OF.prototype._getValue_toArray],OF.prototype.SetterByBindingTypeAndVersioning=[[OF.prototype._setValue_direct,OF.prototype._setValue_direct_setNeedsUpdate,OF.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[OF.prototype._setValue_array,OF.prototype._setValue_array_setNeedsUpdate,OF.prototype._setValue_array_setMatrixWorldNeedsUpdate],[OF.prototype._setValue_arrayElement,OF.prototype._setValue_arrayElement_setNeedsUpdate,OF.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[OF.prototype._setValue_fromArray,OF.prototype._setValue_fromArray_setNeedsUpdate,OF.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);function UF(e){var t=(0,r.useRef)(null),n=new $U;n.background=new oD(2105376);var i=new eL(75,window.innerWidth/window.innerHeight,.1,1e3);i.position.z=5;var a=new ZU({antialiasing:!0,alpha:!0});return a.setSize(window.innerWidth,window.innerHeight),a.setClearColor(0,0),(0,r.useEffect)((function(){t.current&&t.current.appendChild(a.domElement);var e=document.querySelectorAll(".tag"),r=new GD,o=new GD(1.2,.2),s=new eF(1,.6,1,6),u=new nF(.7,.4,6,10),c=new tF(.3,5,4),l=new eF(.3,.3,1.3,6),h=new rF({color:5796607,flatShading:!0}),f=new jD(r,h),d=new jD(o,h),p=new jD(s,h),v=new jD(u,h),m=new jD(c,h),g=new jD(c,h),y=new jD(l,h);f.position.set(3,.3,0),d.position.set(3.2,-3.3,0),p.position.set(2.4,2,0),v.position.set(2.2,-1.6,0),m.position.set(3.6,1.8,0),g.position.set(1.7,0,0),y.position.set(1.3,3.2,.5),n.add(f),n.add(d),n.add(p),n.add(v),n.add(m),n.add(g),n.add(y);var _={x:null,y:null},b=new zN(0,0,5);window.addEventListener("mousemove",(function(t){_.x=t.clientX/window.innerWidth*2-1,_.y=-t.clientY/window.innerHeight*2+1,b.x=.3*-_.x,b.y=.3*-_.y;var n,r=A(e);try{for(r.s();!(n=r.n()).done;){n.value.style.transform="translate(".concat(10*_.x,"px, ").concat(10*-_.y,"px)")}}catch(i){r.e(i)}finally{r.f()}}));var x=new MF(16777215,1);n.add(x);var w=16777215,k=new AF(w,20,6,60,1,1),S=new AF(w,20,6,60,1,1);n.add(k),n.add(S),k.position.set(2,3,2),S.position.set(-2,-3,0),S.target.position.set(0,0,0),n.add(k.target),n.add(S.target);return function e(){requestAnimationFrame(e),f.rotation.x+=.009*_.x,f.rotation.y+=.003,d.rotation.x+=.009*_.x,d.rotation.y+=.004,p.rotation.x-=.009*_.x,p.rotation.y+=.006,v.rotation.x+=.009*_.x,v.rotation.y-=.002,m.rotation.x+=.009*_.x,m.rotation.y-=.002,g.rotation.x+=.009*_.x,g.rotation.y-=.001,y.rotation.x+=.009*_.x,y.rotation.y-=.005,i.position.lerp(b,.1),a.render(n,i)}(),window.addEventListener("resize",(function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)})),function(){a.domElement.remove()}}),[a,n,i]),(0,_I.jsxs)("div",{className:"canvasContainer",children:[(0,_I.jsx)("div",{className:"canvas",ref:t}),(0,_I.jsxs)("div",{className:"tags",children:[(0,_I.jsx)("div",{className:"tag",children:"Make"}),(0,_I.jsx)("div",{className:"tag",children:"Intelligent"}),(0,_I.jsx)("div",{className:"tag",children:"eXperience"})]})]})}function FF(){var e=[{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIuSURBVHgB7ZtNUiJBEEa/rJ6JmJkVc4OZE8ANZE4gS8aNeAIJDfe4NjTwBqyUpd5Ab8AN1Bu4dEOVmW03oiFGawfdXWm+iKb4XTwqM6uISgDDUAVBGf390A0Bmwnh9uyYTl+//g0K6A1D6wdhSIRdlm3JLPqA0VvvjVY4lXTocYxuI6Arz4UCn4tOOA9ZBwxYsFXIcomohLf2wy6H6lhC9oOeC2oXltD8lWDb812etYu3Ck0Oy7ZQklqEJSzhOe8cNiT/fDZdLH2FNVOJcFpgEnQWuSczVSYuS7B2Yck7Fhzly0UNji9wKEF/GP7098LgvfdI3qXVtCEUnuE8LPkbas+BruPcWxKZIBJWCsvs8fyLVFsKC+9iOhKPXFjQhND8LKtn2OFGBlrc6KBUDseICWvHhLVjwtoxYe2YsHZMWDsmrB0T1o4Ja8eEtWPC2jFh7Xw54dVHLR5/HfHBGS3OlbpQwErh6ZhueZDrUh7L6eHP72iTR0faEyjwAXeDjkGLUvi49GJM9zxcZ1fah7E1DCLfQUSU6gA4G9OMhxkiYv1Fy+MODWLtwlwLJg8ev11AD9IpENK6UBuVdPFk+X+ZXfh/EDb8HL20bYKqrQG19GmdH1Fe/J5aK8BLn8NmFW0UtXfiZcvfBBU1xtjWsslMT+iQknTHNyHgHp8guvbhpfzf4fwfIHnuly5C1CEtS970mP7Jvp+vUZElT91/HmTJC3MM+IfP7L1WZMMw4uQRHmyl37NjcxAAAAAASUVORK5CYII=",title:"Exploration",information:"\uc0ac\ub78c\uc744 \ud0d0\uad6c\ud558\uace0 \uc0c8\ub85c\uc6b4 \uacbd\ud5d8\uc744 \ub9cc\ub4e4\uc5b4 \ub098\uac11\ub2c8\ub2e4. "},{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQoSURBVHgB7ZpBVtswEIZHbt9rlz2CuQncgG54YdVwggZ6gCYHKDEnwN0U6KbpCUhv0J4AjsCSDVZnhE3HsmxLluy47/lbEBE5jn+NNDPSBGBiYmLiP0LQn9knuQ8SbmG8pNfn4oQaszN5hy9x5YoM9q4TcY/9c/zvsq4/ovb1F7Glm8JYyWBFL7mY2HBFSmLy9uem/ojfFM39ACNDAiSNYiTcFwNyfCYXoA2I0pT3Ey+C6aZ0cxgTKEZkcEHN2alcgsG6xYDMFjLG9sdKf1YaMGZh5C3dnEZsJKB1loUY/OdD5QJ81pu1UAOCSsj6sd6Pn1/xt0qC00Q8CAmnMAbwYa/W4qtqm8SoS4CmMKgBAZjr/TRg+nuR/sZVIjZ45RZ2jMgF1IlBUrTuT9V6ZfDKErYvA8aIwMwKdkuKD/tLtSKj1y17bgn7lX4JJ6aPGQVTmBK7dGDlMDQ39C9tw5BOnYXhza7CVJsY5oiMnpuFKRO1gsmBDR6muJiaJKNwRLS2hTCEoXLcrlArmMB0bjVkmOJiwGzdLffcKO6d1v8vTNXQKDi/4gSGgIchodZtbLjmOZ92CEM6rYJVnj1EmJJwQC95ktHsiKLqRgetvTGFIZ12C9NFT70nI1xMY75cu7Yzu2e0EvwtEb97C1NcTMNUpQE5XEhas05hSMdKMNFbmJLNU5Wv7bcCKruhtjCkYy2YwtRTFjgDswhDUsCh6q9Z24X1wRJrwcT3RCQhw5TmVY1T9eZc/FGtmrVt46g4ToLzTwQJU9yrmjImvnFXR1CGtV3sllxwFhwqTBVetW6vW9q4S8NuiO+WHHC3MPHkbWU9DMWlXou1DR39SSfB+cMuoSsZPE/lloypNsXM3BwVp5uF4fk4qGuYkhH8OKIDN/NeNy3WtqgLQwBOjoojwIOjhVxEEawhJMX5Mlk3gju9G4+g5q6emdPZwoQKUyHzbD5VA4UhHS/BOWGSETZV6046iiTEB2/B+XHQBjzRMqbmJMSDEBammHnqlWezqWqqHigCpbVBBHtXLdhe2FQ98AlDOkEEEx5hqjUJeQS4gEAEE6wO/TLHgwLLvfAG7w2BCCaYQEulLmGqdMJorh54hyGdoIJz7JwLO2FsqB4cQGCCC7YtrmtbO69jGxf6sLBNcf1la9e2Fw5NL4JbwxRzVMbqQdZcPfChHwtDQ3Edqwc8DJmqB3oROyReu6U2jhfykLaClQ4UjWJXpl8O+e6G2uhVMIHnUbdGD2yCrL8WwT0zp7cpzbCfnrL/Olbvgh2K62lfjoozhIXbqxaO1QMfBhHcVlxvK2KHpHenxcEk4w6/MS69SWFoLfZgIAaxMPu2ilMSPse9HRjUwgQPU1RuwWOb9zAgw1oYysV1kY3kV399g+dWa9wSXsIOeA07gMLUo55DT0xMTExU+QtfpR3TGHKD+wAAAABJRU5ErkJggg==",title:"Enthusiasm",information:"\uc5f4\uc815\uc801\uc778 MIXER \ub4e4\uacfc \ud568\uaed8\ud569\ub2c8\ub2e4."},{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAN5SURBVHgB7ZnLcdpQFIbPlbNwdi5B7iCuIFBB7EUck02gAgtcgEkBAaUCk42BbHAqAFdgOgglkF2yiG7+I1CG4aHnfQCjb4YZHhLo6PznCVFJSUlJiT0+evJN3OcOHRG1lvSkQ+O4Y17REXDjSZdO6EFKqiQde/AG39zJipA0grFnaY4/WIMvPXn2WlAbht7KDOftjOH3CcFvE05Mpw69SEG3lJGdBp849O6mJX+G8bFHrCQml3KQlKVdfPnLNX6ELMM3HvE6hny7eKSK120kliWBL8dBXXj7geOGLBAmJtx4SpGFk8hSh+scNyYlzje41pQ+DB0X8eoqWRsPF2dwXLdJM0USUxz5Oi2H7lniurxdNDHFUaS1rOPsscrypSoxxVG0l3ZPFnHdpoKoTExxqOm0WOJN+RYX2xj4Ypbl1LwdU17UTUsCnoHErz15mfYUXYkpDtXjoes4NEojcZ2JKQ49w8Mii3+igKrrEs8yyum5NH1wzR7X7mD4Ghjn5mQJ3RsPF57sQb7d6A32eL8jrvC0TRYwsuJB9vXWJ69BR3yG5M/x4YwMYnKntTF5sbdPJV1gQPHJEEaXeNsmr54v5pB4E95umPC2ra3lxuQFb/dgcBV3ZUIasbmm3Zi8WOKDL6JKGhOa/b00avaHlhyZSmh7sYhHbF9yzYbRlei9KKHhaY8Usk//PLjrRnNCQ5PyixSyP3tpyBeervd98cwvWeIYKkZ4KF0X74fBkia/JV09waP8kqeoAEOI0DBYWDcYrac37Iqv0WueogLUatKEPYMhYQdeffTFdPXtv0H4J8B8X1c8eelBwhfrxjLffeHLANlZU9dl1MOIyXkgqb0q4W0sZ+hztKD3pLgJMedheIw9l2TsKssGRGmPbWo89FnCWRd8TNRjox5PSQFaJc0SxsV6g674RgVY3qgLFRLX5mGUmylLuF/Q2FVCiQtMVAUkrsVgljBiNZeEk8A0NQklTvREOVBqMEsYsVYZ8kCvkSJ7MXUGoz1cSviZDJFnjFRisFwkpqoOCScR/iZvSlKOkcUM5gmHJZyhtuog3JR0RCMIqBlWhhhyG8xJg2urSQkn8b8tjSFzHY7aw4Flr+4iKayyGbyQ8NVwS9N/KKSWdNQePh6wsUyih9NOOIdCrMHcHtJCwjM6EnZK2gnoxx9JVmprSUlJScmSf8c3npy2TgFbAAAAAElFTkSuQmCC",title:"Challenge",information:"\uc2e4\ud328\uc640 \ub3c4\uc804\uc73c\ub85c \ub514\uc790\uc778\uc758 \uacbd\uacc4\ub97c \ub113\ud600 \ub098\uac11\ub2c8\ub2e4. "},{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMoSURBVHgB7ZlBdtowEEBH3qRLjkBvkJ6g4QZh00e6KbkBJAcIXCDhBqWbwg5uQHuCcgSOkF1fNlZmbOQYY1mSLVnOi/57PCe2BuZjSZYGgEAgEAgEtBnd8ytwSAQdYjTlM+CwG03w6AgGHSGRZfCQnYhhvl6wGVimE8JnsgIH0t6FpbICy9JehZWyAovS3iatE1kOB/zmt9LGETzYmsgaC3+b8GswpCiLr8HqkQ3x+EsaZEm6kTAlHkWwGd3xnyYxRVnsrgf6d/3Exq6lawsXxt9YJ5EqWYFr6VrC+cRx7D3rJKIjK3ApbSycT5xz2P+P4XOWnCQRPDfWlRW4kjZ6LBVlXzDx7YI9H68t8dqP5E05jFdPLEk2kY0gHeOasnlupvwfZ3ApbWD4yNIW1umSeek4hiF2n14TWWI84b0XBjtb0lrCJuNPSHMc24yENWJU2JRWCpvIZjH3fIftrtIQFI/hS11ZgS3pykmrliyN2aMswdJurV4+KljiXHGBn4/zw17aSGMik97h2rJizJbkvH5kt9CQpne6VNiBrMC79JmwQ1mBV+kT4RZkBd6kM+EWZQVepBNhD7KC1qWZR1lBq9IRyvLsRGdqmObQgj5WN+Npl77jdIdnx5MHjHxXXfoa7+4F3l1WfXdn6DR/m7Tal25dlv48fSy1J+1FljhfeLiX9iZLlC8tTwVsSnuVJeSbB/vS3mWJygeRRelOyBKV+2EMXOIbiET72Jp+yuwrYxj8KSQxh4bYkCWUVUsSwIrF8FiOVUonJR4sADBRvk0/RflFVWFLNk1Fg9WCbVF6oJIW9SyWlnUGpr2jDJuyhHZd+veC7fPSuEbbUDLielGW2tcZEkVsyhLGq+fvE37JMXFcgPdEbfoTg0VRNh9TZ/JL4nJl31IMZYla24W8NEmKY5mswHRB40KWqL0/Sromdjd89VWyWYymtCtZotGGkKRxfG2wdHqrks1iFNIuZQkvO2CZtGtZwtuW/0yaw1/XsoTXGkdBWo4lWcJ7UUcpbVGW6EQVSyptWZbohDBxJu1AtnOQNL44Pu4a/9r4briZ8q8QCAQCgQ/KK0zmBd4i8F1PAAAAAElFTkSuQmCC",title:"Combination",information:"\uae30\uc220\uacfc \ub514\uc790\uc778\uc758 \uacb0\ud569\uc744 \ud1b5\ud574\uc11c \ud601\uc2e0\uc801 \uacbd\ud5d8\uc744 \ub9cc\ub4e4\uc5b4\ub0c5\ub2c8\ub2e4."}],t=l((0,r.useState)(0),2),n=(t[0],t[1],we()),i=(0,r.useRef)(null),a=((0,r.useRef)(null),l((0,r.useState)([]),2)),o=(a[0],a[1]);(0,r.useEffect)((function(){var e=[];gI.collection("project_works").get().then((function(t){t.forEach((function(t){e.push(t.data())})),o(e.slice(0,3))}))}),[]);var s=l((0,r.useState)([]),2),u=s[0],c=s[1];return(0,r.useEffect)((function(){var e=[];gI.collection("news").get().then((function(t){t.forEach((function(t){e.push(t.data())})),c(e.slice(0,6))}))}),[]),(0,_I.jsxs)("div",{className:"PageWrapper",children:[(0,_I.jsxs)("div",{className:"mainContainer",children:[(0,_I.jsx)(UF,{}),(0,_I.jsx)("div",{className:"textContainer",children:(0,_I.jsxs)("div",{className:"hero",children:[(0,_I.jsxs)("h1",{children:["MIX ",(0,_I.jsx)("br",{}),"LAB."]}),(0,_I.jsx)("h2",{children:"Interactive media:EH"})]})})]}),(0,_I.jsxs)("div",{className:"PageContainer",children:[(0,_I.jsx)(LI,{ref:i,className:"identity",subText:"MIX Lab`s Identity",h2:"MIX LAB \ucd94\uc9c4\ubc29\ud5a5",information:["MIX LAB\uc758 \uc544\uc774\ub374\ud2f0\ud2f0\ub294 \ud0d0\uad6c\uc640 \uc5f4\uc815, \ub3c4\uc804, \uacb0\ud569\uc73c\ub85c ",(0,_I.jsx)("br",{})," \ucd1d 4\uac00\uc9c0\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."],align:"center",type:"center",children:(0,_I.jsx)(wI,{data:e})}),(0,_I.jsx)(LI,{className:"works",subText:"Our Works",h2:"MIX LAB\uc758 \uc791\ud488",type:"right",align:"left",information:["MIX LAB\uc5d0\uc11c \uc9c4\ud589\ub41c MIXER\ub4e4\uc758 \ud504\ub85c\uc81d\ud2b8 \uc791\ud488\ub4e4\uc744 ",(0,_I.jsx)("br",{}),"\ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."],width:"408px",onClick:function(){n("/project?scrollToTarget=true")},buttonText:"\ud504\ub85c\uc81d\ud2b8 \ubcf4\uae30",children:(0,_I.jsx)(BI,{})}),(0,_I.jsx)(LI,{className:"recentnews",subText:"RecentNews",h2:"MIX LAB\uc758 \ucd5c\uadfc \uc18c\uc2dd",information:["MIXER\ub4e4\uc758 \ub0b4\uc678\ubd80 \ud65c\ub3d9 \ubc0f MIX LAB\uc5d0\uc11c",(0,_I.jsx)("br",{}),"\uc9c4\ud589\ub41c \uc5f0\uad6c\uad00\ub828 \uc0c8\ub85c\uc6b4 \uc18c\uc2dd\uc785\ub2c8\ub2e4."],align:"center",type:"center",children:(0,_I.jsx)(jI,{data:u})}),(0,_I.jsx)(LI,{className:"information",subText:"More Information",h2:"MIX LAB \ub354 \uc54c\uc544\ubcf4\uae30",information:["MIX LAB\uc758 \uad6c\uc131\uc6d0\uacfc \uc9c0\uc6d0 \ubc29\ubc95, F&Q\uc785\ub2c8\ub2e4."],align:"center",type:"center",children:(0,_I.jsx)(WI,{onClick_people:function(){n("/people?focusToPeople=true")},onClick_apply:function(){n("/intro?focusToApply=true")},onClick_qna:function(){n("/intro?focusToFnq=true")}})})]})]})}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:XI}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=XI);var BF="MainLayout_mainlayout__XEPkA",VF=function(){return(0,_I.jsxs)("div",{className:BF,children:[(0,_I.jsx)(PI,{}),(0,_I.jsx)(Oe,{}),"/"!==window.location.pathname&&(0,_I.jsx)(qI,{})]})},zF={question:"Category_question__uHoQM",active:"Category_active__wgHVz",list:"Category_list__SlQ9x",OnlyText:"Category_OnlyText__i0Qxv"},jF="Dropdown_dropdown__GLuef",HF="Dropdown_active__WwX0F";var GF=function(e){return(0,_I.jsx)("div",{className:"".concat(jF," ").concat(e.visibility?HF:""),style:{maxHeight:"".concat(e.maxHeight,"px")},children:e.children})};var WF=n.p+"static/media/AccordionArrow.ccc158e70b0b3063c4c6aa1dbbeb14da.svg",qF="AccordionButton_accordionButton__e5mnD",XF="AccordionButton_active__bwXpI";var KF=function(e){return(0,_I.jsx)("button",{className:"".concat(qF," ").concat(e.dropdownVisibility?XF:""),children:(0,_I.jsx)("img",{src:WF,alt:""})})};var YF=function(e){var t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(0),2),o=a[0],s=a[1],u=(0,r.useRef)(null);return(0,r.useEffect)((function(){s(n?u.current.clientHeight:0)}),[n]),(0,_I.jsxs)("div",{className:"".concat(zF.Category," ").concat(n?zF.active:""),children:[(0,_I.jsxs)("div",{className:zF.question,onClick:function(e){return i(!n)},children:[(0,_I.jsx)("p",{children:e.question}),(0,_I.jsx)(KF,{dropdownVisibility:n})]}),(0,_I.jsx)(GF,{visibility:n,maxHeight:o,children:(0,_I.jsx)("div",{ref:u,children:e.Hyphen?(0,_I.jsx)("ol",{type:"A",children:(0,_I.jsx)("li",{children:e.answer})}):(0,_I.jsx)("div",{className:zF.OnlyText,children:e.answer})})})]})};var QF=function(e){return(0,_I.jsx)("div",{className:zF.list,children:e.QnA.map((function(t,n){return(0,_I.jsx)(YF,{question:t.question,answer:t.answer,Hyphen:e.Hyphen},n)}))})},JF={Background:"Card_application_Background__TK3XA",wrap:"Card_application_wrap__mQvyI",ApplycardTitle:"Card_application_ApplycardTitle__bk+OS",ApplycardContent:"Card_application_ApplycardContent__0M-ig",ApplycardButton:"Card_application_ApplycardButton__-mgN3",ApplycardContainer:"Card_application_ApplycardContainer__NC+Az"};var ZF=n.p+"static/media/left.de47bbfe7ee7b89b7402683aa0ad935d.svg";function $F(e){function t(e){return(0,_I.jsxs)("div",{className:JF.Background,children:[(0,_I.jsx)("h1",{children:"\uc0c8\ub85c\uc6b4 MIXER\uac00 \ub418\uc5b4 \uba4b\uc9c4 \uacbd\ud5d8\uc744 \ud568\uaed8\ud558\uc138\uc694."}),(0,_I.jsx)("h5",{children:"Become a new MIXER and share great experiences."})]})}function n(e){var t=e.data.content.map((function(e){return(0,_I.jsx)("li",{children:e})}));return(0,_I.jsxs)("div",{className:JF.ApplycardContainer,children:[(0,_I.jsxs)("div",{className:JF.ApplycardTitle,children:[(0,_I.jsx)("h4",{children:e.data.title}),(0,_I.jsx)("h5",{children:e.data.subTitle})]}),(0,_I.jsx)("div",{className:JF.ApplycardContent,children:(0,_I.jsx)("ul",{children:t})}),(0,_I.jsxs)("div",{className:JF.ApplycardButton,children:["\uc9c0\uc6d0\ud558\uae30",(0,_I.jsx)("img",{src:ZF,alt:""})]})]})}return(0,_I.jsxs)("div",{children:[(0,_I.jsx)(t,{}),(0,_I.jsxs)("div",{className:JF.wrap,children:[(0,_I.jsx)(n,{data:{title:"\uc11d\uc0ac \uc5f0\uad6c\uc6d0",subTitle:"Matser Student Researcher",content:["\uc5f0\uad6c \ud65c\ub3d9 : MIX LAB\uc758 \ud504\ub85c\uc81d\ud2b8\uc5d0 \ucc38\uc5ec\ud558\uc5ec \uc2a4\ud130\ub514\uc640 \uc5f0\uad6c\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4.","\uc9c0\uc6d0 \ubc29\uc2dd : E-mail \uc9c0\uc6d0(@tukorea.ac.kr) \ubc0f \uba74\ub2f4","\uc9c0\uc6d0 \uc2dc\uae30 : \ubaa8\uc9d1 \uacf5\uace0\uc77c","\uc9c0\uc6d0 \uc790\uaca9 : \ub514\uc790\uc778\ud559\uc0ac \ud559\uc704\uc790"]}}),(0,_I.jsx)(n,{data:{title:"\ud559\ubd80\uc0dd/\ud504\ub85c\uc81d\ud2b8 \uc5f0\uad6c\uc6d0",subTitle:"Undergraduated Student Researcher",content:["\uc5f0\uad6c \ud65c\ub3d9 : MIX LAB\uc758 \ud504\ub85c\uc81d\ud2b8\uc5d0 \ucc38\uc5ec\ud558\uc5ec \uc2a4\ud130\ub514\uc640 \uc5f0\uad6c\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4.","\uc9c0\uc6d0 \ubc29\uc2dd : E-mail \uc9c0\uc6d0(@tukorea.ac.kr) \ubc0f \uba74\ub2f4","\uc9c0\uc6d0 \uc2dc\uae30 : \ubaa8\uc9d1 \uacf5\uace0\uc77c","\uc9c0\uc6d0 \uc790\uaca9 : \ub514\uc790\uc778\uacf5\ud559\ubd80\uc0dd \ubc0f \ub2e4\uc591\ud55c \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ud0c0 \ud559\ubd80\uc0dd","EH \uc0c1\uc8fc \ubc0f \ube44\uc0c1\uc8fc \uc5f0\uad6c\uc6d0\uc73c\ub85c \uad6c\ubd84\ud558\uc5ec \ubaa8\uc9d1"]}})]})]})}function eB(){var e={subText:"Overview",h2:"What is MIX LAB",information:["MIX LAB\uc740 \ud55c\uad6d\uacf5\ud559\ub300\ud559\uad50 \ub514\uc790\uc778\uacf5\ud559\ubd80\uc758 \uc778\ud130\ub799\ud2f0\ube0c \ubbf8\ub514\uc5b4 \uc5f0\uad6c\uc2e4\uc785\ub2c8\ub2e4.",(0,_I.jsx)("br",{}),"\uc6b0\ub9ac\ub294 \ub514\uc790\uc778(Design)\uacfc \uad6c\ud604(Making)\uc744 \ud1b5\ud574 \uc778\ud130\ub799\ud2f0\ube0c \ubbf8\ub514\uc5b4\uc5d0 \uc758\ud55c \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \uc5f0\uad6c\ud569\ub2c8\ub2e4.",(0,_I.jsx)("br",{})," \u201cMake Intelligent eXperience\u201d ",(0,_I.jsx)("br",{})," \uc0ac\ub78c\ub4e4\uc774 \uc601\ub9ac\ud55c \uacbd\ud5d8\uc744 \ud560 \uc218 \uc788\ub294 \uc11c\ube44\uc2a4\ub97c \ub9cc\ub4e4\uace0\uc790 \ud558\ub294 \ubaa9\ud45c\ub294 MIX Lab.\uc758 \uc2dc\uc791\uc774 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."]},t=[{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGaSURBVHgB7dpBTsJAFAbg/01YuPQIPQI3AG7gytRdj4Aa1+ABDHCDukJXXqHegBvIEbgAfT6NC0NmSnVi7TzelxDCzBD6Q/toMg8wxhjTX9Q0md/yWJ5mxBgycI6+Y1TkUK4f6DG0JBg4v+a5zM6Qohr3T0ua+6a8gfMpZ3B4Q8pqTCR0dTjsfGvZYYHUBc5OFxgcI3FMGPrGB97FngJFhAI9xozy+2sKFNkBWmqqfH2Q33DZZp3DibHA2llg7SywdhZYOwusnQXWzgJrZ4G1s8DaWWDtLLB2Flg7C6zdyQVuvZkmm1Vpb5B/CQXeyiM7GMuQEGJsfOOhU7pE4upABm/gsxor2RXfIlVy7M8LWvmmvIHLJe3kTZMkQzOqz2MPaOzT+nB1xyPeH+35KPD31/gWDZeaI+y4xma9oFc0OBr4mE77uRr6r9qKCnw55Qvn8IIOSfUt5Ff8db9J1I2H+4d+LibMESH2TitD9zJEsHvpn5ACsEPHOPIzowLvpWqiY1RjiQjxf0tTLuRrG6EDUqGrmAptjDHJeQeS2V+3gAtW1gAAAABJRU5ErkJggg==",title:"Mobile&Web Service Design",information:"\uc0ac\uc6a9\uc790 \uc870\uc0ac \uc804\ub7b5 \uad6c\ucd95 \uc2dc\uc7a5 \uc870\uc0ac\ub97c \ubc14\ud0d5\uc73c\ub85c \uc81c\ud488\uacfc \uc11c\ube44\uc2a4\uc758 \uc0c1\uc6a9\ud654\ub97c \uc704\ud55c \uc2dc\uac01 \ub514\uc790\uc778(Visual Design GUI)\ubc0f \uc0c1\ud638\uc791\uc6a9 \ub514\uc790\uc778 (Interaction Design) \uc218\ud589"},{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASrSURBVHgB7ZpPcts2FMY/UGmr7HSDqCeocoLYJ4iy6NTtpvIJLNsHsHyAxNIJom5SZ7qIe4LIJ7B6gugG0apxZiIgHygxoUgQBP/IQRL+ZjSmCBjEhwc8PDwRaGhoaPiKEPCUg6HqooXnUNjjZ8bP+eVYzFARLwWHYgO85mV3q6AG4d4JzhQbp4JwrwQ7iY1TQnghwf2h6rQFhgp4LAQ6m4cuRICpWuGaD164thVbo11+nQUSExngFdJip5u/g8zGCgh3Fvz7iRryzxnFdjKqLFYST/4Zizlc2jtVN0qhl1NtevlMHOqLjfXPYBHOvl29lzi8GotlVp0ADhwcqxEbu7CI1XRbAW7YsT04UESsRs+e8LvEz/hs9S1ovf5PLfxpazRXcDiyIhxZJxSnpZ76uW3a2RIbJ084l0amdcNy5CBa4bpyhqPcaQNHKE+m2DhG4VzL7xT+hb1/2fw6VD09TVMFdFRK4CpsQKHPVrrbxViy4TGyH9phnaGhyElsFe7ZCn9o4ZFUiZsUy8/+y4u1R+b0nNBj38TXt1hfj7LaVeZ7y5c7FquxTmmKTa9FQSvEth99rb0jKsJBWuIOcPLS3xJWwYEwjLoO5tOY7nmJ1WkdnCp9UnltKJquWpi0JDp0Wkec0n1DnQXsdFN3ZBgtjbBDciMtBh1vkl7YAau33URNb4yFBUVH4S4vH9F5zv9+Jo5t9fPXMGNUFEWW+J8Iho8ckFFeNS1UR4D39cDpwEhgT291DFmrRVoc7Skbm6EYXVthO88jW0QnhSbDXaXsz3by0u0VnhQSnROKThnci4Ki84SG6BhB4i9Yu1aA307UK2F2UGkk9m3HNYoZUNRzbDoaBBhz3x8b2jnXveT6PMo6vOjBUxLjW2BiOylpCu3DbDgdp+rzsMlaOVYOlwrjYMbqe7cKD188FRN+PzT08CzLouFzJUbv2A7bO88Tu/kfdwacVrcB3hoaGRtj4xwrm9iyfAZFLJqkkIX12jOuZYV5GSub2FjeuKWVsWiS4qGlSguWAj1lOh1xq3BNCMRJiq5DaKytYpiiL33Suc/OvKcHTa01DtDlhdhHCXSAwvD2l/8VrquIjFMqa8n81tukMOazHvLs/BimY2GJtbwrSp2WTMfBgGfnNjOPda3lXVH2eHidvCEk+tqp1bmWd0EpwbRkysJM+fTCQN5zK5cSbNqeNsm7nu9WLp3x4Dl4nryn1k4LPlu5tGBO4VSYGcXZPlu5tODLp2JmsGL3j1P1QF/4auVKSTyJdNS18tzKlQS3DHG13p6iax+tXEnwj6v0YTvanvS1j1auJDjMXIhtbx1tT9F336xcPRFvOD1F25PGNytXFmzbniJ8snJlwUzwzW3bk8YnK1cWHIoR6ahr5amVS52HU7/gB+FrBqOte+sXTbZSNSIIM4+p3Bczln35Af8l7zNntazr4P+pD0UqO7zYsgumtxLHdQm/51rx4EQN9IstuHsG7fVvW6XSREmc17BOhONLUaNzcxbs8JrRTmHC/gFqoHkDIJPivyDWin61ETXgLDhY4RhfCibhi7zHacNZ8IuxmAfMPd+xpRf0HUP9awMaGhoavkc+AudVKYuAX3K6AAAAAElFTkSuQmCC",title:"AI&ML Utilized Design",information:"\uc778\uacf5\uc9c0\ub2a5\uacfc \uba38\uc2e0\ub7ec\ub2dd\uc744 \ud65c\uc6a9\ud558\uc5ec \uc81c\ud488 \ubc0f \uc11c\ube44\uc2a4\uc5d0 \uc801\uc6a9 \uac00\ub2a5\uc131\uacfc \ub514\uc790\uc778 \ubc29\ubc95\ub860\uc5d0 \ub300\ud574\uc11c \ud0d0\uc0c9"},{Symbol:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWuSURBVHgB7VpLcttGEO0ZpipSVj4CfYJYJwh1AtmLuGRtTJ3AoJ294H1iUicQtbHkbMycQPQJ5BuIOUGUTSIvhMnrIZCiyMF8ADQXiV8ViyxgCKLZ06+7X4PoK/7bULQlHL4xAzL0Eh8HePX5mDH0WSn6TAWdX07UnLYAcYOfZubRrqYzg4+BpVMY/haGL0gQogYfZqZPmq6o9GgEFjB6X9JoTYIwij5SvLGMfvkdMYgZfDgyOeLzCSWCv4OdcUJCkPOwsgS1CUNzrSjjF9bMnUs0ZRz7JIBvSAAv3pinYOD+xomCcsTn25Ujp4evrTfz1WUglke7PTrAx3PqGDIeNvSD4+h0zViLy3c45vB0YdLDIQYiBhtH7GpDs/ovOD3ZJwGIsvQqkIdva08qpKP1Q4ZEYljGw8ZhnPZ4zMh40wURgzVteswUNKxbj1T0amM9l5wCkIrh3zYOKhogv+brhzlfGwdB9Yw7ZbWFSGk5RA79oukGceuKwwVeUz5nCxNjm4mHMLS4HKvHJACxWvp5ZjKtaUwNAMIaXoxV5znYXpsEgZbwyulBH7CV4d19EoJoWtq5p2fwVjT5cH98Z+gZCWIrAsCL12aMmM18a3B+8gX98GyibkkQ21M80BsrxPS6EIAbmP1d0LG0oRW2VmlxU++qtvjYtoxlbMXDVvno0VkdgcHomSpoJC3vMEQN5p52B30vV1I1OfkhlppWToIQM7hUKc8ovethXetYSsXs3GCrUirKjaM+ToSIitmpwUg/nHpOorZvHBYIh/zil+6qrk4MDpFSW7BYb1DEdOHtVgZXpISrnAR+5Bbt4aRMgvna6XztvR4dkFrjPMyktKPpOmQs18Ywds+lZ1WwulZB3B1NvdfSdALR7wYi4UtqiGTV8t+KyfhHJ+zVe7DtrxM1i7luuV2Pcf1P9k9Utezex29PYfigCakleZhJCcZeh+ZEXBejXHwca+wqYMAUF+BuaRpYOuQxzvMlUUYjysMVKZkAKXG3g38wQ3v3iVpgxdss4V75vI3fG8Pbr2JnUkEPl1v42sfAvH1ZZP8wVnsXLY1dBRtQKh95YGkf04rrHzMT1LLDWxrbJpRXmYF9pNQWltTgcd8anlb0VFhh8Rpsy8OY0lBTjm11Zrd+x+Brgjt4ongWXLwUCge+JTpw8nuKRyMS8SGWJFdhev579pJWka7+e0nkrqDT73oP2feve/pz/SJHiMWiZ1PfgBIRmlg0mR7m9sJgY09s8+T/hln2DimqavDL99pmv2o8Cm48DNUiULl50ajSYhLh6okiKiOuxmIqo6pyC3ZZEZWbD43nw11VRtGNB8R5hNioSTGzitaaVlUZYZtNAkuHnCtXSa0ipZCxXLlBvt1rayzD2y25pvO8pfA6dlU11lv+yqjCwo5Iw16d4wZzVzFTdmofORWtncrLvO1EyMO/bxzhH0D6ccVlVRkVEOR4C1I9+qHKDWHAJeq+y1jeGbsgRYexzNIL8sDrYR6K3Wn6o/bLnsa8fEaLd8iQEsA6talRMKPiHU2Lr6YOCgAxUwNfY46bHAZIbQl4Bjcz9GzfoNDAsf7hnRr51gRJ61sYw/86+a9iG/Ojn8zB+ikmtR1jU1he+300HkxKLmNThAYe1VAA0RJPtKc8amO1zRFnT5BvuWiZa1Rf7ydqY+Bmvboctw59P8bxjnTFndopRSBJ00qIy1ZqY4L6OUW5OkoZ1TQS8Y5G5qDgvBvwdqramFKE1MV7CK1US2eediGgNqaqn6jPT5sO4Frr0gma9EJryt7/rB488BI9kvEUPCnobPKQSmrw0m0sKcHQrKtnPjozmJFEaiCkoHQk8FRApwZXYDGtt6xz+9QELUgpBBGDK0STWomKlCQFQVGDGdHbvCNSCkHc4Aq1pNZRYx+LrRnMKGXcAZr+A36YRaMwgYh3vs2HWv53+AfaAMhbB+HANwAAAABJRU5ErkJggg==",title:"AR&VR Service Design",information:"AR/VR \uc744 \ud1b5\ud574 \uc0c1\ud638\uc791\uc6a9\uc774 \ubc1c\uc0dd\ud558\ub294 \uc9c0\uc810\uc744 \ud0d0\uad6c\ud558\uace0 Creative\ud55c \uccb4\uac10\ud615 \uac00\uc0c1 \ud658\uacbd\uc744 \uc81c\uc2dc\ud558\ub294 \uc5f0\uad6c\ub97c \uc9c4\ud589"}],n=[{question:"Journal Articles",answer:(0,_I.jsxs)("div",{children:[(0,_I.jsx)("h4",{children:"2021"}),(0,_I.jsx)("div",{children:"Kim, H. -J., Lee, M. -H., & Nam, T. -J. (2021). Deriving Design Requirements and Conceptual Scenarios of Temporary Negative Pressure Isolation Wards for Infectious Diseases. Archives of Design Research, 34(3), 137-153. Lee, M. H., Lee, H. M., Chung, S. T. (2021). Are You Watching Me?: The Design of a Video-based Learning Management System Using Learners\u201d History Data. Archives of Design Research, 34(4), 225-239."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2020"}),(0,_I.jsx)("div",{children:"Lee, M. H. (2020). User-Adaptive Data Visualization in Daily Context through Everyday Objects. Archives of Design Research, 33(1), 5-15. Jeong, Y., Kim, H. J., Cho, H., & Nam, T. J. (2020). M. Integrator: a maker\u2019s tool for integrating kinetic mechanisms and sensors. International Journal on Interactive Design and Manufacturing (IJIDeM), 14(1), 271-283."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2019"}),(0,_I.jsx)("div",{children:"Lee, M. H. (2019). Challenges of designing with open data: The case of cultural data. Archives of Design Research, 32(3), 57-72."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2018"}),(0,_I.jsx)("div",{children:"Lee, M. H., Row, Y. K., Son, O., Lee, U., Kim, J., Jeong, J., \u2026 & Nam, T. J. (2018). Flower-Pop: Facilitating casual group conversations with multiple mobile devices. Proceedings of the ACM on Interactive, Mobile, Wearable and Ubiquitous Technologies, 1(4), 1-24. Lee, M. H. (2018). A study on Citizens\u2019 public report application usage. Archives of Design Research, 31(3), 49-66. Kim, H. J., Jeong, Y., Kim, J. W., & Nam, T. J. (2018). A prototyping tool for kinetic mechanism design and fabrication: Developing and deploying M. Sketch for science, technology, engineering, the arts, and mathematics education. Advances in Mechanical Engineering, 10(12), 1687814018804104."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2016"}),(0,_I.jsx)("div",{children:"Lee, M. H., & Nam, T. J. (2016). Possibility of Utilizing Digital Traces for Enhancing Emotional Values of Digital Artifacts. Archives of Design Research, 29(2), 65-77."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2015"}),(0,_I.jsx)("div",{children:"Lee, M. H., Cha, S., & Nam, T. J. (2015). Impact of digital traces on the appreciation of movie contents. Digital Creativity, 26(3-4), 287-303."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2011"}),(0,_I.jsx)("div",{children:"\uc774\ubb38\ud658, & \ub0a8\ud0dd\uc9c4. (2011). \uc9c0\ub2a5\ud615 \uc81c\ud488\uc5d0\uc11c\uc758 \uc790\ub3d9\ud654\uac00 \uac10\uc131\uc801 \uacbd\ud5d8 \ud615\uc131\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5: \uc9c0\ub2a5\ud615 \ud654\ubd84 \uc0ac\ub840\ub97c \uc911\uc2ec\uc73c\ub85c. Archives of Design Research, 24(2), 195-206."})]})},{question:"International Conference Proceedings",answer:(0,_I.jsxs)("div",{children:[(0,_I.jsx)("h4",{children:"2021"}),(0,_I.jsx)("div",{children:"Kim, H. -J., Lee, M. -H., & Nam, T. -J. (2021). Deriving Design Requirements and Conceptual Scenarios of Temporary Negative Pressure Isolation Wards for Infectious Diseases. Archives of Design Research, 34(3), 137-153. Lee, M. H., Lee, H. M., Chung, S. T. (2021). Are You Watching Me?: The Design of a Video-based Learning Management System Using Learners\u201d History Data. Archives of Design Research, 34(4), 225-239."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2020"}),(0,_I.jsx)("div",{children:"Lee, M. H. (2020). User-Adaptive Data Visualization in Daily Context through Everyday Objects. Archives of Design Research, 33(1), 5-15. Jeong, Y., Kim, H. J., Cho, H., & Nam, T. J. (2020). M. Integrator: a maker\u2019s tool for integrating kinetic mechanisms and sensors. International Journal on Interactive Design and Manufacturing (IJIDeM), 14(1), 271-283."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2019"}),(0,_I.jsx)("div",{children:"Lee, M. H. (2019). Challenges of designing with open data: The case of cultural data. Archives of Design Research, 32(3), 57-72."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2018"}),(0,_I.jsx)("div",{children:"Lee, M. H., Row, Y. K., Son, O., Lee, U., Kim, J., Jeong, J., \u2026 & Nam, T. J. (2018). Flower-Pop: Facilitating casual group conversations with multiple mobile devices. Proceedings of the ACM on Interactive, Mobile, Wearable and Ubiquitous Technologies, 1(4), 1-24. Lee, M. H. (2018). A study on Citizens\u2019 public report application usage. Archives of Design Research, 31(3), 49-66. Kim, H. J., Jeong, Y., Kim, J. W., & Nam, T. J. (2018). A prototyping tool for kinetic mechanism design and fabrication: Developing and deploying M. Sketch for science, technology, engineering, the arts, and mathematics education. Advances in Mechanical Engineering, 10(12), 1687814018804104."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2016"}),(0,_I.jsx)("div",{children:"Lee, M. H., & Nam, T. J. (2016). Possibility of Utilizing Digital Traces for Enhancing Emotional Values of Digital Artifacts. Archives of Design Research, 29(2), 65-77."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2015"}),(0,_I.jsx)("div",{children:"Lee, M. H., Cha, S., & Nam, T. J. (2015). Impact of digital traces on the appreciation of movie contents. Digital Creativity, 26(3-4), 287-303."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2011"}),(0,_I.jsx)("div",{children:"\uc774\ubb38\ud658, & \ub0a8\ud0dd\uc9c4. (2011). \uc9c0\ub2a5\ud615 \uc81c\ud488\uc5d0\uc11c\uc758 \uc790\ub3d9\ud654\uac00 \uac10\uc131\uc801 \uacbd\ud5d8 \ud615\uc131\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5: \uc9c0\ub2a5\ud615 \ud654\ubd84 \uc0ac\ub840\ub97c \uc911\uc2ec\uc73c\ub85c. Archives of Design Research, 24(2), 195-206."})]})},{question:"Domestic Conference Proceedings",answer:(0,_I.jsxs)("div",{children:[(0,_I.jsx)("h4",{children:"2021"}),(0,_I.jsx)("div",{children:"Kim, H. -J., Lee, M. -H., & Nam, T. -J. (2021). Deriving Design Requirements and Conceptual Scenarios of Temporary Negative Pressure Isolation Wards for Infectious Diseases. Archives of Design Research, 34(3), 137-153. Lee, M. H., Lee, H. M., Chung, S. T. (2021). Are You Watching Me?: The Design of a Video-based Learning Management System Using Learners\u201d History Data. Archives of Design Research, 34(4), 225-239."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2020"}),(0,_I.jsx)("div",{children:"Lee, M. H. (2020). User-Adaptive Data Visualization in Daily Context through Everyday Objects. Archives of Design Research, 33(1), 5-15. Jeong, Y., Kim, H. J., Cho, H., & Nam, T. J. (2020). M. Integrator: a maker\u2019s tool for integrating kinetic mechanisms and sensors. International Journal on Interactive Design and Manufacturing (IJIDeM), 14(1), 271-283."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2019"}),(0,_I.jsx)("div",{children:"Lee, M. H. (2019). Challenges of designing with open data: The case of cultural data. Archives of Design Research, 32(3), 57-72."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2018"}),(0,_I.jsx)("div",{children:"Lee, M. H., Row, Y. K., Son, O., Lee, U., Kim, J., Jeong, J., \u2026 & Nam, T. J. (2018). Flower-Pop: Facilitating casual group conversations with multiple mobile devices. Proceedings of the ACM on Interactive, Mobile, Wearable and Ubiquitous Technologies, 1(4), 1-24. Lee, M. H. (2018). A study on Citizens\u2019 public report application usage. Archives of Design Research, 31(3), 49-66. Kim, H. J., Jeong, Y., Kim, J. W., & Nam, T. J. (2018). A prototyping tool for kinetic mechanism design and fabrication: Developing and deploying M. Sketch for science, technology, engineering, the arts, and mathematics education. Advances in Mechanical Engineering, 10(12), 1687814018804104."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2016"}),(0,_I.jsx)("div",{children:"Lee, M. H., & Nam, T. J. (2016). Possibility of Utilizing Digital Traces for Enhancing Emotional Values of Digital Artifacts. Archives of Design Research, 29(2), 65-77."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2015"}),(0,_I.jsx)("div",{children:"Lee, M. H., Cha, S., & Nam, T. J. (2015). Impact of digital traces on the appreciation of movie contents. Digital Creativity, 26(3-4), 287-303."}),(0,_I.jsx)("br",{}),(0,_I.jsx)("h4",{children:"2011"}),(0,_I.jsx)("div",{children:"\uc774\ubb38\ud658, & \ub0a8\ud0dd\uc9c4. (2011). \uc9c0\ub2a5\ud615 \uc81c\ud488\uc5d0\uc11c\uc758 \uc790\ub3d9\ud654\uac00 \uac10\uc131\uc801 \uacbd\ud5d8 \ud615\uc131\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5: \uc9c0\ub2a5\ud615 \ud654\ubd84 \uc0ac\ub840\ub97c \uc911\uc2ec\uc73c\ub85c. Archives of Design Research, 24(2), 195-206."})]})}],i=be(),a=(0,r.useRef)(null),o=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=new URLSearchParams(i.search).get("focusToApply"),t=new URLSearchParams(i.search).get("focusToFnq");if("true"===e){var n=180,r=a.current.getBoundingClientRect().top+window.pageYOffset-n;window.scrollTo({top:r})}else if("true"===t){n=180;var s=o.current.getBoundingClientRect().top+window.pageYOffset-n;window.scrollTo({top:s})}})),(0,_I.jsxs)("div",{className:"PageWrapper",children:[(0,_I.jsxs)("div",{className:"introContainer",children:[(0,_I.jsxs)("div",{className:"intro_text",children:[(0,_I.jsx)("h2",{children:"Introduction"}),(0,_I.jsx)("p",{children:"Mix Lab\uc758 \uc18c\uac1c \ud398\uc774\uc9c0 \uc785\ub2c8\ub2e4."})]}),(0,_I.jsx)("div",{className:"gradient"}),(0,_I.jsx)("div",{className:"introbanner"})]}),(0,_I.jsxs)("div",{className:"PageContainer",children:[(0,_I.jsx)(LI,{subText:e.subText,h2:e.h2,information:e.information,align:"center",type:"center",className:"identity",children:(0,_I.jsx)(wI,{data:t})}),(0,_I.jsx)(LI,{ref:o,className:"manyquestion",h2:"\uc790\uc8fc \ubb3b\ub294 \uc9c8\ubb38\ub4e4",align:"center",type:"center",children:(0,_I.jsx)(QF,{QnA:[{question:"Q1. \uc804\uacf5\uc740 \uc0c1\uad00\uc5c6\ub098\uc694?",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."},{question:"Q2. \uc5f0\uad6c\uc2e4\uc5d0\uc11c \uc5b4\ub5a4 \ud65c\ub3d9\uc744 \ud558\ub098\uc694?",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."},{question:"Q3. \uc5f0\uad6c\uc2e4 \ud559\uc0dd\ub4e4\uc758 \uc9c4\ub85c\ub294 \uc5b4\ub5bb\uac8c \ub418\ub098\uc694?",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."},{question:"Q4 \uc2ec\uc0ac \uae30\uc900(\ud559\ub144, \ud559\uc810 \ub4f1)\uc774 \uc5b4\ub5bb\uac8c \ub418\ub098\uc694?.",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."},{question:"Q5. \uc804\uacf5 \ub2a5\ub825\uc774 \ub6f0\uc5b4\ub098\uc9c0 \uc54a\uc544\ub3c4 \uc9c0\uc6d0\ud560 \uc218 \uc788\ub098\uc694?",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."},{question:"Q6. \uc11d\uc0ac \uacfc\uc815 \uc218\ub8cc \uc2dc \uc5b4\ub5a4 \ud559\uc704\ub97c \ubc1b\uac8c \ub418\ub098\uc694?",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."},{question:"Q7. \ud559\ubd80 \uc5f0\uad6c\uc0dd\uc740 \uc878\uc5c5 \ud6c4 \ub300\ud559\uc6d0\uc73c\ub85c \uc9c4\ud559\ud558\ub098\uc694?",answer:"\uc0b0\uc5c5\ub514\uc790\uc778\uacf5\ud559\uacfc, \ubbf8\ub514\uc5b4\ub514\uc790\uc778\uacf5\ud559\uacfc \uc804\uacf5 \ubaa8\ub450 \uc9c0\uc6d0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub610\ud55c \ub514\uc790\uc778\uc804\uacf5\uacfc \uc2dc\ub108\uc9c0\ub97c \ub0bc \uc218 \uc788\ub294 \ucef4\ud4e8\ud130\uacf5\ud559, \uac8c\uc784\uacf5\ud559, \uacbd\uc601\uacf5\ud559 \uc804\uacf5\uc790\ub3c4 \ud658\uc601\ud569\ub2c8\ub2e4."}],Hyphen:!0})}),(0,_I.jsx)(LI,{h2:"MIX LAB \uc5ed\uc0ac",align:"center",type:"center",className:"history",children:(0,_I.jsx)(QF,{QnA:n,Hyphen:!1})}),(0,_I.jsx)(LI,{ref:a,h2:"MIX LAB\uc5d0 \uc9c0\uc6d0\ud558\uae30",align:"center",type:"center",className:"apply",children:(0,_I.jsx)("div",{children:(0,_I.jsx)($F,{})})})]})]})}function tB(e){var t=l((0,r.useState)(!1),2);t[0],t[1];return(0,_I.jsxs)("div",{onClick:e.onClick,className:"cardContainer ".concat(e.type," ").concat(e.mainNews?"mainNews":""),children:[(0,_I.jsx)("div",{className:"cardImg",style:{backgroundImage:"url(".concat(e.thumbnail,")")}}),(0,_I.jsxs)("div",{className:"cardinfoContainer",children:[(0,_I.jsxs)("div",{className:"cardTextContainer",children:[(0,_I.jsx)("div",{className:"cardTitle",children:(0,_I.jsx)("span",{children:e.title||"sad"})}),(0,_I.jsx)("div",{className:"cardIntro",children:(0,_I.jsx)("span",{children:e.info||""})})]}),(0,_I.jsxs)("div",{className:"cardMore",children:[(0,_I.jsx)("span",{children:"\uc790\uc138\ud788\ubcf4\uae30 "}),(0,_I.jsx)("img",{src:WF,alt:""})]})]})]})}function nB(e){var t=we(),n=e.data.map((function(n){return(0,_I.jsx)(tB,{thumbnail:n.img||n.thumbnail,title:n.title,info:n.info,mainNews:n.mainNews,type:e.type,onClick:function(){"project"===e.type?function(){var e=n.link;window.open(e,"_blank")}():"award"===e.type?t("/award/"+n.title):"news"===e.type?t("/news/"+n.title):t("/project/"+n.title)}},n.title)}));return(0,_I.jsx)("div",{className:"maincontainer",children:n})}function rB(){var e=l((0,r.useState)([]),2),t=e[0],n=e[1];(0,r.useEffect)((function(){var e=[];gI.collection("award").get().then((function(t){t.forEach((function(t){e.push(t.data())})),n(e)}))}),[]);var i=l((0,r.useState)([]),2),a=i[0],o=i[1];return(0,r.useEffect)((function(){var e=[];gI.collection("news").get().then((function(t){t.forEach((function(t){e.push(t.data())})),o(e)}))}),[]),(0,_I.jsxs)("div",{className:"PageWrapper",children:[(0,_I.jsxs)("div",{className:"introContainer",children:[(0,_I.jsxs)("div",{className:"intro_text",children:[(0,_I.jsx)("h2",{children:"News"}),(0,_I.jsx)("p",{children:"Mix Lab\uc758 \uc18c\uc2dd\uc744 \uc54c\ub824\ub4dc\ub9bd\ub2c8\ub2e4."})]}),(0,_I.jsx)("div",{className:"gradient"}),(0,_I.jsx)("div",{className:"introbanner"})]}),(0,_I.jsxs)("div",{className:"PageContainer",children:[(0,_I.jsx)(LI,{h2:"MIX LAB \uc218\uc0c1 \uc2e4\uc801",information:"\uae30\ub2a5\ub300\ud68c, \uc5b4\uc6cc\ub4dc \ub4f1 \uc5f0\uad6c \ud504\ub85c\uc81d\ud2b8 \uc791\uc5c5\ubb3c\uc785\ub2c8\ub2e4.",align:"center",type:"center",className:"prize",children:(0,_I.jsx)("div",{children:(0,_I.jsx)(nB,{type:"award",data:t})})}),(0,_I.jsx)(LI,{subText:"Recent News",h2:"MIX LAB\uc758 \ucd5c\uadfc \uc18c\uc2dd",information:(0,_I.jsxs)("div",{children:["MIXER\ub4e4\uc758 \ub0b4\uc678\ubd80 \ud65c\ub3d9 \ubc0f MIX LAB\uc5d0\uc11c",(0,_I.jsx)("br",{}),"\uc9c4\ud589\ub41c \uc5f0\uad6c\uad00\ub828 \uc0c8\ub85c\uc6b4 \uc18c\uc2dd\uc785\ub2c8\ub2e4."]}),align:"center",type:"center",className:"RecentNews",children:(0,_I.jsx)("div",{children:(0,_I.jsx)(nB,{type:"news",data:a})})})]})]})}var iB=n.p+"static/media/hanjongkim.8ce41729fa81f43286fa.png",aB=n.p+"static/media/moonhwanlee.05bb3322c04955131445.png",oB={FacultyCard:"FacultyCard_FacultyCard__vseVY",Photo:"FacultyCard_Photo__VvUzZ",Content:"FacultyCard_Content__C+PAT",Info:"FacultyCard_Info__Z5Tcy",professor:"FacultyCard_professor__u5IFZ",History:"FacultyCard_History__2HBXW",name:"FacultyCard_name__1be+6"};function sB(e){return(0,_I.jsxs)("div",{className:oB.FacultyCard,children:[(0,_I.jsx)("div",{className:oB.Photo,children:(0,_I.jsx)("img",{src:e.data.image,alt:""})}),(0,_I.jsxs)("div",{className:oB.Content,children:[(0,_I.jsx)("h1",{className:oB.name,children:e.data.name}),(0,_I.jsxs)("div",{className:oB.Info,children:[(0,_I.jsxs)("div",{className:oB.professor,children:[(0,_I.jsxs)("div",{children:[(0,_I.jsx)("b",{children:e.data.position}),(0,_I.jsx)("br",{}),e.data.division]}),(0,_I.jsx)("b",{children:e.data.major})]}),(0,_I.jsxs)("div",{className:oB.History,children:[e.data.history[0],(0,_I.jsx)("br",{}),e.data.history[1],(0,_I.jsx)("br",{}),e.data.history[2]]})]})]})]})}var uB={StudentCards:"StudentCards_StudentCards__bBRdI",StudentCard:"StudentCards_StudentCard__Ow8tE",StudentCard_content:"StudentCards_StudentCard_content__S5oGE",name:"StudentCards_name__a6Fyj",email:"StudentCards_email__+fq4-",department:"StudentCards_department__rvUp0",major:"StudentCards_major__VHiJa",work:"StudentCards_work__A3XbF"};function cB(e){function t(e){return(0,_I.jsxs)("div",{className:uB.StudentCard,children:[(0,_I.jsx)("img",{onerror:"this.onerror=null;",src:e.data.img}),(0,_I.jsxs)("div",{className:uB.StudentCard_content,children:[(0,_I.jsxs)("div",{children:[(0,_I.jsx)("div",{className:uB.name,children:e.data.name}),(0,_I.jsx)("div",{className:uB.email,children:"useremail@tukorea.ac.kr"})]}),(0,_I.jsxs)("div",{children:[(0,_I.jsx)("div",{className:uB.department,children:"Media Design Engineering"}),(0,_I.jsx)("div",{className:uB.major,children:"UI/UX, Product Design"})]}),(0,_I.jsx)("div",{className:uB.work,children:"Work: "})]})]})}return(0,_I.jsx)("div",{className:uB.StudentCards,children:e.data.map((function(e){return(0,_I.jsx)(t,{data:e})}))})}function lB(){var e=[{name:"\uc774\ubb38\ud658 \uad50\uc218",image:aB,position:"Assistant Professor",division:"Department of Design Engineering, TUKorea moonhwanlee@tukorea.ac.kr",email:"\uc774\ubb38\ud658 \uad50\uc218",major:"UX/UI Design, Interction Design",history:["(\ud559\uc0ac) KAIST \uc0b0\uc5c5\ub514\uc790\uc778\ud559\uacfc","(\uc11d\uc0ac) KAIST \uc0b0\uc5c5\ub514\uc790\uc778\ud559\uacfc/TU-Delft(\uad50\ud658\uc5f0\uad6c)","(\ubc15\uc0ac) KAIST \uc0b0\uc5c5\ub514\uc790\uc778\ud559\uacfc"]},{name:"\uae40\ud55c\uc885 \uad50\uc218",image:iB,position:"Assistant Professor",division:"Department of Design Engineering, TUKorea",email:"hanjongkim@tukorea.ac.kr",major:"Web-based 3D Graphics, Design Tool Development, SW System Design/Development",history:["(\ud559\uc0ac) KAIST \uc0b0\uc5c5\ub514\uc790\uc778\ud559\uacfc","(\uc11d\uc0ac) KAIST \uc0b0\uc5c5\ub514\uc790\uc778\ud559\uacfc","(\ubc15\uc0ac) KAIST \uc0b0\uc5c5\ub514\uc790\uc778\ud559\uacfc"]}],t=l((0,r.useState)([]),2),n=t[0],i=t[1],a=l((0,r.useState)([]),2),o=a[0],s=a[1];(0,r.useEffect)((function(){var e=[];gI.collection("student").get().then((function(t){t.forEach((function(t){e.push(t.data())})),i(e)}))}),[]),(0,r.useEffect)((function(){var e=[];gI.collection("graduate").get().then((function(t){t.forEach((function(t){e.push(t.data())})),s(e)}))}),[]);var u=be(),c=(0,r.useRef)(null);return(0,r.useEffect)((function(){if("true"===new URLSearchParams(u.search).get("focusToPeople")){var e=c.current.getBoundingClientRect().top+window.pageYOffset-180;window.scrollTo({top:e})}}),[]),(0,_I.jsxs)("div",{className:"PageWrapper",children:[(0,_I.jsxs)("div",{className:"introContainer",children:[(0,_I.jsxs)("div",{className:"intro_text",children:[(0,_I.jsx)("h2",{children:"People"}),(0,_I.jsx)("p",{children:"\uc5f4\uc815\uc801\uc778 Mixer\ub4e4\uacfc \ud568\uaed8\ud569\ub2c8\ub2e4."})]}),(0,_I.jsx)("div",{className:"gradient"}),(0,_I.jsx)("div",{className:"introbanner"})]}),(0,_I.jsxs)("div",{className:"PageContainer",children:[(0,_I.jsx)(LI,{ref:c,subText:"Faculty",h2:"MIX LAB \uad50\uc218\uc9c4",align:"center",type:"center",className:"faculty",children:(0,_I.jsxs)("div",{className:"FacultyCard",children:[(0,_I.jsx)(sB,{data:e[0]}),(0,_I.jsx)(sB,{data:e[1]})]})}),(0,_I.jsx)(LI,{h2:"MIX LAB \ud559\ubd80\uc0dd \uc5f0\uad6c\uc6d0",align:"center",type:"center",className:"student",children:(0,_I.jsx)("div",{className:"studentCard",children:(0,_I.jsx)(cB,{data:o})})}),(0,_I.jsx)(LI,{h2:"MIX LAB\uc758 \uc878\uc5c5\uc0dd",align:"center",type:"center",className:"graduatedstudent",children:(0,_I.jsx)("div",{className:"studentCard",children:(0,_I.jsx)(cB,{data:n})})})]})]})}function hB(){var e=Se().id,t=l((0,r.useState)({id:"",engtitle:"",title:"",info:"",link1:"",link2:"",subimg:"",mainimg:"",thumbnail:""}),2),n=t[0],i=t[1];return(0,r.useEffect)((function(){gI.collection("project_works").doc(e).get().then((function(e){i(e.data())}))}),[]),(0,_I.jsx)("div",{className:"PageWrapper",children:(0,_I.jsxs)("div",{className:"PageContainer projectWork",children:[(0,_I.jsxs)("div",{className:"projecttitlecontainer",children:[(0,_I.jsx)("div",{className:"projectworktitle",children:(0,_I.jsx)("h3",{children:n.title})}),(0,_I.jsx)("div",{className:"projectworkengtitle",children:(0,_I.jsx)("span",{children:n.engtitle})}),(0,_I.jsx)("div",{className:"projectworkname",children:(0,_I.jsx)("span",{children:n.name})})]}),(0,_I.jsxs)("div",{className:"projectimgcontainer",children:[(0,_I.jsx)("div",{className:"porjectimg mainImg",style:{backgroundImage:"url(".concat(n.mainimg,")")}}),n.subimg&&(0,_I.jsx)("div",{className:"porjectimg subimg",style:{backgroundImage:"url(".concat(n.subimg,")")}})]}),(0,_I.jsx)("div",{className:"projectworkinfo",children:(0,_I.jsx)("span",{children:n.info})}),(0,_I.jsxs)("div",{className:"linkcontainer",children:[(0,_I.jsx)("div",{className:"projectworklink",onClick:function(){!function(){var e=n.link1;window.open(e,"_blank")}()},children:(0,_I.jsx)("span",{children:n.link1name})}),(0,_I.jsx)("div",{className:"projectworklink",onClick:function(){!function(){var e=n.link2;window.open(e,"_blank")}()},children:(0,_I.jsx)("span",{children:n.link2name})})]})]})})}function fB(){var e=Se().id,t=l((0,r.useState)({id:"",engtitle:"",title:"",info:"",link1:"",link2:"",subimg:"",mainimg:"",thumbnail:""}),2),n=t[0],i=t[1];return(0,r.useEffect)((function(){gI.collection("news").doc(e).get().then((function(e){i(e.data())})),console.log(e)}),[]),console.log(n),(0,_I.jsx)("div",{className:"PageWrapper",children:(0,_I.jsxs)("div",{className:"PageContainer projectWork",children:[(0,_I.jsxs)("div",{className:"projecttitlecontainer",children:[(0,_I.jsx)("div",{className:"projectworktitle",children:(0,_I.jsx)("span",{children:n.title})}),(0,_I.jsx)("div",{className:"projectworkengtitle",children:(0,_I.jsx)("span",{children:n.engtitle})}),(0,_I.jsx)("div",{className:"projectworkname",children:(0,_I.jsx)("span",{children:n.name})})]}),(0,_I.jsxs)("div",{className:"projectimgcontainer",children:[(0,_I.jsx)("div",{className:"porjectimg mainImg",style:{backgroundImage:"url(".concat(n.mainimg,")")}}),n.subimg&&(0,_I.jsx)("div",{className:"porjectimg subimg",style:{backgroundImage:"url(".concat(n.subimg,")")}})]}),(0,_I.jsx)("div",{className:"projectworkinfo",children:(0,_I.jsx)("span",{children:n.info})}),(0,_I.jsxs)("div",{className:"linkcontainer",children:[(0,_I.jsx)("div",{className:"projectworklink",children:(0,_I.jsx)("span",{children:n.link1})}),(0,_I.jsx)("div",{className:"projectworklink",children:(0,_I.jsx)("span",{children:n.link2})})]})]})})}function dB(){var e=Se().id,t=l((0,r.useState)({id:"",engtitle:"",title:"",info:"",link1:"",link2:"",subimg:"",mainimg:"",thumbnail:""}),2),n=t[0],i=t[1];return(0,r.useEffect)((function(){gI.collection("award").doc(e).get().then((function(e){i(e.data())}))}),[]),console.log(n),(0,_I.jsx)("div",{className:"PageWrapper",children:(0,_I.jsxs)("div",{className:"PageContainer projectWork",children:[(0,_I.jsxs)("div",{className:"projecttitlecontainer",children:[(0,_I.jsxs)("div",{className:"awardInfo",children:[(0,_I.jsx)("span",{children:n.year}),(0,_I.jsx)("span",{children:n.awardType})]}),(0,_I.jsx)("div",{className:"projectworktitle",children:(0,_I.jsx)("span",{children:n.title})}),(0,_I.jsx)("div",{className:"projectworkengtitle",children:(0,_I.jsx)("span",{children:n.engtitle})}),(0,_I.jsx)("div",{className:"projectworkname",children:(0,_I.jsx)("span",{children:n.name})})]}),(0,_I.jsxs)("div",{className:"projectimgcontainer",children:[(0,_I.jsx)("div",{className:"porjectimg mainImg",style:{backgroundImage:"url(".concat(n.mainimg,")")}}),n.subimg&&(0,_I.jsx)("div",{className:"porjectimg subimg",style:{backgroundImage:"url(".concat(n.subimg,")")}})]}),(0,_I.jsx)("div",{className:"projectworkinfo",children:(0,_I.jsx)("span",{children:n.info})}),(0,_I.jsxs)("div",{className:"linkcontainer",children:[(0,_I.jsx)("div",{className:"projectworklink",children:(0,_I.jsx)("span",{children:n.link1})}),(0,_I.jsx)("div",{className:"projectworklink",children:(0,_I.jsx)("span",{children:n.link2})})]})]})})}function pB(){var e={subText:"Research Project",h2:"MIX LAB \uc5f0\uad6c \ud504\ub85c\uc81d\ud2b8",information:[" \uae30\ub2a5\ub300\ud68c, \uc5b4\uc6cc\ub4dc \ub4f1 \uc5f0\uad6c \ud504\ub85c\uc81d\ud2b8 \uc791\uc5c5\ubb3c\uc785\ub2c8\ub2e4.  "]},t={subText:"Our Works",h2:"Mixer\ub4e4\uc758 \uc791\ud488",information:[" \ud559\uae30 \uacfc\uc81c\ubb3c, \uac1c\uc778 \uc791\uc5c5, \uc878\uc5c5\uc791\ud488\ub4f1 MIXER\ub4e4\uc758 \uc791\uc5c5\ubb3c\uc785\ub2c8\ub2e4. "]},n=l((0,r.useState)([]),2),i=n[0],a=n[1];(0,r.useEffect)((function(){var e=[];gI.collection("post").get().then((function(t){t.forEach((function(t){e.push(t.data())})),a(e),console.log(e)}))}),[]);var o=l((0,r.useState)([]),2),s=o[0],u=o[1];(0,r.useEffect)((function(){var e=[];gI.collection("project_works").get().then((function(t){t.forEach((function(t){e.push(t.data())})),u(e),console.log(e)}))}),[]);var c=be(),h=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=new URLSearchParams(c.search).get("scrollToTarget");if(h.current&&"true"===e){var t=h.current.getBoundingClientRect().top+window.pageYOffset-180;window.scrollTo({top:t})}})),(0,_I.jsxs)("div",{className:"PageWrapper",children:[(0,_I.jsxs)("div",{className:"introContainer",children:[(0,_I.jsxs)("div",{className:"intro_text",children:[(0,_I.jsx)("h2",{children:"Project"}),(0,_I.jsx)("p",{children:"\uc2e4\ud328\uc640 \ub3c4\uc804\uc73c\ub85c \ub514\uc790\uc778\uc758 \uacbd\uacc4\ub97c \ub113\ud600\uac11\ub2c8\ub2e4. "})]}),(0,_I.jsx)("div",{className:"gradient"}),(0,_I.jsx)("div",{className:"introbanner"})]}),(0,_I.jsxs)("div",{className:"PageContainer",children:[(0,_I.jsx)(LI,{ref:h,subText:e.subText,h2:e.h2,information:e.information,align:"center",type:"center",className:"ResearchProject",children:(0,_I.jsx)(nB,{type:"project",data:i})}),(0,_I.jsx)(LI,{subText:t.subText,h2:t.h2,information:t.information,align:"center",type:"center",className:"identity",children:(0,_I.jsx)(nB,{type:"work",data:s})})]})]})}var vB=n(164),mB=n.t(vB,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;var gB=i.startTransition;mB.flushSync;function yB(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,s=r.useRef();null==s.current&&(s.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),U((function(e,t){var n=e.location;return D("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var u=s.current,c=l(r.useState({action:u.action,location:u.location}),2),h=c[0],f=c[1],d=(a||{}).v7_startTransition,p=r.useCallback((function(e){d&&gB?gB((function(){return f(e)})):f(e)}),[f,d]);return r.useLayoutEffect((function(){return u.listen(p)}),[u,p]),r.createElement(Fe,{basename:n,children:i,location:h.location,navigationType:h.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _B,bB;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_B||(_B={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(bB||(bB={}));var xB=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,_I.jsx)(yB,{basename:"/mixlab",children:(0,_I.jsx)(Be,{children:(0,_I.jsxs)(Ue,{element:(0,_I.jsx)(VF,{}),children:[(0,_I.jsx)(Ue,{index:!0,element:(0,_I.jsx)(FF,{})}),(0,_I.jsx)(Ue,{path:"/people",element:(0,_I.jsx)(lB,{})}),(0,_I.jsx)(Ue,{path:"/intro",element:(0,_I.jsx)(eB,{})}),(0,_I.jsx)(Ue,{path:"/project",element:(0,_I.jsx)(pB,{})}),(0,_I.jsx)(Ue,{path:"/news",element:(0,_I.jsx)(rB,{})}),(0,_I.jsx)(Ue,{path:"/project/:id",element:(0,_I.jsx)(hB,{})}),(0,_I.jsx)(Ue,{path:"/news/:id",element:(0,_I.jsx)(fB,{})}),(0,_I.jsx)(Ue,{path:"/award/:id",element:(0,_I.jsx)(dB,{})})]})})})),xB()}()}();
//# sourceMappingURL=main.76aae385.js.map